(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E_={exports:{}},Hc={},T_={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=Symbol.for("react.element"),NS=Symbol.for("react.portal"),DS=Symbol.for("react.fragment"),OS=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),MS=Symbol.for("react.context"),FS=Symbol.for("react.forward_ref"),jS=Symbol.for("react.suspense"),BS=Symbol.for("react.memo"),US=Symbol.for("react.lazy"),Cy=Symbol.iterator;function $S(t){return t===null||typeof t!="object"?null:(t=Cy&&t[Cy]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I_=Object.assign,S_={};function co(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}co.prototype.isReactComponent={};co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k_(){}k_.prototype=co.prototype;function Tp(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}var bp=Tp.prototype=new k_;bp.constructor=Tp;I_(bp,co.prototype);bp.isPureReactComponent=!0;var xy=Array.isArray,A_=Object.prototype.hasOwnProperty,Ip={current:null},C_={key:!0,ref:!0,__self:!0,__source:!0};function x_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)A_.call(e,r)&&!C_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qa,type:t,key:s,ref:o,props:i,_owner:Ip.current}}function zS(t,e){return{$$typeof:Qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qa}function HS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Py=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HS(""+t.key):e.toString(36)}function pu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qa:case NS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zd(o,0):r,xy(i)?(n="",t!=null&&(n=t.replace(Py,"$&/")+"/"),pu(i,e,n,"",function(c){return c})):i!=null&&(Sp(i)&&(i=zS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Py,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xy(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Zd(s,l);o+=pu(s,e,n,u,i)}else if(u=$S(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Zd(s,l++),o+=pu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(t,e,n){if(t==null)return t;var r=[],i=0;return pu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},mu={transition:null},qS={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:mu,ReactCurrentOwner:Ip};function P_(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ul,forEach:function(t,e,n){Ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!Sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=co;me.Fragment=DS;me.Profiler=LS;me.PureComponent=Tp;me.StrictMode=OS;me.Suspense=jS;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qS;me.act=P_;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=I_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ip.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)A_.call(e,u)&&!C_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Qa,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:MS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VS,_context:t},t.Consumer=t};me.createElement=x_;me.createFactory=function(t){var e=x_.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:FS,render:t}};me.isValidElement=Sp;me.lazy=function(t){return{$$typeof:US,_payload:{_status:-1,_result:t},_init:WS}};me.memo=function(t,e){return{$$typeof:BS,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};me.unstable_act=P_;me.useCallback=function(t,e){return qt.current.useCallback(t,e)};me.useContext=function(t){return qt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};me.useEffect=function(t,e){return qt.current.useEffect(t,e)};me.useId=function(){return qt.current.useId()};me.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return qt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};me.useRef=function(t){return qt.current.useRef(t)};me.useState=function(t){return qt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return qt.current.useTransition()};me.version="18.3.1";T_.exports=me;var W=T_.exports;const GS=RS(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS=W,QS=Symbol.for("react.element"),YS=Symbol.for("react.fragment"),XS=Object.prototype.hasOwnProperty,JS=KS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZS={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XS.call(e,r)&&!ZS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QS,type:t,key:s,ref:o,props:i,_owner:JS.current}}Hc.Fragment=YS;Hc.jsx=R_;Hc.jsxs=R_;E_.exports=Hc;var m=E_.exports,Qh={},N_={exports:{}},gn={},D_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var J=B.length;B.push(Q);e:for(;0<J;){var ee=J-1>>>1,pe=B[ee];if(0<i(pe,Q))B[ee]=Q,B[J]=pe,J=ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],J=B.pop();if(J!==Q){B[0]=J;e:for(var ee=0,pe=B.length,Se=pe>>>1;ee<Se;){var ut=2*(ee+1)-1,Z=B[ut],oe=ut+1,ne=B[oe];if(0>i(Z,J))oe<pe&&0>i(ne,Z)?(B[ee]=ne,B[oe]=J,ee=oe):(B[ee]=Z,B[ut]=J,ee=ut);else if(oe<pe&&0>i(ne,J))B[ee]=ne,B[oe]=J,ee=oe;else break e}}return Q}function i(B,Q){var J=B.sortIndex-Q.sortIndex;return J!==0?J:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,p=null,g=3,S=!1,x=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=B)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function D(B){if(R=!1,A(B),!x)if(n(u)!==null)x=!0,ie(M);else{var Q=n(c);Q!==null&&Y(D,Q.startTime-B)}}function M(B,Q){x=!1,R&&(R=!1,T(v),v=-1),S=!0;var J=g;try{for(A(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||B&&!I());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,g=p.priorityLevel;var pe=ee(p.expirationTime<=Q);Q=t.unstable_now(),typeof pe=="function"?p.callback=pe:p===n(u)&&r(u),A(Q)}else r(u);p=n(u)}if(p!==null)var Se=!0;else{var ut=n(c);ut!==null&&Y(D,ut.startTime-Q),Se=!1}return Se}finally{p=null,g=J,S=!1}}var j=!1,b=null,v=-1,_=5,k=-1;function I(){return!(t.unstable_now()-k<_)}function C(){if(b!==null){var B=t.unstable_now();k=B;var Q=!0;try{Q=b(!0,B)}finally{Q?E():(j=!1,b=null)}}else j=!1}var E;if(typeof w=="function")E=function(){w(C)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,q=O.port2;O.port1.onmessage=C,E=function(){q.postMessage(null)}}else E=function(){P(C,0)};function ie(B){b=B,j||(j=!0,E())}function Y(B,Q){v=P(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||S||(x=!0,ie(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return B()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function(B,Q,J){var ee=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,B){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=J+pe,B={id:f++,callback:Q,priorityLevel:B,startTime:J,expirationTime:pe,sortIndex:-1},J>ee?(B.sortIndex=J,e(c,B),n(u)===null&&B===n(c)&&(R?(T(v),v=-1):R=!0,Y(D,J-ee))):(B.sortIndex=pe,e(u,B),x||S||(x=!0,ie(M))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var Q=g;return function(){var J=g;g=Q;try{return B.apply(this,arguments)}finally{g=J}}}})(O_);D_.exports=O_;var ek=D_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk=W,pn=ek;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L_=new Set,Ea={};function ns(t,e){qs(t,e),qs(t+"Capture",e)}function qs(t,e){for(Ea[t]=e,t=0;t<e.length;t++)L_.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=Object.prototype.hasOwnProperty,nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ry={},Ny={};function rk(t){return Yh.call(Ny,t)?!0:Yh.call(Ry,t)?!1:nk.test(t)?Ny[t]=!0:(Ry[t]=!0,!1)}function ik(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sk(t,e,n,r){if(e===null||typeof e>"u"||ik(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kp=/[\-:]([a-z])/g;function Ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kp,Ap);Tt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kp,Ap);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kp,Ap);Tt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cp(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sk(e,n,i,r)&&(n=null),r||i===null?rk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xr=tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$l=Symbol.for("react.element"),_s=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),V_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),Rp=Symbol.for("react.memo"),Mr=Symbol.for("react.lazy"),F_=Symbol.for("react.offscreen"),Dy=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,eh;function Wo(t){if(eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function nh(t,e){if(!t||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function ok(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=nh(t.type,!1),t;case 11:return t=nh(t.type.render,!1),t;case 1:return t=nh(t.type,!0),t;default:return""}}function ef(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Es:return"Fragment";case _s:return"Portal";case Xh:return"Profiler";case xp:return"StrictMode";case Jh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M_:return(t.displayName||"Context")+".Consumer";case V_:return(t._context.displayName||"Context")+".Provider";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rp:return e=t.displayName||null,e!==null?e:ef(t.type)||"Memo";case Mr:e=t._payload,t=t._init;try{return ef(t(e))}catch{}}return null}function ak(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ef(e);case 8:return e===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lk(t){var e=j_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=lk(t))}function B_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U_(t,e){e=e.checked,e!=null&&Cp(t,"checked",e,!1)}function nf(t,e){U_(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rf(t,e.type,n):e.hasOwnProperty("defaultValue")&&rf(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rf(t,e,n){(e!=="number"||$u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qo=Array.isArray;function Ds(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(qo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function $_(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function My(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hl,H_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hl=Hl||document.createElement("div"),Hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uk=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){uk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function W_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function q_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ck=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function af(t,e){if(e){if(ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=null;function Np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cf=null,Os=null,Ls=null;function Fy(t){if(t=Ja(t)){if(typeof cf!="function")throw Error($(280));var e=t.stateNode;e&&(e=Qc(e),cf(t.stateNode,t.type,e))}}function G_(t){Os?Ls?Ls.push(t):Ls=[t]:Os=t}function K_(){if(Os){var t=Os,e=Ls;if(Ls=Os=null,Fy(t),e)for(t=0;t<e.length;t++)Fy(e[t])}}function Q_(t,e){return t(e)}function Y_(){}var rh=!1;function X_(t,e,n){if(rh)return t(e,n);rh=!0;try{return Q_(t,e,n)}finally{rh=!1,(Os!==null||Ls!==null)&&(Y_(),K_())}}function ba(t,e){var n=t.stateNode;if(n===null)return null;var r=Qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var df=!1;if(wr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){df=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{df=!1}function dk(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ra=!1,zu=null,Hu=!1,hf=null,hk={onError:function(t){ra=!0,zu=t}};function fk(t,e,n,r,i,s,o,l,u){ra=!1,zu=null,dk.apply(hk,arguments)}function pk(t,e,n,r,i,s,o,l,u){if(fk.apply(this,arguments),ra){if(ra){var c=zu;ra=!1,zu=null}else throw Error($(198));Hu||(Hu=!0,hf=c)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jy(t){if(rs(t)!==t)throw Error($(188))}function mk(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jy(i),t;if(s===r)return jy(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Z_(t){return t=mk(t),t!==null?e0(t):null}function e0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=e0(t);if(e!==null)return e;t=t.sibling}return null}var t0=pn.unstable_scheduleCallback,By=pn.unstable_cancelCallback,gk=pn.unstable_shouldYield,yk=pn.unstable_requestPaint,Je=pn.unstable_now,vk=pn.unstable_getCurrentPriorityLevel,Dp=pn.unstable_ImmediatePriority,n0=pn.unstable_UserBlockingPriority,Wu=pn.unstable_NormalPriority,wk=pn.unstable_LowPriority,r0=pn.unstable_IdlePriority,Wc=null,Kn=null;function _k(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Wc,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:bk,Ek=Math.log,Tk=Math.LN2;function bk(t){return t>>>=0,t===0?32:31-(Ek(t)/Tk|0)|0}var Wl=64,ql=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Go(l):(s&=o,s!==0&&(r=Go(s)))}else o=n&~i,o!==0?r=Go(o):s!==0&&(r=Go(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),i=1<<n,r|=t[n],e&=~i;return r}function Ik(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Ik(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function i0(){var t=Wl;return Wl<<=1,!(Wl&4194240)&&(Wl=64),t}function ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function kk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Op(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function s0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o0,Lp,a0,l0,u0,pf=!1,Gl=[],Zr=null,ei=null,ti=null,Ia=new Map,Sa=new Map,Br=[],Ak="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uy(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function Fo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ja(e),e!==null&&Lp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ck(t,e,n,r,i){switch(e){case"focusin":return Zr=Fo(Zr,t,e,n,r,i),!0;case"dragenter":return ei=Fo(ei,t,e,n,r,i),!0;case"mouseover":return ti=Fo(ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ia.set(s,Fo(Ia.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sa.set(s,Fo(Sa.get(s)||null,t,e,n,r,i)),!0}return!1}function c0(t){var e=Li(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=J_(n),e!==null){t.blockedOn=e,u0(t.priority,function(){a0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uf=r,n.target.dispatchEvent(r),uf=null}else return e=Ja(n),e!==null&&Lp(e),t.blockedOn=n,!1;e.shift()}return!0}function $y(t,e,n){gu(t)&&n.delete(e)}function xk(){pf=!1,Zr!==null&&gu(Zr)&&(Zr=null),ei!==null&&gu(ei)&&(ei=null),ti!==null&&gu(ti)&&(ti=null),Ia.forEach($y),Sa.forEach($y)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,pf||(pf=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,xk)))}function ka(t){function e(i){return jo(i,t)}if(0<Gl.length){jo(Gl[0],t);for(var n=1;n<Gl.length;n++){var r=Gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zr!==null&&jo(Zr,t),ei!==null&&jo(ei,t),ti!==null&&jo(ti,t),Ia.forEach(e),Sa.forEach(e),n=0;n<Br.length;n++)r=Br[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)c0(n),n.blockedOn===null&&Br.shift()}var Vs=xr.ReactCurrentBatchConfig,Gu=!0;function Pk(t,e,n,r){var i=Ae,s=Vs.transition;Vs.transition=null;try{Ae=1,Vp(t,e,n,r)}finally{Ae=i,Vs.transition=s}}function Rk(t,e,n,r){var i=Ae,s=Vs.transition;Vs.transition=null;try{Ae=4,Vp(t,e,n,r)}finally{Ae=i,Vs.transition=s}}function Vp(t,e,n,r){if(Gu){var i=mf(t,e,n,r);if(i===null)ph(t,e,r,Ku,n),Uy(t,r);else if(Ck(i,t,e,n,r))r.stopPropagation();else if(Uy(t,r),e&4&&-1<Ak.indexOf(t)){for(;i!==null;){var s=Ja(i);if(s!==null&&o0(s),s=mf(t,e,n,r),s===null&&ph(t,e,r,Ku,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ph(t,e,r,null,n)}}var Ku=null;function mf(t,e,n,r){if(Ku=null,t=Np(r),t=Li(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ku=t,null}function d0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vk()){case Dp:return 1;case n0:return 4;case Wu:case wk:return 16;case r0:return 536870912;default:return 16}default:return 16}}var Gr=null,Mp=null,yu=null;function h0(){if(yu)return yu;var t,e=Mp,n=e.length,r,i="value"in Gr?Gr.value:Gr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yu=i.slice(t,1<r?1-r:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kl(){return!0}function zy(){return!1}function yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kl:zy,this.isPropagationStopped=zy,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fp=yn(ho),Xa=He({},ho,{view:0,detail:0}),Nk=yn(Xa),sh,oh,Bo,qc=He({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(sh=t.screenX-Bo.screenX,oh=t.screenY-Bo.screenY):oh=sh=0,Bo=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),Hy=yn(qc),Dk=He({},qc,{dataTransfer:0}),Ok=yn(Dk),Lk=He({},Xa,{relatedTarget:0}),ah=yn(Lk),Vk=He({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),Mk=yn(Vk),Fk=He({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jk=yn(Fk),Bk=He({},ho,{data:0}),Wy=yn(Bk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$k={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zk[t])?!!e[t]:!1}function jp(){return Hk}var Wk=He({},Xa,{key:function(t){if(t.key){var e=Uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$k[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jp,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qk=yn(Wk),Gk=He({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=yn(Gk),Kk=He({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jp}),Qk=yn(Kk),Yk=He({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xk=yn(Yk),Jk=He({},qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zk=yn(Jk),e2=[9,13,27,32],Bp=wr&&"CompositionEvent"in window,ia=null;wr&&"documentMode"in document&&(ia=document.documentMode);var t2=wr&&"TextEvent"in window&&!ia,f0=wr&&(!Bp||ia&&8<ia&&11>=ia),Gy=" ",Ky=!1;function p0(t,e){switch(t){case"keyup":return e2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ts=!1;function n2(t,e){switch(t){case"compositionend":return m0(e);case"keypress":return e.which!==32?null:(Ky=!0,Gy);case"textInput":return t=e.data,t===Gy&&Ky?null:t;default:return null}}function r2(t,e){if(Ts)return t==="compositionend"||!Bp&&p0(t,e)?(t=h0(),yu=Mp=Gr=null,Ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f0&&e.locale!=="ko"?null:e.data;default:return null}}var i2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!i2[t.type]:e==="textarea"}function g0(t,e,n,r){G_(r),e=Qu(e,"onChange"),0<e.length&&(n=new Fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sa=null,Aa=null;function s2(t){A0(t,0)}function Gc(t){var e=Ss(t);if(B_(e))return t}function o2(t,e){if(t==="change")return e}var y0=!1;if(wr){var lh;if(wr){var uh="oninput"in document;if(!uh){var Yy=document.createElement("div");Yy.setAttribute("oninput","return;"),uh=typeof Yy.oninput=="function"}lh=uh}else lh=!1;y0=lh&&(!document.documentMode||9<document.documentMode)}function Xy(){sa&&(sa.detachEvent("onpropertychange",v0),Aa=sa=null)}function v0(t){if(t.propertyName==="value"&&Gc(Aa)){var e=[];g0(e,Aa,t,Np(t)),X_(s2,e)}}function a2(t,e,n){t==="focusin"?(Xy(),sa=e,Aa=n,sa.attachEvent("onpropertychange",v0)):t==="focusout"&&Xy()}function l2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(Aa)}function u2(t,e){if(t==="click")return Gc(e)}function c2(t,e){if(t==="input"||t==="change")return Gc(e)}function d2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:d2;function Ca(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yh.call(e,i)||!jn(t[i],e[i]))return!1}return!0}function Jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zy(t,e){var n=Jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jy(n)}}function w0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?w0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _0(){for(var t=window,e=$u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$u(t.document)}return e}function Up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h2(t){var e=_0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&w0(n.ownerDocument.documentElement,n)){if(r!==null&&Up(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zy(n,s);var o=Zy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f2=wr&&"documentMode"in document&&11>=document.documentMode,bs=null,gf=null,oa=null,yf=!1;function ev(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yf||bs==null||bs!==$u(r)||(r=bs,"selectionStart"in r&&Up(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Ca(oa,r)||(oa=r,r=Qu(gf,"onSelect"),0<r.length&&(e=new Fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bs)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Is={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},ch={},E0={};wr&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);function Kc(t){if(ch[t])return ch[t];if(!Is[t])return t;var e=Is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E0)return ch[t]=e[n];return t}var T0=Kc("animationend"),b0=Kc("animationiteration"),I0=Kc("animationstart"),S0=Kc("transitionend"),k0=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){k0.set(t,e),ns(e,[t])}for(var dh=0;dh<tv.length;dh++){var hh=tv[dh],p2=hh.toLowerCase(),m2=hh[0].toUpperCase()+hh.slice(1);wi(p2,"on"+m2)}wi(T0,"onAnimationEnd");wi(b0,"onAnimationIteration");wi(I0,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(S0,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function nv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pk(r,e,void 0,t),t.currentTarget=null}function A0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;nv(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;nv(i,l,c),s=u}}}if(Hu)throw t=hf,Hu=!1,hf=null,t}function Ve(t,e){var n=e[Tf];n===void 0&&(n=e[Tf]=new Set);var r=t+"__bubble";n.has(r)||(C0(e,t,2,!1),n.add(r))}function fh(t,e,n){var r=0;e&&(r|=4),C0(n,t,r,e)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[Yl]){t[Yl]=!0,L_.forEach(function(n){n!=="selectionchange"&&(g2.has(n)||fh(n,!1,t),fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yl]||(e[Yl]=!0,fh("selectionchange",!1,e))}}function C0(t,e,n,r){switch(d0(e)){case 1:var i=Pk;break;case 4:i=Rk;break;default:i=Vp}n=i.bind(null,e,n,t),i=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Li(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}X_(function(){var c=s,f=Np(n),p=[];e:{var g=k0.get(t);if(g!==void 0){var S=Fp,x=t;switch(t){case"keypress":if(vu(n)===0)break e;case"keydown":case"keyup":S=qk;break;case"focusin":x="focus",S=ah;break;case"focusout":x="blur",S=ah;break;case"beforeblur":case"afterblur":S=ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ok;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Qk;break;case T0:case b0:case I0:S=Mk;break;case S0:S=Xk;break;case"scroll":S=Nk;break;case"wheel":S=Zk;break;case"copy":case"cut":case"paste":S=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=qy}var R=(e&4)!==0,P=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var w=c,A;w!==null;){A=w;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,T!==null&&(D=ba(w,T),D!=null&&R.push(Pa(w,D,A)))),P)break;w=w.return}0<R.length&&(g=new S(g,x,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==uf&&(x=n.relatedTarget||n.fromElement)&&(Li(x)||x[_r]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(x=n.relatedTarget||n.toElement,S=c,x=x?Li(x):null,x!==null&&(P=rs(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=c),S!==x)){if(R=Hy,D="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=qy,D="onPointerLeave",T="onPointerEnter",w="pointer"),P=S==null?g:Ss(S),A=x==null?g:Ss(x),g=new R(D,w+"leave",S,n,f),g.target=P,g.relatedTarget=A,D=null,Li(f)===c&&(R=new R(T,w+"enter",x,n,f),R.target=A,R.relatedTarget=P,D=R),P=D,S&&x)t:{for(R=S,T=x,w=0,A=R;A;A=fs(A))w++;for(A=0,D=T;D;D=fs(D))A++;for(;0<w-A;)R=fs(R),w--;for(;0<A-w;)T=fs(T),A--;for(;w--;){if(R===T||T!==null&&R===T.alternate)break t;R=fs(R),T=fs(T)}R=null}else R=null;S!==null&&rv(p,g,S,R,!1),x!==null&&P!==null&&rv(p,P,x,R,!0)}}e:{if(g=c?Ss(c):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var M=o2;else if(Qy(g))if(y0)M=c2;else{M=l2;var j=a2}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=u2);if(M&&(M=M(t,c))){g0(p,M,n,f);break e}j&&j(t,g,c),t==="focusout"&&(j=g._wrapperState)&&j.controlled&&g.type==="number"&&rf(g,"number",g.value)}switch(j=c?Ss(c):window,t){case"focusin":(Qy(j)||j.contentEditable==="true")&&(bs=j,gf=c,oa=null);break;case"focusout":oa=gf=bs=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,ev(p,n,f);break;case"selectionchange":if(f2)break;case"keydown":case"keyup":ev(p,n,f)}var b;if(Bp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ts?p0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(f0&&n.locale!=="ko"&&(Ts||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ts&&(b=h0()):(Gr=f,Mp="value"in Gr?Gr.value:Gr.textContent,Ts=!0)),j=Qu(c,v),0<j.length&&(v=new Wy(v,t,null,n,f),p.push({event:v,listeners:j}),b?v.data=b:(b=m0(n),b!==null&&(v.data=b)))),(b=t2?n2(t,n):r2(t,n))&&(c=Qu(c,"onBeforeInput"),0<c.length&&(f=new Wy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=b))}A0(p,e)})}function Pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ba(t,n),s!=null&&r.unshift(Pa(t,s,i)),s=ba(t,e),s!=null&&r.push(Pa(t,s,i))),t=t.return}return r}function fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=ba(n,s),u!=null&&o.unshift(Pa(n,u,l))):i||(u=ba(n,s),u!=null&&o.push(Pa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var y2=/\r\n?/g,v2=/\u0000|\uFFFD/g;function iv(t){return(typeof t=="string"?t:""+t).replace(y2,`
`).replace(v2,"")}function Xl(t,e,n){if(e=iv(e),iv(t)!==e&&n)throw Error($(425))}function Yu(){}var vf=null,wf=null;function _f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ef=typeof setTimeout=="function"?setTimeout:void 0,w2=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,_2=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(t){return sv.resolve(null).then(t).catch(E2)}:Ef;function E2(t){setTimeout(function(){throw t})}function mh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+fo,Ra="__reactProps$"+fo,_r="__reactContainer$"+fo,Tf="__reactEvents$"+fo,T2="__reactListeners$"+fo,b2="__reactHandles$"+fo;function Li(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ov(t);t!==null;){if(n=t[Wn])return n;t=ov(t)}return e}t=n,n=t.parentNode}return null}function Ja(t){return t=t[Wn]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Qc(t){return t[Ra]||null}var bf=[],ks=-1;function _i(t){return{current:t}}function Fe(t){0>ks||(t.current=bf[ks],bf[ks]=null,ks--)}function De(t,e){ks++,bf[ks]=t.current,t.current=e}var pi={},Ot=_i(pi),en=_i(!1),Wi=pi;function Gs(t,e){var n=t.type.contextTypes;if(!n)return pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tn(t){return t=t.childContextTypes,t!=null}function Xu(){Fe(en),Fe(Ot)}function av(t,e,n){if(Ot.current!==pi)throw Error($(168));De(Ot,e),De(en,n)}function x0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,ak(t)||"Unknown",i));return He({},n,r)}function Ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,Wi=Ot.current,De(Ot,t),De(en,en.current),!0}function lv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=x0(t,e,Wi),r.__reactInternalMemoizedMergedChildContext=t,Fe(en),Fe(Ot),De(Ot,t)):Fe(en),De(en,n)}var lr=null,Yc=!1,gh=!1;function P0(t){lr===null?lr=[t]:lr.push(t)}function I2(t){Yc=!0,P0(t)}function Ei(){if(!gh&&lr!==null){gh=!0;var t=0,e=Ae;try{var n=lr;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lr=null,Yc=!1}catch(i){throw lr!==null&&(lr=lr.slice(t+1)),t0(Dp,Ei),i}finally{Ae=e,gh=!1}}return null}var As=[],Cs=0,Zu=null,ec=0,Tn=[],bn=0,qi=null,cr=1,dr="";function Ri(t,e){As[Cs++]=ec,As[Cs++]=Zu,Zu=t,ec=e}function R0(t,e,n){Tn[bn++]=cr,Tn[bn++]=dr,Tn[bn++]=qi,qi=t;var r=cr;t=dr;var i=32-Vn(r)-1;r&=~(1<<i),n+=1;var s=32-Vn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cr=1<<32-Vn(e)+i|n<<i|r,dr=s+t}else cr=1<<s|n<<i|r,dr=t}function $p(t){t.return!==null&&(Ri(t,1),R0(t,1,0))}function zp(t){for(;t===Zu;)Zu=As[--Cs],As[Cs]=null,ec=As[--Cs],As[Cs]=null;for(;t===qi;)qi=Tn[--bn],Tn[bn]=null,dr=Tn[--bn],Tn[bn]=null,cr=Tn[--bn],Tn[bn]=null}var hn=null,un=null,Be=!1,Ln=null;function N0(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hn=t,un=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:cr,overflow:dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hn=t,un=null,!0):!1;default:return!1}}function If(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(Be){var e=un;if(e){var n=e;if(!uv(t,e)){if(If(t))throw Error($(418));e=ni(n.nextSibling);var r=hn;e&&uv(t,e)?N0(r,n):(t.flags=t.flags&-4097|2,Be=!1,hn=t)}}else{if(If(t))throw Error($(418));t.flags=t.flags&-4097|2,Be=!1,hn=t}}}function cv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Jl(t){if(t!==hn)return!1;if(!Be)return cv(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_f(t.type,t.memoizedProps)),e&&(e=un)){if(If(t))throw D0(),Error($(418));for(;e;)N0(t,e),e=ni(e.nextSibling)}if(cv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=hn?ni(t.stateNode.nextSibling):null;return!0}function D0(){for(var t=un;t;)t=ni(t.nextSibling)}function Ks(){un=hn=null,Be=!1}function Hp(t){Ln===null?Ln=[t]:Ln.push(t)}var S2=xr.ReactCurrentBatchConfig;function Uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Zl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dv(t){var e=t._init;return e(t._payload)}function O0(t){function e(T,w){if(t){var A=T.deletions;A===null?(T.deletions=[w],T.flags|=16):A.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function i(T,w){return T=oi(T,w),T.index=0,T.sibling=null,T}function s(T,w,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<w?(T.flags|=2,w):A):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,w,A,D){return w===null||w.tag!==6?(w=bh(A,T.mode,D),w.return=T,w):(w=i(w,A),w.return=T,w)}function u(T,w,A,D){var M=A.type;return M===Es?f(T,w,A.props.children,D,A.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mr&&dv(M)===w.type)?(D=i(w,A.props),D.ref=Uo(T,w,A),D.return=T,D):(D=Su(A.type,A.key,A.props,null,T.mode,D),D.ref=Uo(T,w,A),D.return=T,D)}function c(T,w,A,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Ih(A,T.mode,D),w.return=T,w):(w=i(w,A.children||[]),w.return=T,w)}function f(T,w,A,D,M){return w===null||w.tag!==7?(w=$i(A,T.mode,D,M),w.return=T,w):(w=i(w,A),w.return=T,w)}function p(T,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=bh(""+w,T.mode,A),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $l:return A=Su(w.type,w.key,w.props,null,T.mode,A),A.ref=Uo(T,null,w),A.return=T,A;case _s:return w=Ih(w,T.mode,A),w.return=T,w;case Mr:var D=w._init;return p(T,D(w._payload),A)}if(qo(w)||Vo(w))return w=$i(w,T.mode,A,null),w.return=T,w;Zl(T,w)}return null}function g(T,w,A,D){var M=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(T,w,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case $l:return A.key===M?u(T,w,A,D):null;case _s:return A.key===M?c(T,w,A,D):null;case Mr:return M=A._init,g(T,w,M(A._payload),D)}if(qo(A)||Vo(A))return M!==null?null:f(T,w,A,D,null);Zl(T,A)}return null}function S(T,w,A,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return T=T.get(A)||null,l(w,T,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $l:return T=T.get(D.key===null?A:D.key)||null,u(w,T,D,M);case _s:return T=T.get(D.key===null?A:D.key)||null,c(w,T,D,M);case Mr:var j=D._init;return S(T,w,A,j(D._payload),M)}if(qo(D)||Vo(D))return T=T.get(A)||null,f(w,T,D,M,null);Zl(w,D)}return null}function x(T,w,A,D){for(var M=null,j=null,b=w,v=w=0,_=null;b!==null&&v<A.length;v++){b.index>v?(_=b,b=null):_=b.sibling;var k=g(T,b,A[v],D);if(k===null){b===null&&(b=_);break}t&&b&&k.alternate===null&&e(T,b),w=s(k,w,v),j===null?M=k:j.sibling=k,j=k,b=_}if(v===A.length)return n(T,b),Be&&Ri(T,v),M;if(b===null){for(;v<A.length;v++)b=p(T,A[v],D),b!==null&&(w=s(b,w,v),j===null?M=b:j.sibling=b,j=b);return Be&&Ri(T,v),M}for(b=r(T,b);v<A.length;v++)_=S(b,T,v,A[v],D),_!==null&&(t&&_.alternate!==null&&b.delete(_.key===null?v:_.key),w=s(_,w,v),j===null?M=_:j.sibling=_,j=_);return t&&b.forEach(function(I){return e(T,I)}),Be&&Ri(T,v),M}function R(T,w,A,D){var M=Vo(A);if(typeof M!="function")throw Error($(150));if(A=M.call(A),A==null)throw Error($(151));for(var j=M=null,b=w,v=w=0,_=null,k=A.next();b!==null&&!k.done;v++,k=A.next()){b.index>v?(_=b,b=null):_=b.sibling;var I=g(T,b,k.value,D);if(I===null){b===null&&(b=_);break}t&&b&&I.alternate===null&&e(T,b),w=s(I,w,v),j===null?M=I:j.sibling=I,j=I,b=_}if(k.done)return n(T,b),Be&&Ri(T,v),M;if(b===null){for(;!k.done;v++,k=A.next())k=p(T,k.value,D),k!==null&&(w=s(k,w,v),j===null?M=k:j.sibling=k,j=k);return Be&&Ri(T,v),M}for(b=r(T,b);!k.done;v++,k=A.next())k=S(b,T,v,k.value,D),k!==null&&(t&&k.alternate!==null&&b.delete(k.key===null?v:k.key),w=s(k,w,v),j===null?M=k:j.sibling=k,j=k);return t&&b.forEach(function(C){return e(T,C)}),Be&&Ri(T,v),M}function P(T,w,A,D){if(typeof A=="object"&&A!==null&&A.type===Es&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case $l:e:{for(var M=A.key,j=w;j!==null;){if(j.key===M){if(M=A.type,M===Es){if(j.tag===7){n(T,j.sibling),w=i(j,A.props.children),w.return=T,T=w;break e}}else if(j.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mr&&dv(M)===j.type){n(T,j.sibling),w=i(j,A.props),w.ref=Uo(T,j,A),w.return=T,T=w;break e}n(T,j);break}else e(T,j);j=j.sibling}A.type===Es?(w=$i(A.props.children,T.mode,D,A.key),w.return=T,T=w):(D=Su(A.type,A.key,A.props,null,T.mode,D),D.ref=Uo(T,w,A),D.return=T,T=D)}return o(T);case _s:e:{for(j=A.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(T,w.sibling),w=i(w,A.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=Ih(A,T.mode,D),w.return=T,T=w}return o(T);case Mr:return j=A._init,P(T,w,j(A._payload),D)}if(qo(A))return x(T,w,A,D);if(Vo(A))return R(T,w,A,D);Zl(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(T,w.sibling),w=i(w,A),w.return=T,T=w):(n(T,w),w=bh(A,T.mode,D),w.return=T,T=w),o(T)):n(T,w)}return P}var Qs=O0(!0),L0=O0(!1),tc=_i(null),nc=null,xs=null,Wp=null;function qp(){Wp=xs=nc=null}function Gp(t){var e=tc.current;Fe(tc),t._currentValue=e}function kf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ms(t,e){nc=t,Wp=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(Wp!==t)if(t={context:t,memoizedValue:e,next:null},xs===null){if(nc===null)throw Error($(308));xs=t,nc.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return e}var Vi=null;function Kp(t){Vi===null?Vi=[t]:Vi.push(t)}function V0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Kp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Er(t,r)}function Er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function Qp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Er(t,n)}return i=r.interleaved,i===null?(e.next=e,Kp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Er(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Op(t,n)}}function hv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rc(t,e,n,r){var i=t.updateQueue;Fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,R=l;switch(g=e,S=n,R.tag){case 1:if(x=R.payload,typeof x=="function"){p=x.call(S,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=R.payload,g=typeof x=="function"?x.call(S,p,g):x,g==null)break e;p=He({},p,g);break e;case 2:Fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,u=p):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=p}}function fv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Za={},Qn=_i(Za),Na=_i(Za),Da=_i(Za);function Mi(t){if(t===Za)throw Error($(174));return t}function Yp(t,e){switch(De(Da,e),De(Na,t),De(Qn,Za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=of(e,t)}Fe(Qn),De(Qn,e)}function Ys(){Fe(Qn),Fe(Na),Fe(Da)}function F0(t){Mi(Da.current);var e=Mi(Qn.current),n=of(e,t.type);e!==n&&(De(Na,t),De(Qn,n))}function Xp(t){Na.current===t&&(Fe(Qn),Fe(Na))}var $e=_i(0);function ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function Jp(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var _u=xr.ReactCurrentDispatcher,vh=xr.ReactCurrentBatchConfig,Gi=0,ze=null,ot=null,ht=null,sc=!1,aa=!1,Oa=0,k2=0;function At(){throw Error($(321))}function Zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function em(t,e,n,r,i,s){if(Gi=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_u.current=t===null||t.memoizedState===null?P2:R2,t=n(r,i),aa){s=0;do{if(aa=!1,Oa=0,25<=s)throw Error($(301));s+=1,ht=ot=null,e.updateQueue=null,_u.current=N2,t=n(r,i)}while(aa)}if(_u.current=oc,e=ot!==null&&ot.next!==null,Gi=0,ht=ot=ze=null,sc=!1,e)throw Error($(300));return t}function tm(){var t=Oa!==0;return Oa=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ze.memoizedState=ht=t:ht=ht.next=t,ht}function An(){if(ot===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?ze.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error($(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?ze.memoizedState=ht=t:ht=ht.next=t}return ht}function La(t,e){return typeof e=="function"?e(t):e}function wh(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((Gi&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ze.lanes|=f,Ki|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,jn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,Ki|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _h(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function j0(){}function B0(t,e){var n=ze,r=An(),i=e(),s=!jn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,nm(z0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,Va(9,$0.bind(null,n,r,i,e),void 0,null),ft===null)throw Error($(349));Gi&30||U0(n,e,i)}return i}function U0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $0(t,e,n,r){e.value=n,e.getSnapshot=r,H0(e)&&W0(t)}function z0(t,e,n){return n(function(){H0(e)&&W0(t)})}function H0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function W0(t){var e=Er(t,1);e!==null&&Mn(e,t,1,-1)}function pv(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=x2.bind(null,ze,t),[e.memoizedState,t]}function Va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q0(){return An().memoizedState}function Eu(t,e,n,r){var i=zn();ze.flags|=t,i.memoizedState=Va(1|e,n,void 0,r===void 0?null:r)}function Xc(t,e,n,r){var i=An();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&Zp(r,o.deps)){i.memoizedState=Va(e,n,s,r);return}}ze.flags|=t,i.memoizedState=Va(1|e,n,s,r)}function mv(t,e){return Eu(8390656,8,t,e)}function nm(t,e){return Xc(2048,8,t,e)}function G0(t,e){return Xc(4,2,t,e)}function K0(t,e){return Xc(4,4,t,e)}function Q0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y0(t,e,n){return n=n!=null?n.concat([t]):null,Xc(4,4,Q0.bind(null,e,t),n)}function rm(){}function X0(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function J0(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Z0(t,e,n){return Gi&21?(jn(n,e)||(n=i0(),ze.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function A2(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=vh.transition;vh.transition={};try{t(!1),e()}finally{Ae=n,vh.transition=r}}function eE(){return An().memoizedState}function C2(t,e,n){var r=si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tE(t))nE(e,n);else if(n=V0(t,e,n,r),n!==null){var i=$t();Mn(n,t,r,i),rE(n,e,r)}}function x2(t,e,n){var r=si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tE(t))nE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,jn(l,o)){var u=e.interleaved;u===null?(i.next=i,Kp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=V0(t,e,i,r),n!==null&&(i=$t(),Mn(n,t,r,i),rE(n,e,r))}}function tE(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function nE(t,e){aa=sc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Op(t,n)}}var oc={readContext:kn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},P2={readContext:kn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:mv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Eu(4194308,4,Q0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eu(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C2.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:pv,useDebugValue:rm,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=pv(!1),e=t[0];return t=A2.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=zn();if(Be){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ft===null)throw Error($(349));Gi&30||U0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mv(z0.bind(null,r,s,t),[t]),r.flags|=2048,Va(9,$0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=ft.identifierPrefix;if(Be){var n=dr,r=cr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R2={readContext:kn,useCallback:X0,useContext:kn,useEffect:nm,useImperativeHandle:Y0,useInsertionEffect:G0,useLayoutEffect:K0,useMemo:J0,useReducer:wh,useRef:q0,useState:function(){return wh(La)},useDebugValue:rm,useDeferredValue:function(t){var e=An();return Z0(e,ot.memoizedState,t)},useTransition:function(){var t=wh(La)[0],e=An().memoizedState;return[t,e]},useMutableSource:j0,useSyncExternalStore:B0,useId:eE,unstable_isNewReconciler:!1},N2={readContext:kn,useCallback:X0,useContext:kn,useEffect:nm,useImperativeHandle:Y0,useInsertionEffect:G0,useLayoutEffect:K0,useMemo:J0,useReducer:_h,useRef:q0,useState:function(){return _h(La)},useDebugValue:rm,useDeferredValue:function(t){var e=An();return ot===null?e.memoizedState=t:Z0(e,ot.memoizedState,t)},useTransition:function(){var t=_h(La)[0],e=An().memoizedState;return[t,e]},useMutableSource:j0,useSyncExternalStore:B0,useId:eE,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=si(t),s=mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ri(t,s,i),e!==null&&(Mn(e,t,i,r),wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=si(t),s=mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ri(t,s,i),e!==null&&(Mn(e,t,i,r),wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=si(t),i=mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ri(t,i,r),e!==null&&(Mn(e,t,r,n),wu(e,t,r))}};function gv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,s):!0}function iE(t,e,n){var r=!1,i=pi,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(i=tn(e)?Wi:Ot.current,r=e.contextTypes,s=(r=r!=null)?Gs(t,i):pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function Cf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Qp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kn(s):(s=tn(e)?Wi:Ot.current,i.context=Gs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Af(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jc.enqueueReplaceState(i,i.state,null),rc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xs(t,e){try{var n="",r=e;do n+=ok(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var D2=typeof WeakMap=="function"?WeakMap:Map;function sE(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lc||(lc=!0,jf=r),xf(t,e)},n}function oE(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){xf(t,e),typeof r!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new D2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=G2.bind(null,t,e,n),e.then(t,t))}function wv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _v(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var O2=xr.ReactCurrentOwner,Zt=!1;function Bt(t,e,n,r){e.child=t===null?L0(e,null,n,r):Qs(e,t.child,n,r)}function Ev(t,e,n,r,i){n=n.render;var s=e.ref;return Ms(e,i),r=em(t,e,n,r,s,i),n=tm(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tr(t,e,i)):(Be&&n&&$p(e),e.flags|=1,Bt(t,e,r,i),e.child)}function Tv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aE(t,e,s,r,i)):(t=Su(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return Tr(t,e,i)}return e.flags|=1,t=oi(s,r),t.ref=e.ref,t.return=e,e.child=t}function aE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ca(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Tr(t,e,i)}return Pf(t,e,n,r,i)}function lE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Rs,ln),ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Rs,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(Rs,ln),ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(Rs,ln),ln|=r;return Bt(t,e,i,n),e.child}function uE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pf(t,e,n,r,i){var s=tn(n)?Wi:Ot.current;return s=Gs(e,s),Ms(e,i),n=em(t,e,n,r,s,i),r=tm(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tr(t,e,i)):(Be&&r&&$p(e),e.flags|=1,Bt(t,e,n,i),e.child)}function bv(t,e,n,r,i){if(tn(n)){var s=!0;Ju(e)}else s=!1;if(Ms(e,i),e.stateNode===null)Tu(t,e),iE(e,n,r),Cf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=tn(n)?Wi:Ot.current,c=Gs(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&yv(e,o,r,c),Fr=!1;var g=e.memoizedState;o.state=g,rc(e,r,o,i),u=e.memoizedState,l!==r||g!==u||en.current||Fr?(typeof f=="function"&&(Af(e,n,f,r),u=e.memoizedState),(l=Fr||gv(e,n,l,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,M0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Nn(e.type,l),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=kn(u):(u=tn(n)?Wi:Ot.current,u=Gs(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&yv(e,o,r,u),Fr=!1,g=e.memoizedState,o.state=g,rc(e,r,o,i);var x=e.memoizedState;l!==p||g!==x||en.current||Fr?(typeof S=="function"&&(Af(e,n,S,r),x=e.memoizedState),(c=Fr||gv(e,n,c,r,g,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Rf(t,e,n,r,s,i)}function Rf(t,e,n,r,i,s){uE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lv(e,n,!1),Tr(t,e,s);r=e.stateNode,O2.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qs(e,t.child,null,s),e.child=Qs(e,null,l,s)):Bt(t,e,l,s),e.memoizedState=r.state,i&&lv(e,n,!0),e.child}function cE(t){var e=t.stateNode;e.pendingContext?av(t,e.pendingContext,e.pendingContext!==e.context):e.context&&av(t,e.context,!1),Yp(t,e.containerInfo)}function Iv(t,e,n,r,i){return Ks(),Hp(i),e.flags|=256,Bt(t,e,n,r),e.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Df(t){return{baseLanes:t,cachePool:null,transitions:null}}function dE(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De($e,i&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=td(o,r,0,null),t=$i(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Df(n),e.memoizedState=Nf,t):im(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return L2(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=oi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=oi(l,s):(s=$i(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Df(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Nf,r}return s=t.child,t=s.sibling,r=oi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function im(t,e){return e=td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,r){return r!==null&&Hp(r),Qs(e,t.child,null,n),t=im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Eh(Error($(422))),eu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=td({mode:"visible",children:r.children},i,0,null),s=$i(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qs(e,t.child,null,o),e.child.memoizedState=Df(o),e.memoizedState=Nf,s);if(!(e.mode&1))return eu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=Eh(s,r,void 0),eu(t,e,o,r)}if(l=(o&t.childLanes)!==0,Zt||l){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Er(t,i),Mn(r,t,i,-1))}return cm(),r=Eh(Error($(421))),eu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=K2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,un=ni(i.nextSibling),hn=e,Be=!0,Ln=null,t!==null&&(Tn[bn++]=cr,Tn[bn++]=dr,Tn[bn++]=qi,cr=t.id,dr=t.overflow,qi=e),e=im(e,r.children),e.flags|=4096,e)}function Sv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kf(t.return,e,n)}function Th(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function hE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,n,e);else if(t.tag===19)Sv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ic(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Th(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ic(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Th(e,!0,n,null,s);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function V2(t,e,n){switch(e.tag){case 3:cE(e),Ks();break;case 5:F0(e);break;case 1:tn(e.type)&&Ju(e);break;case 4:Yp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(tc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?dE(t,e,n):(De($e,$e.current&1),t=Tr(t,e,n),t!==null?t.sibling:null);De($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,lE(t,e,n)}return Tr(t,e,n)}var fE,Of,pE,mE;fE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Of=function(){};pE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Qn.current);var s=null;switch(n){case"input":i=tf(t,i),r=tf(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=sf(t,i),r=sf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yu)}af(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ea.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ve("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};mE=function(t,e,n,r){n!==r&&(e.flags|=4)};function $o(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M2(t,e,n){var r=e.pendingProps;switch(zp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return tn(e.type)&&Xu(),Ct(e),null;case 3:return r=e.stateNode,Ys(),Fe(en),Fe(Ot),Jp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&($f(Ln),Ln=null))),Of(t,e),Ct(e),null;case 5:Xp(e);var i=Mi(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)pE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Ct(e),null}if(t=Mi(Qn.current),Jl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[Ra]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Ko.length;i++)Ve(Ko[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Oy(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":Vy(r,s),Ve("invalid",r)}af(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xl(r.textContent,l,t),i=["children",""+l]):Ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":zl(r),Ly(r,s,!0);break;case"textarea":zl(r),My(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[Ra]=r,fE(t,e,!1,!1),e.stateNode=t;e:{switch(o=lf(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ko.length;i++)Ve(Ko[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":Oy(t,r),i=tf(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Vy(t,r),i=sf(t,r),Ve("invalid",t);break;default:i=r}af(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?q_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ta(t,u):typeof u=="number"&&Ta(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ea.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ve("scroll",t):u!=null&&Cp(t,s,u,o))}switch(n){case"input":zl(t),Ly(t,r,!1);break;case"textarea":zl(t),My(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ds(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ds(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)mE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Mi(Da.current),Mi(Qn.current),Jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==n)&&(t=hn,t!==null))switch(t.tag){case 3:Xl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Fe($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&un!==null&&e.mode&1&&!(e.flags&128))D0(),Ks(),e.flags|=98560,s=!1;else if(s=Jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Wn]=e}else Ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else Ln!==null&&($f(Ln),Ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?at===0&&(at=3):cm())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Ys(),Of(t,e),t===null&&xa(e.stateNode.containerInfo),Ct(e),null;case 10:return Gp(e.type._context),Ct(e),null;case 17:return tn(e.type)&&Xu(),Ct(e),null;case 19:if(Fe($e),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$o(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ic(t),o!==null){for(e.flags|=128,$o(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>Js&&(e.flags|=128,r=!0,$o(s,!1),e.lanes=4194304)}else{if(!r)if(t=ic(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return Ct(e),null}else 2*Je()-s.renderingStartTime>Js&&n!==1073741824&&(e.flags|=128,r=!0,$o(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=$e.current,De($e,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function F2(t,e){switch(zp(e),e.tag){case 1:return tn(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ys(),Fe(en),Fe(Ot),Jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xp(e),null;case 13:if(Fe($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe($e),null;case 4:return Ys(),null;case 10:return Gp(e.type._context),null;case 22:case 23:return um(),null;case 24:return null;default:return null}}var tu=!1,Nt=!1,j2=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function Lf(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var kv=!1;function B2(t,e){if(vf=Gu,t=_0(),Up(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,p=t,g=null;t:for(;;){for(var S;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(S=p.firstChild)!==null;)g=p,p=S;for(;;){if(p===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(S=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wf={focusedElem:t,selectionRange:n},Gu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var R=x.memoizedProps,P=x.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Nn(e.type,R),P);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){Ke(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return x=kv,kv=!1,x}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lf(e,n,s)}i=i.next}while(i!==r)}}function Zc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gE(t){var e=t.alternate;e!==null&&(t.alternate=null,gE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Ra],delete e[Tf],delete e[T2],delete e[b2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yE(t){return t.tag===5||t.tag===3||t.tag===4}function Av(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yu));else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}function Ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ff(t,e,n),t=t.sibling;t!==null;)Ff(t,e,n),t=t.sibling}var yt=null,Dn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)vE(t,e,n),n=n.sibling}function vE(t,e,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Wc,n)}catch{}switch(n.tag){case 5:Nt||Ps(n,e);case 6:var r=yt,i=Dn;yt=null,Lr(t,e,n),yt=r,Dn=i,yt!==null&&(Dn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Dn?(t=yt,n=n.stateNode,t.nodeType===8?mh(t.parentNode,n):t.nodeType===1&&mh(t,n),ka(t)):mh(yt,n.stateNode));break;case 4:r=yt,i=Dn,yt=n.stateNode.containerInfo,Dn=!0,Lr(t,e,n),yt=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lf(n,e,o),i=i.next}while(i!==r)}Lr(t,e,n);break;case 1:if(!Nt&&(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ke(n,e,l)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Lr(t,e,n),Nt=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function Cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new j2),e.forEach(function(r){var i=Q2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,Dn=!1;break e;case 3:yt=l.stateNode.containerInfo,Dn=!0;break e;case 4:yt=l.stateNode.containerInfo,Dn=!0;break e}l=l.return}if(yt===null)throw Error($(160));vE(s,o,i),yt=null,Dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ke(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wE(e,t),e=e.sibling}function wE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),$n(t),r&4){try{la(3,t,t.return),Zc(3,t)}catch(R){Ke(t,t.return,R)}try{la(5,t,t.return)}catch(R){Ke(t,t.return,R)}}break;case 1:Pn(e,t),$n(t),r&512&&n!==null&&Ps(n,n.return);break;case 5:if(Pn(e,t),$n(t),r&512&&n!==null&&Ps(n,n.return),t.flags&32){var i=t.stateNode;try{Ta(i,"")}catch(R){Ke(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&U_(i,s),lf(l,o);var c=lf(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?q_(i,p):f==="dangerouslySetInnerHTML"?H_(i,p):f==="children"?Ta(i,p):Cp(i,f,p,c)}switch(l){case"input":nf(i,s);break;case"textarea":$_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?Ds(i,!!s.multiple,S,!1):g!==!!s.multiple&&(s.defaultValue!=null?Ds(i,!!s.multiple,s.defaultValue,!0):Ds(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ra]=s}catch(R){Ke(t,t.return,R)}}break;case 6:if(Pn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Ke(t,t.return,R)}}break;case 3:if(Pn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(R){Ke(t,t.return,R)}break;case 4:Pn(e,t),$n(t);break;case 13:Pn(e,t),$n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(am=Je())),r&4&&Cv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||f,Pn(e,t),Nt=c):Pn(e,t),$n(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(p=G=f;G!==null;){switch(g=G,S=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:Ps(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(R){Ke(r,n,R)}}break;case 5:Ps(g,g.return);break;case 22:if(g.memoizedState!==null){Pv(p);continue}}S!==null?(S.return=g,G=S):Pv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=W_("display",o))}catch(R){Ke(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(R){Ke(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Pn(e,t),$n(t),r&4&&Cv(t);break;case 21:break;default:Pn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ta(i,""),r.flags&=-33);var s=Av(t);Ff(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Av(t);Mf(t,l,o);break;default:throw Error($(161))}}catch(u){Ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function U2(t,e,n){G=t,_E(t)}function _E(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Nt;l=tu;var c=Nt;if(tu=o,(Nt=u)&&!c)for(G=i;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Rv(i):u!==null?(u.return=o,G=u):Rv(i);for(;s!==null;)G=s,_E(s),s=s.sibling;G=i,tu=l,Nt=c}xv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):xv(t)}}function xv(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Zc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fv(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ka(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Nt||e.flags&512&&Vf(e)}catch(g){Ke(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Pv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Rv(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zc(4,e)}catch(u){Ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ke(e,i,u)}}var s=e.return;try{Vf(e)}catch(u){Ke(e,s,u)}break;case 5:var o=e.return;try{Vf(e)}catch(u){Ke(e,o,u)}}}catch(u){Ke(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var $2=Math.ceil,ac=xr.ReactCurrentDispatcher,sm=xr.ReactCurrentOwner,Sn=xr.ReactCurrentBatchConfig,Ee=0,ft=null,it=null,_t=0,ln=0,Rs=_i(0),at=0,Ma=null,Ki=0,ed=0,om=0,ua=null,Yt=null,am=0,Js=1/0,ar=null,lc=!1,jf=null,ii=null,nu=!1,Kr=null,uc=0,ca=0,Bf=null,bu=-1,Iu=0;function $t(){return Ee&6?Je():bu!==-1?bu:bu=Je()}function si(t){return t.mode&1?Ee&2&&_t!==0?_t&-_t:S2.transition!==null?(Iu===0&&(Iu=i0()),Iu):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:d0(t.type)),t):1}function Mn(t,e,n,r){if(50<ca)throw ca=0,Bf=null,Error($(185));Ya(t,n,r),(!(Ee&2)||t!==ft)&&(t===ft&&(!(Ee&2)&&(ed|=n),at===4&&Ur(t,_t)),nn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Js=Je()+500,Yc&&Ei()))}function nn(t,e){var n=t.callbackNode;Sk(t,e);var r=qu(t,t===ft?_t:0);if(r===0)n!==null&&By(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&By(n),e===1)t.tag===0?I2(Nv.bind(null,t)):P0(Nv.bind(null,t)),_2(function(){!(Ee&6)&&Ei()}),n=null;else{switch(s0(r)){case 1:n=Dp;break;case 4:n=n0;break;case 16:n=Wu;break;case 536870912:n=r0;break;default:n=Wu}n=CE(n,EE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EE(t,e){if(bu=-1,Iu=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(Fs()&&t.callbackNode!==n)return null;var r=qu(t,t===ft?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cc(t,r);else{e=r;var i=Ee;Ee|=2;var s=bE();(ft!==t||_t!==e)&&(ar=null,Js=Je()+500,Ui(t,e));do try{W2();break}catch(l){TE(t,l)}while(!0);qp(),ac.current=s,Ee=i,it!==null?e=0:(ft=null,_t=0,e=at)}if(e!==0){if(e===2&&(i=ff(t),i!==0&&(r=i,e=Uf(t,i))),e===1)throw n=Ma,Ui(t,0),Ur(t,r),nn(t,Je()),n;if(e===6)Ur(t,r);else{if(i=t.current.alternate,!(r&30)&&!z2(i)&&(e=cc(t,r),e===2&&(s=ff(t),s!==0&&(r=s,e=Uf(t,s))),e===1))throw n=Ma,Ui(t,0),Ur(t,r),nn(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ni(t,Yt,ar);break;case 3:if(Ur(t,r),(r&130023424)===r&&(e=am+500-Je(),10<e)){if(qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ef(Ni.bind(null,t,Yt,ar),e);break}Ni(t,Yt,ar);break;case 4:if(Ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$2(r/1960))-r,10<r){t.timeoutHandle=Ef(Ni.bind(null,t,Yt,ar),r);break}Ni(t,Yt,ar);break;case 5:Ni(t,Yt,ar);break;default:throw Error($(329))}}}return nn(t,Je()),t.callbackNode===n?EE.bind(null,t):null}function Uf(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=cc(t,e),t!==2&&(e=Yt,Yt=n,e!==null&&$f(e)),t}function $f(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function z2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ur(t,e){for(e&=~om,e&=~ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function Nv(t){if(Ee&6)throw Error($(327));Fs();var e=qu(t,0);if(!(e&1))return nn(t,Je()),null;var n=cc(t,e);if(t.tag!==0&&n===2){var r=ff(t);r!==0&&(e=r,n=Uf(t,r))}if(n===1)throw n=Ma,Ui(t,0),Ur(t,e),nn(t,Je()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Yt,ar),nn(t,Je()),null}function lm(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Js=Je()+500,Yc&&Ei())}}function Qi(t){Kr!==null&&Kr.tag===0&&!(Ee&6)&&Fs();var e=Ee;Ee|=1;var n=Sn.transition,r=Ae;try{if(Sn.transition=null,Ae=1,t)return t()}finally{Ae=r,Sn.transition=n,Ee=e,!(Ee&6)&&Ei()}}function um(){ln=Rs.current,Fe(Rs)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,w2(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(zp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xu();break;case 3:Ys(),Fe(en),Fe(Ot),Jp();break;case 5:Xp(r);break;case 4:Ys();break;case 13:Fe($e);break;case 19:Fe($e);break;case 10:Gp(r.type._context);break;case 22:case 23:um()}n=n.return}if(ft=t,it=t=oi(t.current,null),_t=ln=e,at=0,Ma=null,om=ed=Ki=0,Yt=ua=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vi=null}return t}function TE(t,e){do{var n=it;try{if(qp(),_u.current=oc,sc){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sc=!1}if(Gi=0,ht=ot=ze=null,aa=!1,Oa=0,sm.current=null,n===null||n.return===null){at=1,Ma=e,it=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=_t,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=wv(o);if(S!==null){S.flags&=-257,_v(S,o,l,s,e),S.mode&1&&vv(s,c,e),e=S,u=c;var x=e.updateQueue;if(x===null){var R=new Set;R.add(u),e.updateQueue=R}else x.add(u);break e}else{if(!(e&1)){vv(s,c,e),cm();break e}u=Error($(426))}}else if(Be&&l.mode&1){var P=wv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),_v(P,o,l,s,e),Hp(Xs(u,l));break e}}s=u=Xs(u,l),at!==4&&(at=2),ua===null?ua=[s]:ua.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=sE(s,u,e);hv(s,T);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ii===null||!ii.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=oE(s,l,e);hv(s,D);break e}}s=s.return}while(s!==null)}SE(n)}catch(M){e=M,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function bE(){var t=ac.current;return ac.current=oc,t===null?oc:t}function cm(){(at===0||at===3||at===2)&&(at=4),ft===null||!(Ki&268435455)&&!(ed&268435455)||Ur(ft,_t)}function cc(t,e){var n=Ee;Ee|=2;var r=bE();(ft!==t||_t!==e)&&(ar=null,Ui(t,e));do try{H2();break}catch(i){TE(t,i)}while(!0);if(qp(),Ee=n,ac.current=r,it!==null)throw Error($(261));return ft=null,_t=0,at}function H2(){for(;it!==null;)IE(it)}function W2(){for(;it!==null&&!gk();)IE(it)}function IE(t){var e=AE(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?SE(t):it=e,sm.current=null}function SE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=F2(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,it=null;return}}else if(n=M2(n,e,ln),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);at===0&&(at=5)}function Ni(t,e,n){var r=Ae,i=Sn.transition;try{Sn.transition=null,Ae=1,q2(t,e,n,r)}finally{Sn.transition=i,Ae=r}return null}function q2(t,e,n,r){do Fs();while(Kr!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kk(t,s),t===ft&&(it=ft=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,CE(Wu,function(){return Fs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var o=Ae;Ae=1;var l=Ee;Ee|=4,sm.current=null,B2(t,n),wE(n,t),h2(wf),Gu=!!vf,wf=vf=null,t.current=n,U2(n),yk(),Ee=l,Ae=o,Sn.transition=s}else t.current=n;if(nu&&(nu=!1,Kr=t,uc=i),s=t.pendingLanes,s===0&&(ii=null),_k(n.stateNode),nn(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lc)throw lc=!1,t=jf,jf=null,t;return uc&1&&t.tag!==0&&Fs(),s=t.pendingLanes,s&1?t===Bf?ca++:(ca=0,Bf=t):ca=0,Ei(),null}function Fs(){if(Kr!==null){var t=s0(uc),e=Sn.transition,n=Ae;try{if(Sn.transition=null,Ae=16>t?16:t,Kr===null)var r=!1;else{if(t=Kr,Kr=null,uc=0,Ee&6)throw Error($(331));var i=Ee;for(Ee|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(G=c;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:la(8,f,s)}var p=f.child;if(p!==null)p.return=f,G=p;else for(;G!==null;){f=G;var g=f.sibling,S=f.return;if(gE(f),f===c){G=null;break}if(g!==null){g.return=S,G=g;break}G=S}}}var x=s.alternate;if(x!==null){var R=x.child;if(R!==null){x.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:la(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,G=T;break e}G=s.return}}var w=t.current;for(G=w;G!==null;){o=G;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,G=A;else e:for(o=w;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zc(9,l)}}catch(M){Ke(l,l.return,M)}if(l===o){G=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,G=D;break e}G=l.return}}if(Ee=i,Ei(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Wc,t)}catch{}r=!0}return r}finally{Ae=n,Sn.transition=e}}return!1}function Dv(t,e,n){e=Xs(n,e),e=sE(t,e,1),t=ri(t,e,1),e=$t(),t!==null&&(Ya(t,1,e),nn(t,e))}function Ke(t,e,n){if(t.tag===3)Dv(t,t,n);else for(;e!==null;){if(e.tag===3){Dv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ii===null||!ii.has(r))){t=Xs(n,t),t=oE(e,t,1),e=ri(e,t,1),t=$t(),e!==null&&(Ya(e,1,t),nn(e,t));break}}e=e.return}}function G2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(_t&n)===n&&(at===4||at===3&&(_t&130023424)===_t&&500>Je()-am?Ui(t,0):om|=n),nn(t,e)}function kE(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=$t();t=Er(t,e),t!==null&&(Ya(t,e,n),nn(t,n))}function K2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kE(t,n)}function Q2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),kE(t,n)}var AE;AE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,V2(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,Be&&e.flags&1048576&&R0(e,ec,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tu(t,e),t=e.pendingProps;var i=Gs(e,Ot.current);Ms(e,n),i=em(null,e,r,t,i,n);var s=tm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(s=!0,Ju(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qp(e),i.updater=Jc,e.stateNode=i,i._reactInternals=e,Cf(e,r,t,n),e=Rf(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&$p(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=X2(r),t=Nn(r,t),i){case 0:e=Pf(null,e,r,t,n);break e;case 1:e=bv(null,e,r,t,n);break e;case 11:e=Ev(null,e,r,t,n);break e;case 14:e=Tv(null,e,r,Nn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Pf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),bv(t,e,r,i,n);case 3:e:{if(cE(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,M0(t,e),rc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Xs(Error($(423)),e),e=Iv(t,e,r,n,i);break e}else if(r!==i){i=Xs(Error($(424)),e),e=Iv(t,e,r,n,i);break e}else for(un=ni(e.stateNode.containerInfo.firstChild),hn=e,Be=!0,Ln=null,n=L0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ks(),r===i){e=Tr(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return F0(e),t===null&&Sf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_f(r,i)?o=null:s!==null&&_f(r,s)&&(e.flags|=32),uE(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&Sf(e),null;case 13:return dE(t,e,n);case 4:return Yp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qs(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Ev(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(tc,r._currentValue),r._currentValue=o,s!==null)if(jn(s.value,o)){if(s.children===i.children&&!en.current){e=Tr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=mr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),kf(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),kf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ms(e,n),i=kn(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Nn(r,e.pendingProps),i=Nn(r.type,i),Tv(t,e,r,i,n);case 15:return aE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nn(r,i),Tu(t,e),e.tag=1,tn(r)?(t=!0,Ju(e)):t=!1,Ms(e,n),iE(e,r,i),Cf(e,r,i,n),Rf(null,e,r,!0,t,n);case 19:return hE(t,e,n);case 22:return lE(t,e,n)}throw Error($(156,e.tag))};function CE(t,e){return t0(t,e)}function Y2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new Y2(t,e,n,r)}function dm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X2(t){if(typeof t=="function")return dm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pp)return 11;if(t===Rp)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Su(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Es:return $i(n.children,i,s,e);case xp:o=8,i|=8;break;case Xh:return t=In(12,n,e,i|2),t.elementType=Xh,t.lanes=s,t;case Jh:return t=In(13,n,e,i),t.elementType=Jh,t.lanes=s,t;case Zh:return t=In(19,n,e,i),t.elementType=Zh,t.lanes=s,t;case F_:return td(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V_:o=10;break e;case M_:o=9;break e;case Pp:o=11;break e;case Rp:o=14;break e;case Mr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $i(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function td(t,e,n,r){return t=In(22,t,r,e),t.elementType=F_,t.lanes=n,t.stateNode={isHidden:!1},t}function bh(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function Ih(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hm(t,e,n,r,i,s,o,l,u){return t=new J2(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qp(s),t}function Z2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xE(t){if(!t)return pi;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(tn(n))return x0(t,n,e)}return e}function PE(t,e,n,r,i,s,o,l,u){return t=hm(n,r,!0,t,i,s,o,l,u),t.context=xE(null),n=t.current,r=$t(),i=si(n),s=mr(r,i),s.callback=e??null,ri(n,s,i),t.current.lanes=i,Ya(t,i,r),nn(t,r),t}function nd(t,e,n,r){var i=e.current,s=$t(),o=si(i);return n=xE(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(i,e,o),t!==null&&(Mn(t,i,o,s),wu(t,i,o)),o}function dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fm(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function eA(){return null}var RE=typeof reportError=="function"?reportError:function(t){console.error(t)};function pm(t){this._internalRoot=t}rd.prototype.render=pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));nd(t,e,null,null)};rd.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){nd(null,t,null,null)}),e[_r]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=l0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Br.length&&e!==0&&e<Br[n].priority;n++);Br.splice(n,0,t),n===0&&c0(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function tA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=dc(o);s.call(c)}}var o=PE(e,r,t,0,null,!1,!1,"",Lv);return t._reactRootContainer=o,t[_r]=o.current,xa(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=dc(u);l.call(c)}}var u=hm(t,0,!1,null,null,!1,!1,"",Lv);return t._reactRootContainer=u,t[_r]=u.current,xa(t.nodeType===8?t.parentNode:t),Qi(function(){nd(e,u,n,r)}),u}function sd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=dc(o);l.call(u)}}nd(e,o,t,i)}else o=tA(n,e,t,i,r);return dc(o)}o0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Op(e,n|1),nn(e,Je()),!(Ee&6)&&(Js=Je()+500,Ei()))}break;case 13:Qi(function(){var r=Er(t,1);if(r!==null){var i=$t();Mn(r,t,1,i)}}),fm(t,1)}};Lp=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var n=$t();Mn(e,t,134217728,n)}fm(t,134217728)}};a0=function(t){if(t.tag===13){var e=si(t),n=Er(t,e);if(n!==null){var r=$t();Mn(n,t,e,r)}fm(t,e)}};l0=function(){return Ae};u0=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};cf=function(t,e,n){switch(e){case"input":if(nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qc(r);if(!i)throw Error($(90));B_(r),nf(r,i)}}}break;case"textarea":$_(t,n);break;case"select":e=n.value,e!=null&&Ds(t,!!n.multiple,e,!1)}};Q_=lm;Y_=Qi;var nA={usingClientEntryPoint:!1,Events:[Ja,Ss,Qc,G_,K_,lm]},zo={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rA={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Z_(t),t===null?null:t.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||eA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Wc=ru.inject(rA),Kn=ru}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nA;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error($(200));return Z2(t,e,null,n)};gn.createRoot=function(t,e){if(!mm(t))throw Error($(299));var n=!1,r="",i=RE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hm(t,1,!1,null,null,n,!1,r,i),t[_r]=e.current,xa(t.nodeType===8?t.parentNode:t),new pm(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Z_(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Qi(t)};gn.hydrate=function(t,e,n){if(!id(e))throw Error($(200));return sd(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!mm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PE(e,null,t,1,n??null,i,!1,s,o),t[_r]=e.current,xa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rd(e)};gn.render=function(t,e,n){if(!id(e))throw Error($(200));return sd(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!id(t))throw Error($(40));return t._reactRootContainer?(Qi(function(){sd(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};gn.unstable_batchedUpdates=lm;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!id(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return sd(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function NE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NE)}catch(t){console.error(t)}}NE(),N_.exports=gn;var iA=N_.exports,Vv=iA;Qh.createRoot=Vv.createRoot,Qh.hydrateRoot=Vv.hydrateRoot;const sA={apiKey:"AIzaSyDMge0ZVBwCHb6tzmdIv5dD_BMrtfu_P_I",authDomain:"swim-meet-app.firebaseapp.com",projectId:"swim-meet-app",storageBucket:"swim-meet-app.firebasestorage.app",messagingSenderId:"869827349699",appId:"1:869827349699:web:26b08aeece866760cbe676"},hc={"jonny5v@gmail.com":"SUPERADMIN","admin@westgatecc.com":"WCC","admin@ponchatrainrc.com":"PRC","admin@barracudaswim.org":"BARR","admin@example.com":"KLR"},ku=["Girls 6 & Under 25m Freestyle","Boys 6 & Under 25m Freestyle","Girls 7-8 25m Freestyle","Boys 7-8 25m Freestyle","Girls 9-10 50m Freestyle","Boys 9-10 50m Freestyle","Girls 11-12 50m Freestyle","Boys 11-12 50m Freestyle","Girls 13-14 50m Freestyle","Boys 13-14 50m Freestyle","Girls 15-17 50m Freestyle","Boys 15-17 50m Freestyle","Girls 9-10 100m Freestyle","Boys 9-10 100m Freestyle","Girls 11-12 100m Freestyle","Boys 11-12 100m Freestyle","Girls 13-14 100m Freestyle","Boys 13-14 100m Freestyle","Girls 15-17 100m Freestyle","Boys 15-17 100m Freestyle","Girls 11-12 200m Freestyle","Boys 11-12 200m Freestyle","Girls 13-14 200m Freestyle","Boys 13-14 200m Freestyle","Girls 15-17 200m Freestyle","Boys 15-17 200m Freestyle","Girls 6 & Under 25m Backstroke","Boys 6 & Under 25m Backstroke","Girls 7-8 25m Backstroke","Boys 7-8 25m Backstroke","Girls 9-10 50m Backstroke","Boys 9-10 50m Backstroke","Girls 11-12 50m Backstroke","Boys 11-12 50m Backstroke","Girls 13-14 100m Backstroke","Boys 13-14 100m Backstroke","Girls 15-17 100m Backstroke","Boys 15-17 100m Backstroke","Girls 7-8 25m Breaststroke","Boys 7-8 25m Breaststroke","Girls 9-10 50m Breaststroke","Boys 9-10 50m Breaststroke","Girls 11-12 50m Breaststroke","Boys 11-12 50m Breaststroke","Girls 13-14 100m Breaststroke","Boys 13-14 100m Breaststroke","Girls 15-17 100m Breaststroke","Boys 15-17 100m Breaststroke","Girls 7-8 25m Butterfly","Boys 7-8 25m Butterfly","Girls 9-10 50m Butterfly","Boys 9-10 50m Butterfly","Girls 11-12 50m Butterfly","Boys 11-12 50m Butterfly","Girls 13-14 100m Butterfly","Boys 13-14 100m Butterfly","Girls 15-17 100m Butterfly","Boys 15-17 100m Butterfly","Girls 9-10 100m IM","Boys 9-10 100m IM","Girls 11-12 100m IM","Boys 11-12 100m IM","Girls 13-14 200m IM","Boys 13-14 200m IM","Girls 15-17 200m IM","Boys 15-17 200m IM"],xe=({name:t,type:e="fas",...n})=>m.jsx("i",{className:`${e} fa-${t}`,"aria-hidden":"true",...n});function oA({show:t,message:e,type:n}){const r="fixed left-1/2 -translate-x-1/2 z-50 p-4 rounded-md shadow-lg transition-all duration-300",i={info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},s=t?"opacity-100 top-16":"opacity-0 top-5 pointer-events-none";return m.jsx("div",{className:`${r} ${i[n]||i.info} ${s}`,role:"alert",children:e})}const aA="modulepreload",lA=function(t){return"/swim-meet-app/"+t},Mv={},uA=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=lA(u),u in Mv)return;Mv[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":aA,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((g,S)=>{p.addEventListener("load",g),p.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function cA(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let l,u;const c=async(p=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await uA(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/swim-meet-app/sw.js",{scope:"/swim-meet-app/",type:"classic"})).catch(p=>{o==null||o(p)}),!l)return;l.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),l.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),l.register({immediate:e}).then(p=>{s?s("/swim-meet-app/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return u=f(),c}function dA(){return W.useEffect(()=>{const t=cA({onNeedRefresh(){confirm("New content is available, do you want to reload?")&&t(!0)},onOfflineReady(){console.log("App is ready to work offline")}})},[]),null}function DE({event:t,favorites:e,currentEvent:n,toggleFavorite:r}){const i=(t.heats||[]).some(l=>l.lanes.some(u=>e.has(u.id))),s=n.isTracking&&t.eventNumber===n.eventNumber,o=["bg-surface-light dark:bg-surface-dark rounded-lg mb-3 border border-border-light dark:border-border-dark overflow-hidden transition-all",i?"border-l-4 border-l-secondary":"",s?"border-2 border-primary dark:border-primary-light scale-[1.02]":""].join(" ");return m.jsxs("div",{className:o,children:[m.jsxs("div",{className:"p-4 border-b border-border-light dark:border-border-dark font-bold",children:["Event ",t.eventNumber,": ",t.name]}),m.jsx("div",{className:"p-4 space-y-4",children:t.heats&&t.heats.length>0?t.heats.map(l=>m.jsxs("div",{className:`p-3 rounded-lg ${s&&l.heatNumber===n.heatNumber?"bg-primary/10 dark:bg-primary/20":""}`,children:[m.jsxs("h6",{className:"mb-2 font-semibold text-gray-600 dark:text-gray-400",children:["Heat ",l.heatNumber]}),m.jsx("ul",{className:"divide-y divide-border-light dark:divide-border-dark -m-3",children:l.lanes.map(u=>m.jsxs("li",{className:"p-3 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("strong",{className:"font-semibold",children:["Lane ",u.lane,":"]})," ",`${u.firstName} ${u.lastName}`," ",m.jsxs("span",{className:"text-gray-500",children:["(",u.team,")"]})]}),m.jsx("button",{className:"p-2 -m-2",onClick:()=>r(u.id),"aria-label":`Toggle favorite for ${u.firstName} ${u.lastName}`,children:m.jsx("div",{className:`${e.has(u.id)?"text-secondary":"text-gray-400 dark:text-gray-500"}`,children:m.jsx(xe,{name:"star",type:e.has(u.id)?"fas":"far"})})})]},u.id))})]},l.heatNumber)):m.jsx("p",{className:"text-center text-gray-500",children:"No heats or swimmers for this event yet."})})]})}function Fv({events:t,favorites:e,currentEvent:n,toggleFavorite:r,adminRole:i,updateMeetStatus:s}){if(!t||t.length===0)return m.jsx("p",{className:"text-center text-gray-500",children:"No events found for this meet."});const o=()=>{const c=Math.min(t.length,n.eventNumber+1);s({eventNumber:c,heatNumber:1})},l=()=>{const c=Math.max(1,n.eventNumber-1);s({eventNumber:c,heatNumber:1})},u=()=>{s({isTracking:!n.isTracking})};return m.jsxs("div",{children:[i&&m.jsxs("div",{className:"sticky top-0 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-sm z-10 p-2 rounded-lg border border-border-light dark:border-border-dark mb-4 flex items-center justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:l,className:"p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600","aria-label":"Previous Event",children:m.jsx(xe,{name:"backward-step"})}),m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"font-semibold text-sm",children:["Event ",n.eventNumber]})}),m.jsx("button",{onClick:o,className:"p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600","aria-label":"Next Event",children:m.jsx(xe,{name:"forward-step"})})]}),m.jsx("button",{onClick:u,className:`py-2 px-3 rounded-md font-semibold text-xs flex-shrink-0 ${n.isTracking?"bg-yellow-500 text-black":"bg-blue-600 text-white"}`,children:n.isTracking?"Stop Tracking":"Start Tracking"})]}),n.isTracking&&!i&&m.jsxs("div",{className:"bg-primary text-white p-3 rounded-lg mb-4 shadow-md text-center",children:[m.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider",children:"Now Swimming"}),m.jsxs("div",{className:"text-lg mt-1 font-semibold",children:["Event #",n.eventNumber]})]}),t.map(c=>m.jsx(DE,{event:c,favorites:e,currentEvent:n,toggleFavorite:r},c.id))]})}function hA({search:t,setSearch:e,results:n,favorites:r,currentEvent:i,toggleFavorite:s}){return m.jsxs("div",{children:[m.jsx("label",{htmlFor:"event-search-input",className:"sr-only",children:"Search by event name or number"}),m.jsx("input",{id:"event-search-input",type:"text",className:"w-full p-3 mb-3 border border-border-light dark:border-border-dark rounded-md bg-surface-light dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"Search by event name or number...",value:t,onChange:o=>e(o.target.value)}),t&&n.length===0&&m.jsx("p",{className:"text-center text-gray-500",children:"No events found."}),n.map(o=>m.jsx(DE,{event:o,favorites:r,currentEvent:i,toggleFavorite:s},o.id))]})}function fA({search:t,setSearch:e,results:n,favorites:r,toggleFavorite:i}){return m.jsxs("div",{children:[m.jsx("label",{htmlFor:"swimmer-search-input",className:"sr-only",children:"Search for a swimmer"}),m.jsx("input",{id:"swimmer-search-input",type:"text",className:"w-full p-3 mb-3 border border-border-light dark:border-border-dark rounded-md bg-surface-light dark:bg-surface-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"Search for a swimmer...",value:t,onChange:s=>e(s.target.value)}),t&&n.length===0&&m.jsx("p",{className:"text-center text-gray-500",children:"No swimmers found."}),m.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-lg shadow-md overflow-hidden border border-border-light dark:border-border-dark",children:m.jsx("ul",{className:"divide-y divide-border-light dark:divide-border-dark",children:n.map(s=>m.jsxs("li",{className:"p-4 flex justify-between items-center",children:[m.jsxs("div",{className:"mr-auto font-bold",children:[s.name," (",s.team,")"]}),m.jsx("button",{className:"p-2 -m-2",onClick:()=>i(s.id),"aria-label":`Toggle favorite for ${s.name}`,children:m.jsx("div",{className:`${r.has(s.id)?"text-secondary":"text-gray-400 dark:text-gray-500"}`,children:m.jsx(xe,{name:"star",type:r.has(s.id)?"fas":"far"})})})]},s.id))})})]})}/*!
* sweetalert2 v11.22.0
* Released under the MIT License.
*/function OE(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function pA(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jv(t,e){return t.get(OE(t,e))}function mA(t,e,n){pA(t,e),e.set(t,n)}function gA(t,e,n){return t.set(OE(t,e),n),n}const yA=100,re={},vA=()=>{re.previousActiveElement instanceof HTMLElement?(re.previousActiveElement.focus(),re.previousActiveElement=null):document.body&&document.body.focus()},wA=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;re.restoreFocusTimeout=setTimeout(()=>{vA(),e()},yA),window.scrollTo(n,r)}),LE="swal2-",_A=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],V=_A.reduce((t,e)=>(t[e]=LE+e,t),{}),EA=["success","warning","info","question","error"],fc=EA.reduce((t,e)=>(t[e]=LE+e,t),{}),VE="SweetAlert2:",gm=t=>t.charAt(0).toUpperCase()+t.slice(1),Wt=t=>{console.warn(`${VE} ${typeof t=="object"?t.join(" "):t}`)},is=t=>{console.error(`${VE} ${t}`)},Bv=[],TA=t=>{Bv.includes(t)||(Bv.push(t),Wt(t))},ME=(t,e=null)=>{TA(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},od=t=>typeof t=="function"?t():t,ym=t=>t&&typeof t.toPromise=="function",el=t=>ym(t)?t.toPromise():Promise.resolve(t),vm=t=>t&&Promise.resolve(t)===t,Kt=()=>document.body.querySelector(`.${V.container}`),tl=t=>{const e=Kt();return e?e.querySelector(t):null},vn=t=>tl(`.${t}`),Ie=()=>vn(V.popup),po=()=>vn(V.icon),bA=()=>vn(V["icon-content"]),FE=()=>vn(V.title),wm=()=>vn(V["html-container"]),jE=()=>vn(V.image),_m=()=>vn(V["progress-steps"]),ad=()=>vn(V["validation-message"]),er=()=>tl(`.${V.actions} .${V.confirm}`),mo=()=>tl(`.${V.actions} .${V.cancel}`),ss=()=>tl(`.${V.actions} .${V.deny}`),IA=()=>vn(V["input-label"]),go=()=>tl(`.${V.loader}`),nl=()=>vn(V.actions),BE=()=>vn(V.footer),ld=()=>vn(V["timer-progress-bar"]),Em=()=>vn(V.close),SA=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Tm=()=>{const t=Ie();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((s,o)=>{const l=parseInt(s.getAttribute("tabindex")||"0"),u=parseInt(o.getAttribute("tabindex")||"0");return l>u?1:l<u?-1:0}),r=t.querySelectorAll(SA),i=Array.from(r).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(s=>rn(s))},bm=()=>gr(document.body,V.shown)&&!gr(document.body,V["toast-shown"])&&!gr(document.body,V["no-backdrop"]),ud=()=>{const t=Ie();return t?gr(t,V.toast):!1},kA=()=>{const t=Ie();return t?t.hasAttribute("data-loading"):!1},wn=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(o=>{t.appendChild(o)});const s=r.querySelector("body");s&&Array.from(s.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?t.appendChild(o.cloneNode(!0)):t.appendChild(o)})}},gr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},AA=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(V).includes(n)&&!Object.values(fc).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},mn=(t,e,n)=>{if(AA(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Wt(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}ke(t,r)}},cd=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${V.popup} > .${V[e]}`);case"checkbox":return t.querySelector(`.${V.popup} > .${V.checkbox} input`);case"radio":return t.querySelector(`.${V.popup} > .${V.radio} input:checked`)||t.querySelector(`.${V.popup} > .${V.radio} input:first-child`);case"range":return t.querySelector(`.${V.popup} > .${V.range} input`);default:return t.querySelector(`.${V.popup} > .${V.input}`)}},UE=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},$E=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(i=>{n?i.classList.add(r):i.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},ke=(t,e)=>{$E(t,e,!0)},Cn=(t,e)=>{$E(t,e,!1)},Qr=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const i=n[r];if(i instanceof HTMLElement&&gr(i,e))return i}},zi=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},pt=(t,e="flex")=>{t&&(t.style.display=e)},Lt=t=>{t&&(t.style.display="none")},Im=(t,e="block")=>{t&&new MutationObserver(()=>{rl(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Uv=(t,e,n,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,r)},rl=(t,e,n="flex")=>{e?pt(t,n):Lt(t)},rn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),CA=()=>!rn(er())&&!rn(ss())&&!rn(mo()),zf=t=>t.scrollHeight>t.clientHeight,xA=(t,e)=>{let n=t;for(;n&&n!==e;){if(zf(n))return!0;n=n.parentElement}return!1},zE=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},Sm=(t,e=!1)=>{const n=ld();n&&rn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},PA=()=>{const t=ld();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},RA=()=>typeof window>"u"||typeof document>"u",NA=`
 <div aria-labelledby="${V.title}" aria-describedby="${V["html-container"]}" class="${V.popup}" tabindex="-1">
   <button type="button" class="${V.close}"></button>
   <ul class="${V["progress-steps"]}"></ul>
   <div class="${V.icon}"></div>
   <img class="${V.image}" />
   <h2 class="${V.title}" id="${V.title}"></h2>
   <div class="${V["html-container"]}" id="${V["html-container"]}"></div>
   <input class="${V.input}" id="${V.input}" />
   <input type="file" class="${V.file}" />
   <div class="${V.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${V.select}" id="${V.select}"></select>
   <div class="${V.radio}"></div>
   <label class="${V.checkbox}">
     <input type="checkbox" id="${V.checkbox}" />
     <span class="${V.label}"></span>
   </label>
   <textarea class="${V.textarea}" id="${V.textarea}"></textarea>
   <div class="${V["validation-message"]}" id="${V["validation-message"]}"></div>
   <div class="${V.actions}">
     <div class="${V.loader}"></div>
     <button type="button" class="${V.confirm}"></button>
     <button type="button" class="${V.deny}"></button>
     <button type="button" class="${V.cancel}"></button>
   </div>
   <div class="${V.footer}"></div>
   <div class="${V["timer-progress-bar-container"]}">
     <div class="${V["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),DA=()=>{const t=Kt();return t?(t.remove(),Cn([document.documentElement,document.body],[V["no-backdrop"],V["toast-shown"],V["has-column"]]),!0):!1},Ai=()=>{re.currentInstance.resetValidationMessage()},OA=()=>{const t=Ie(),e=Qr(t,V.input),n=Qr(t,V.file),r=t.querySelector(`.${V.range} input`),i=t.querySelector(`.${V.range} output`),s=Qr(t,V.select),o=t.querySelector(`.${V.checkbox} input`),l=Qr(t,V.textarea);e.oninput=Ai,n.onchange=Ai,s.onchange=Ai,o.onchange=Ai,l.oninput=Ai,r.oninput=()=>{Ai(),i.value=r.value},r.onchange=()=>{Ai(),i.value=r.value}},LA=t=>typeof t=="string"?document.querySelector(t):t,VA=t=>{const e=Ie();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},MA=t=>{window.getComputedStyle(t).direction==="rtl"&&ke(Kt(),V.rtl)},FA=t=>{const e=DA();if(RA()){is("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=V.container,e&&ke(n,V["no-transition"]),wn(n,NA),n.dataset.swal2Theme=t.theme;const r=LA(t.target);r.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),VA(t),MA(r),OA()},km=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?jA(t,e):t&&wn(e,t)},jA=(t,e)=>{t.jquery?BA(e,t):wn(e,t.toString())},BA=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},UA=(t,e)=>{const n=nl(),r=go();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Lt(n):pt(n),mn(n,e,"actions"),$A(n,r,e),wn(r,e.loaderHtml||""),mn(r,e,"loader"))};function $A(t,e,n){const r=er(),i=ss(),s=mo();!r||!i||!s||(kh(r,"confirm",n),kh(i,"deny",n),kh(s,"cancel",n),zA(r,i,s,n),n.reverseButtons&&(n.toast?(t.insertBefore(s,r),t.insertBefore(i,r)):(t.insertBefore(s,e),t.insertBefore(i,e),t.insertBefore(r,e))))}function zA(t,e,n,r){if(!r.buttonsStyling){Cn([t,e,n],V.styled);return}ke([t,e,n],V.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Sh(t),Sh(e),Sh(n)}function Sh(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function kh(t,e,n){const r=gm(e);rl(t,n[`show${r}Button`],"inline-block"),wn(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=V[e],mn(t,n,`${e}Button`)}const HA=(t,e)=>{const n=Em();n&&(wn(n,e.closeButtonHtml||""),mn(n,e,"closeButton"),rl(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},WA=(t,e)=>{const n=Kt();n&&(qA(n,e.backdrop),GA(n,e.position),KA(n,e.grow),mn(n,e,"container"))};function qA(t,e){typeof e=="string"?t.style.background=e:e||ke([document.documentElement,document.body],V["no-backdrop"])}function GA(t,e){e&&(e in V?ke(t,V[e]):(Wt('The "position" parameter is not valid, defaulting to "center"'),ke(t,V.center)))}function KA(t,e){e&&ke(t,V[`grow-${e}`])}var Oe={innerParams:new WeakMap,domCache:new WeakMap};const QA=["input","file","range","select","radio","checkbox","textarea"],YA=(t,e)=>{const n=Ie();if(!n)return;const r=Oe.innerParams.get(t),i=!r||e.input!==r.input;QA.forEach(s=>{const o=Qr(n,V[s]);o&&(ZA(s,e.inputAttributes),o.className=V[s],i&&Lt(o))}),e.input&&(i&&XA(e),e1(e))},XA=t=>{if(!t.input)return;if(!Ye[t.input]){is(`Unexpected type of input! Expected ${Object.keys(Ye).join(" | ")}, got "${t.input}"`);return}const e=HE(t.input);if(!e)return;const n=Ye[t.input](e,t);pt(e),t.inputAutoFocus&&setTimeout(()=>{UE(n)})},JA=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},ZA=(t,e)=>{const n=Ie();if(!n)return;const r=cd(n,t);if(r){JA(r);for(const i in e)r.setAttribute(i,e[i])}},e1=t=>{if(!t.input)return;const e=HE(t.input);e&&mn(e,t,"input")},Am=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},il=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=V["input-label"];r.setAttribute("for",t.id),r.className=i,typeof n.customClass=="object"&&ke(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},HE=t=>{const e=Ie();if(e)return Qr(e,V[t]||V.input)},pc=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:vm(e)||Wt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Ye={};Ye.text=Ye.email=Ye.password=Ye.number=Ye.tel=Ye.url=Ye.search=Ye.date=Ye["datetime-local"]=Ye.time=Ye.week=Ye.month=(t,e)=>(pc(t,e.inputValue),il(t,t,e),Am(t,e),t.type=e.input,t);Ye.file=(t,e)=>(il(t,t,e),Am(t,e),t);Ye.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return pc(n,e.inputValue),n.type=e.input,pc(r,e.inputValue),il(n,t,e),t};Ye.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");wn(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return il(t,t,e),t};Ye.radio=t=>(t.textContent="",t);Ye.checkbox=(t,e)=>{const n=cd(Ie(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return wn(r,e.inputPlaceholder||e.inputLabel),n};Ye.textarea=(t,e)=>{pc(t,e.inputValue),Am(t,e),il(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Ie()).width),i=()=>{if(!document.body.contains(t))return;const s=t.offsetWidth+n(t);s>r?Ie().style.width=`${s}px`:zi(Ie(),"width",e.width)};new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const t1=(t,e)=>{const n=wm();n&&(Im(n),mn(n,e,"htmlContainer"),e.html?(km(e.html,n),pt(n,"block")):e.text?(n.textContent=e.text,pt(n,"block")):Lt(n),YA(t,e))},n1=(t,e)=>{const n=BE();n&&(Im(n),rl(n,e.footer,"block"),e.footer&&km(e.footer,n),mn(n,e,"footer"))},r1=(t,e)=>{const n=Oe.innerParams.get(t),r=po();if(!r)return;if(n&&e.icon===n.icon){zv(r,e),$v(r,e);return}if(!e.icon&&!e.iconHtml){Lt(r);return}if(e.icon&&Object.keys(fc).indexOf(e.icon)===-1){is(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Lt(r);return}pt(r),zv(r,e),$v(r,e),ke(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",WE)},$v=(t,e)=>{for(const[n,r]of Object.entries(fc))e.icon!==n&&Cn(t,r);ke(t,e.icon&&fc[e.icon]),o1(t,e),WE(),mn(t,e,"icon")},WE=()=>{const t=Ie();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},i1=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,s1=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,zv=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=Hv(e.iconHtml):e.icon==="success"?(r=i1,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=s1:e.icon&&(r=Hv({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&wn(t,r)},o1=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Uv(t,n,"background-color",e.iconColor);Uv(t,".swal2-success-ring","border-color",e.iconColor)}},Hv=t=>`<div class="${V["icon-content"]}">${t}</div>`,a1=(t,e)=>{const n=jE();if(n){if(!e.imageUrl){Lt(n);return}pt(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),zi(n,"width",e.imageWidth),zi(n,"height",e.imageHeight),n.className=V.image,mn(n,e,"image")}};let Cm=!1,qE=0,GE=0,KE=0,QE=0;const l1=t=>{t.addEventListener("mousedown",mc),document.body.addEventListener("mousemove",gc),t.addEventListener("mouseup",yc),t.addEventListener("touchstart",mc),document.body.addEventListener("touchmove",gc),t.addEventListener("touchend",yc)},u1=t=>{t.removeEventListener("mousedown",mc),document.body.removeEventListener("mousemove",gc),t.removeEventListener("mouseup",yc),t.removeEventListener("touchstart",mc),document.body.removeEventListener("touchmove",gc),t.removeEventListener("touchend",yc)},mc=t=>{const e=Ie();if(t.target===e||po().contains(t.target)){Cm=!0;const n=YE(t);qE=n.clientX,GE=n.clientY,KE=parseInt(e.style.insetInlineStart)||0,QE=parseInt(e.style.insetBlockStart)||0,ke(e,"swal2-dragging")}},gc=t=>{const e=Ie();if(Cm){let{clientX:n,clientY:r}=YE(t);e.style.insetInlineStart=`${KE+(n-qE)}px`,e.style.insetBlockStart=`${QE+(r-GE)}px`}},yc=()=>{const t=Ie();Cm=!1,Cn(t,"swal2-dragging")},YE=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},c1=(t,e)=>{const n=Kt(),r=Ie();if(!(!n||!r)){if(e.toast){zi(n,"width",e.width),r.style.width="100%";const i=go();i&&r.insertBefore(i,po())}else zi(r,"width",e.width);zi(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Lt(ad()),d1(r,e),e.draggable&&!e.toast?(ke(r,V.draggable),l1(r)):(Cn(r,V.draggable),u1(r))}},d1=(t,e)=>{const n=e.showClass||{};t.className=`${V.popup} ${rn(t)?n.popup:""}`,e.toast?(ke([document.documentElement,document.body],V["toast-shown"]),ke(t,V.toast)):ke(t,V.modal),mn(t,e,"popup"),typeof e.customClass=="string"&&ke(t,e.customClass),e.icon&&ke(t,V[`icon-${e.icon}`])},h1=(t,e)=>{const n=_m();if(!n)return;const{progressSteps:r,currentProgressStep:i}=e;if(!r||r.length===0||i===void 0){Lt(n);return}pt(n),n.textContent="",i>=r.length&&Wt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((s,o)=>{const l=f1(s);if(n.appendChild(l),o===i&&ke(l,V["active-progress-step"]),o!==r.length-1){const u=p1(e);n.appendChild(u)}})},f1=t=>{const e=document.createElement("li");return ke(e,V["progress-step"]),wn(e,t),e},p1=t=>{const e=document.createElement("li");return ke(e,V["progress-step-line"]),t.progressStepsDistance&&zi(e,"width",t.progressStepsDistance),e},m1=(t,e)=>{const n=FE();n&&(Im(n),rl(n,e.title||e.titleText,"block"),e.title&&km(e.title,n),e.titleText&&(n.innerText=e.titleText),mn(n,e,"title"))},XE=(t,e)=>{c1(t,e),WA(t,e),h1(t,e),r1(t,e),a1(t,e),m1(t,e),HA(t,e),t1(t,e),UA(t,e),n1(t,e);const n=Ie();typeof e.didRender=="function"&&n&&e.didRender(n),re.eventEmitter.emit("didRender",n)},g1=()=>rn(Ie()),JE=()=>{var t;return(t=er())===null||t===void 0?void 0:t.click()},y1=()=>{var t;return(t=ss())===null||t===void 0?void 0:t.click()},v1=()=>{var t;return(t=mo())===null||t===void 0?void 0:t.click()},yo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ZE=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},w1=(t,e,n)=>{ZE(t),e.toast||(t.keydownHandler=r=>E1(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:Ie(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Hf=(t,e)=>{var n;const r=Tm();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=Ie())===null||n===void 0||n.focus()},eT=["ArrowRight","ArrowDown"],_1=["ArrowLeft","ArrowUp"],E1=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?T1(e,t):e.key==="Tab"?b1(e):[...eT,..._1].includes(e.key)?I1(e.key):e.key==="Escape"&&S1(e,t,n)))},T1=(t,e)=>{if(!od(e.allowEnterKey))return;const n=cd(Ie(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;JE(),t.preventDefault()}},b1=t=>{const e=t.target,n=Tm();let r=-1;for(let i=0;i<n.length;i++)if(e===n[i]){r=i;break}t.shiftKey?Hf(r,-1):Hf(r,1),t.stopPropagation(),t.preventDefault()},I1=t=>{const e=nl(),n=er(),r=ss(),i=mo();if(!e||!n||!r||!i)return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=eT.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let u=0;u<e.children.length;u++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&rn(l))break}l instanceof HTMLButtonElement&&l.focus()}},S1=(t,e,n)=>{od(e.allowEscapeKey)&&(t.preventDefault(),n(yo.esc))};var Zs={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const k1=()=>{const t=Kt();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},tT=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},nT=typeof window<"u"&&!!window.GestureEvent,A1=()=>{if(nT&&!gr(document.body,V.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,ke(document.body,V.iosfix),C1()}},C1=()=>{const t=Kt();if(!t)return;let e;t.ontouchstart=n=>{e=x1(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},x1=t=>{const e=t.target,n=Kt(),r=wm();return!n||!r||P1(t)||R1(t)?!1:e===n||!zf(n)&&e instanceof HTMLElement&&!xA(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(zf(r)&&r.contains(e))},P1=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",R1=t=>t.touches&&t.touches.length>1,N1=()=>{if(gr(document.body,V.iosfix)){const t=parseInt(document.body.style.top,10);Cn(document.body,V.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},D1=()=>{const t=document.createElement("div");t.className=V["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let js=null;const O1=t=>{js===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(js=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${js+D1()}px`)},L1=()=>{js!==null&&(document.body.style.paddingRight=`${js}px`,js=null)};function rT(t,e,n,r){ud()?Wv(t,r):(wA(n).then(()=>Wv(t,r)),ZE(re)),nT?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),bm()&&(L1(),N1(),tT()),V1()}function V1(){Cn([document.documentElement,document.body],[V.shown,V["height-auto"],V["no-backdrop"],V["toast-shown"]])}function Yr(t){t=F1(t);const e=Zs.swalPromiseResolve.get(this),n=M1(this);this.isAwaitingPromise?t.isDismissed||(sl(this),e(t)):n&&e(t)}const M1=t=>{const e=Ie();if(!e)return!1;const n=Oe.innerParams.get(t);if(!n||gr(e,n.hideClass.popup))return!1;Cn(e,n.showClass.popup),ke(e,n.hideClass.popup);const r=Kt();return Cn(r,n.showClass.backdrop),ke(r,n.hideClass.backdrop),j1(t,e,n),!0};function iT(t){const e=Zs.swalPromiseReject.get(this);sl(this),e&&e(t)}const sl=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Oe.innerParams.get(t)||t._destroy())},F1=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),j1=(t,e,n)=>{var r;const i=Kt(),s=zE(e);typeof n.willClose=="function"&&n.willClose(e),(r=re.eventEmitter)===null||r===void 0||r.emit("willClose",e),s?B1(t,e,i,n.returnFocus,n.didClose):rT(t,i,n.returnFocus,n.didClose)},B1=(t,e,n,r,i)=>{re.swalCloseEventFinishedCallback=rT.bind(null,t,n,r,i);const s=function(o){if(o.target===e){var l;(l=re.swalCloseEventFinishedCallback)===null||l===void 0||l.call(re),delete re.swalCloseEventFinishedCallback,e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s)}};e.addEventListener("animationend",s),e.addEventListener("transitionend",s)},Wv=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=re.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},eo=t=>{let e=Ie();if(e||new Bn,e=Ie(),!e)return;const n=go();ud()?Lt(po()):U1(e,t),pt(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},U1=(t,e)=>{const n=nl(),r=go();!n||!r||(!e&&rn(er())&&(e=er()),pt(n),e&&(Lt(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),ke([t,n],V.loading))},$1=(t,e)=>{e.input==="select"||e.input==="radio"?G1(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(ym(e.inputValue)||vm(e.inputValue))&&(eo(er()),K1(t,e))},z1=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return H1(n);case"radio":return W1(n);case"file":return q1(n);default:return e.inputAutoTrim?n.value.trim():n.value}},H1=t=>t.checked?1:0,W1=t=>t.checked?t.value:null,q1=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,G1=(t,e)=>{const n=Ie();if(!n)return;const r=i=>{e.input==="select"?Q1(n,vc(i),e):e.input==="radio"&&Y1(n,vc(i),e)};ym(e.inputOptions)||vm(e.inputOptions)?(eo(er()),el(e.inputOptions).then(i=>{t.hideLoading(),r(i)})):typeof e.inputOptions=="object"?r(e.inputOptions):is(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},K1=(t,e)=>{const n=t.getInput();n&&(Lt(n),el(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,pt(n),n.focus(),t.hideLoading()}).catch(r=>{is(`Error in inputValue promise: ${r}`),n.value="",pt(n),n.focus(),t.hideLoading()}))};function Q1(t,e,n){const r=Qr(t,V.select);if(!r)return;const i=(s,o,l)=>{const u=document.createElement("option");u.value=l,wn(u,o),u.selected=sT(l,n.inputValue),s.appendChild(u)};e.forEach(s=>{const o=s[0],l=s[1];if(Array.isArray(l)){const u=document.createElement("optgroup");u.label=o,u.disabled=!1,r.appendChild(u),l.forEach(c=>i(u,c[1],c[0]))}else i(r,l,o)}),r.focus()}function Y1(t,e,n){const r=Qr(t,V.radio);if(!r)return;e.forEach(s=>{const o=s[0],l=s[1],u=document.createElement("input"),c=document.createElement("label");u.type="radio",u.name=V.radio,u.value=o,sT(o,n.inputValue)&&(u.checked=!0);const f=document.createElement("span");wn(f,l),f.className=V.label,c.appendChild(u),c.appendChild(f),r.appendChild(c)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const vc=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let i=n;typeof i=="object"&&(i=vc(i)),e.push([r,i])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=vc(r)),e.push([n,r])}),e},sT=(t,e)=>!!e&&e.toString()===t.toString(),X1=t=>{const e=Oe.innerParams.get(t);t.disableButtons(),e.input?oT(t,"confirm"):Pm(t,!0)},J1=t=>{const e=Oe.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?oT(t,"deny"):xm(t,!1)},Z1=(t,e)=>{t.disableButtons(),e(yo.cancel)},oT=(t,e)=>{const n=Oe.innerParams.get(t);if(!n.input){is(`The "input" parameter is needed to be set when using returnInputValueOn${gm(e)}`);return}const r=t.getInput(),i=z1(t,n);n.inputValidator?eC(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?xm(t,i):Pm(t,i)},eC=(t,e,n)=>{const r=Oe.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>el(r.inputValidator(e,r.validationMessage))).then(s=>{t.enableButtons(),t.enableInput(),s?t.showValidationMessage(s):n==="deny"?xm(t,e):Pm(t,e)})},xm=(t,e)=>{const n=Oe.innerParams.get(t||void 0);n.showLoaderOnDeny&&eo(ss()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>el(n.preDeny(e,n.validationMessage))).then(i=>{i===!1?(t.hideLoading(),sl(t)):t.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>aT(t||void 0,i))):t.close({isDenied:!0,value:e})},qv=(t,e)=>{t.close({isConfirmed:!0,value:e})},aT=(t,e)=>{t.rejectPromise(e)},Pm=(t,e)=>{const n=Oe.innerParams.get(t||void 0);n.showLoaderOnConfirm&&eo(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>el(n.preConfirm(e,n.validationMessage))).then(i=>{rn(ad())||i===!1?(t.hideLoading(),sl(t)):qv(t,typeof i>"u"?e:i)}).catch(i=>aT(t||void 0,i))):qv(t,e)};function wc(){const t=Oe.innerParams.get(this);if(!t)return;const e=Oe.domCache.get(this);Lt(e.loader),ud()?t.icon&&pt(po()):tC(e),Cn([e.popup,e.actions],V.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const tC=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?pt(e[0],"inline-block"):CA()&&Lt(t.actions)};function lT(){const t=Oe.innerParams.get(this),e=Oe.domCache.get(this);return e?cd(e.popup,t.input):null}function uT(t,e,n){const r=Oe.domCache.get(t);e.forEach(i=>{r[i].disabled=n})}function cT(t,e){const n=Ie();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${V.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=e}else t.disabled=e}function dT(){uT(this,["confirmButton","denyButton","cancelButton"],!1)}function hT(){uT(this,["confirmButton","denyButton","cancelButton"],!0)}function fT(){cT(this.getInput(),!1)}function pT(){cT(this.getInput(),!0)}function mT(t){const e=Oe.domCache.get(this),n=Oe.innerParams.get(this);wn(e.validationMessage,t),e.validationMessage.className=V["validation-message"],n.customClass&&n.customClass.validationMessage&&ke(e.validationMessage,n.customClass.validationMessage),pt(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",V["validation-message"]),UE(r),ke(r,V.inputerror))}function gT(){const t=Oe.domCache.get(this);t.validationMessage&&Lt(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Cn(e,V.inputerror))}const Bs={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},nC=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],rC={allowEnterKey:void 0},iC=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],yT=t=>Object.prototype.hasOwnProperty.call(Bs,t),vT=t=>nC.indexOf(t)!==-1,wT=t=>rC[t],sC=t=>{yT(t)||Wt(`Unknown parameter "${t}"`)},oC=t=>{iC.includes(t)&&Wt(`The parameter "${t}" is incompatible with toasts`)},aC=t=>{const e=wT(t);e&&ME(t,e)},_T=t=>{t.backdrop===!1&&t.allowOutsideClick&&Wt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Wt(`Invalid theme "${t.theme}"`);for(const e in t)sC(e),t.toast&&oC(e),aC(e)};function ET(t){const e=Kt(),n=Ie(),r=Oe.innerParams.get(this);if(!n||gr(n,r.hideClass.popup)){Wt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=lC(t),s=Object.assign({},r,i);_T(s),e.dataset.swal2Theme=s.theme,XE(this,s),Oe.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const lC=t=>{const e={};return Object.keys(t).forEach(n=>{vT(n)?e[n]=t[n]:Wt(`Invalid parameter to update: ${n}`)}),e};function TT(){const t=Oe.domCache.get(this),e=Oe.innerParams.get(this);if(!e){bT(this);return}t.popup&&re.swalCloseEventFinishedCallback&&(re.swalCloseEventFinishedCallback(),delete re.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),re.eventEmitter.emit("didDestroy"),uC(this)}const uC=t=>{bT(t),delete t.params,delete re.keydownHandler,delete re.keydownTarget,delete re.currentInstance},bT=t=>{t.isAwaitingPromise?(Ah(Oe,t),t.isAwaitingPromise=!0):(Ah(Zs,t),Ah(Oe,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Ah=(t,e)=>{for(const n in t)t[n].delete(e)};var cC=Object.freeze({__proto__:null,_destroy:TT,close:Yr,closeModal:Yr,closePopup:Yr,closeToast:Yr,disableButtons:hT,disableInput:pT,disableLoading:wc,enableButtons:dT,enableInput:fT,getInput:lT,handleAwaitingPromise:sl,hideLoading:wc,rejectPromise:iT,resetValidationMessage:gT,showValidationMessage:mT,update:ET});const dC=(t,e,n)=>{t.toast?hC(t,e,n):(pC(e),mC(e),gC(t,e,n))},hC=(t,e,n)=>{e.popup.onclick=()=>{t&&(fC(t)||t.timer||t.input)||n(yo.close)}},fC=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let _c=!1;const pC=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(_c=!0)}}},mC=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(_c=!0)}}},gC=(t,e,n)=>{e.container.onclick=r=>{if(_c){_c=!1;return}r.target===e.container&&od(t.allowOutsideClick)&&n(yo.backdrop)}},yC=t=>typeof t=="object"&&t.jquery,Gv=t=>t instanceof Element||yC(t),vC=t=>{const e={};return typeof t[0]=="object"&&!Gv(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const i=t[r];typeof i=="string"||Gv(i)?e[n]=i:i!==void 0&&is(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),e};function wC(...t){return new this(...t)}function _C(t){class e extends this{_main(r,i){return super._main(r,Object.assign({},t,i))}}return e}const EC=()=>re.timeout&&re.timeout.getTimerLeft(),IT=()=>{if(re.timeout)return PA(),re.timeout.stop()},ST=()=>{if(re.timeout){const t=re.timeout.start();return Sm(t),t}},TC=()=>{const t=re.timeout;return t&&(t.running?IT():ST())},bC=t=>{if(re.timeout){const e=re.timeout.increase(t);return Sm(e,!0),e}},IC=()=>!!(re.timeout&&re.timeout.isRunning());let Kv=!1;const Wf={};function SC(t="data-swal-template"){Wf[t]=this,Kv||(document.body.addEventListener("click",kC),Kv=!0)}const kC=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in Wf){const r=e.getAttribute(n);if(r){Wf[n].fire({template:r});return}}};class AC{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){const r=(...i)=>{this.removeListener(e,r),n.apply(this,i)};this.on(e,r)}emit(e,...n){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,n)}catch(i){console.error(i)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),i=r.indexOf(n);i>-1&&r.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}re.eventEmitter=new AC;const CC=(t,e)=>{re.eventEmitter.on(t,e)},xC=(t,e)=>{re.eventEmitter.once(t,e)},PC=(t,e)=>{if(!t){re.eventEmitter.reset();return}e?re.eventEmitter.removeListener(t,e):re.eventEmitter.removeAllListeners(t)};var RC=Object.freeze({__proto__:null,argsToParams:vC,bindClickHandler:SC,clickCancel:v1,clickConfirm:JE,clickDeny:y1,enableLoading:eo,fire:wC,getActions:nl,getCancelButton:mo,getCloseButton:Em,getConfirmButton:er,getContainer:Kt,getDenyButton:ss,getFocusableElements:Tm,getFooter:BE,getHtmlContainer:wm,getIcon:po,getIconContent:bA,getImage:jE,getInputLabel:IA,getLoader:go,getPopup:Ie,getProgressSteps:_m,getTimerLeft:EC,getTimerProgressBar:ld,getTitle:FE,getValidationMessage:ad,increaseTimer:bC,isDeprecatedParameter:wT,isLoading:kA,isTimerRunning:IC,isUpdatableParameter:vT,isValidParameter:yT,isVisible:g1,mixin:_C,off:PC,on:CC,once:xC,resumeTimer:ST,showLoading:eo,stopTimer:IT,toggleTimer:TC});class NC{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const kT=["swal-title","swal-html","swal-footer"],DC=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return UC(n),Object.assign(OC(n),LC(n),VC(n),MC(n),FC(n),jC(n),BC(n,kT))},OC=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Yi(r,["name","value"]);const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(typeof Bs[i]=="boolean"?e[i]=s!=="false":typeof Bs[i]=="object"?e[i]=JSON.parse(s):e[i]=s)}),e},LC=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(e[i]=new Function(`return ${s}`)())}),e},VC=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Yi(r,["type","color","aria-label"]);const i=r.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=r.innerHTML,e[`show${gm(i)}Button`]=!0,r.hasAttribute("color")&&(e[`${i}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},MC=t=>{const e={},n=t.querySelector("swal-image");return n&&(Yi(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},FC=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Yi(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},jC=t=>{const e={},n=t.querySelector("swal-input");n&&(Yi(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(i=>{Yi(i,["value"]);const s=i.getAttribute("value");if(!s)return;const o=i.innerHTML;e.inputOptions[s]=o})),e},BC=(t,e)=>{const n={};for(const r in e){const i=e[r],s=t.querySelector(i);s&&(Yi(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},UC=t=>{const e=kT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||Wt(`Unrecognized element <${r}>`)})},Yi=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Wt([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},AT=10,$C=t=>{const e=Kt(),n=Ie();typeof t.willOpen=="function"&&t.willOpen(n),re.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;WC(e,n,t),setTimeout(()=>{zC(e,n)},AT),bm()&&(HC(e,t.scrollbarPadding,i),k1()),!ud()&&!re.previousActiveElement&&(re.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),re.eventEmitter.emit("didOpen",n),Cn(e,V["no-transition"])},Ec=t=>{const e=Ie();if(t.target!==e)return;const n=Kt();e.removeEventListener("animationend",Ec),e.removeEventListener("transitionend",Ec),n.style.overflowY="auto"},zC=(t,e)=>{zE(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Ec),e.addEventListener("transitionend",Ec)):t.style.overflowY="auto"},HC=(t,e,n)=>{A1(),e&&n!=="hidden"&&O1(n),setTimeout(()=>{t.scrollTop=0})},WC=(t,e,n)=>{ke(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),pt(e,"grid"),setTimeout(()=>{ke(e,n.showClass.popup),e.style.removeProperty("opacity")},AT)):pt(e,"grid"),ke([document.documentElement,document.body],V.shown),n.heightAuto&&n.backdrop&&!n.toast&&ke([document.documentElement,document.body],V["height-auto"])};var Qv={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function qC(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Qv.email),t.input==="url"&&(t.inputValidator=Qv.url))}function GC(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Wt('Target parameter is not valid, defaulting to "body"'),t.target="body")}function KC(t){qC(t),t.showLoaderOnConfirm&&!t.preConfirm&&Wt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),GC(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),FA(t)}let Hn;var iu=new WeakMap;class et{constructor(...e){if(mA(this,iu,void 0),typeof window>"u")return;Hn=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,gA(iu,this,this._main(Hn.params))}_main(e,n={}){if(_T(Object.assign({},n,e)),re.currentInstance){const s=Zs.swalPromiseResolve.get(re.currentInstance),{isAwaitingPromise:o}=re.currentInstance;re.currentInstance._destroy(),o||s({isDismissed:!0}),bm()&&tT()}re.currentInstance=Hn;const r=YC(e,n);KC(r),Object.freeze(r),re.timeout&&(re.timeout.stop(),delete re.timeout),clearTimeout(re.restoreFocusTimeout);const i=XC(Hn);return XE(Hn,r),Oe.innerParams.set(Hn,r),QC(Hn,i,r)}then(e){return jv(iu,this).then(e)}finally(e){return jv(iu,this).finally(e)}}const QC=(t,e,n)=>new Promise((r,i)=>{const s=o=>{t.close({isDismissed:!0,dismiss:o})};Zs.swalPromiseResolve.set(t,r),Zs.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>{X1(t)},e.denyButton.onclick=()=>{J1(t)},e.cancelButton.onclick=()=>{Z1(t,s)},e.closeButton.onclick=()=>{s(yo.close)},dC(n,e,s),w1(re,n,s),$1(t,n),$C(n),JC(re,n,s),ZC(e,n),setTimeout(()=>{e.container.scrollTop=0})}),YC=(t,e)=>{const n=DC(t),r=Object.assign({},Bs,e,n,t);return r.showClass=Object.assign({},Bs.showClass,r.showClass),r.hideClass=Object.assign({},Bs.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},XC=t=>{const e={popup:Ie(),container:Kt(),actions:nl(),confirmButton:er(),denyButton:ss(),cancelButton:mo(),loader:go(),closeButton:Em(),validationMessage:ad(),progressSteps:_m()};return Oe.domCache.set(t,e),e},JC=(t,e,n)=>{const r=ld();Lt(r),e.timer&&(t.timeout=new NC(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(pt(r),mn(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Sm(e.timer)})))},ZC=(t,e)=>{if(!e.toast){if(!od(e.allowEnterKey)){ME("allowEnterKey"),nx();return}ex(t)||tx(t,e)||Hf(-1,1)}},ex=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&rn(n))return n.focus(),!0;return!1},tx=(t,e)=>e.focusDeny&&rn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&rn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&rn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,nx=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}et.prototype.disableButtons=hT;et.prototype.enableButtons=dT;et.prototype.getInput=lT;et.prototype.disableInput=pT;et.prototype.enableInput=fT;et.prototype.hideLoading=wc;et.prototype.disableLoading=wc;et.prototype.showValidationMessage=mT;et.prototype.resetValidationMessage=gT;et.prototype.close=Yr;et.prototype.closePopup=Yr;et.prototype.closeModal=Yr;et.prototype.closeToast=Yr;et.prototype.rejectPromise=iT;et.prototype.update=ET;et.prototype._destroy=TT;Object.assign(et,RC);Object.keys(cC).forEach(t=>{et[t]=function(...e){return Hn&&Hn[t]?Hn[t](...e):null}});et.DismissReason=yo;et.version="11.22.0";const Bn=et;Bn.default=Bn;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yv(Object(n),!0).forEach(function(r){rx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Au(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Au=function(e){return typeof e}:Au=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(t)}function rx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function br(){return br=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},br.apply(this,arguments)}function ix(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sx(t,e){if(t==null)return{};var n=ix(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var ox="1.15.6";function yr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Pr=yr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ol=yr(/Edge/i),Xv=yr(/firefox/i),da=yr(/safari/i)&&!yr(/chrome/i)&&!yr(/android/i),Rm=yr(/iP(ad|od|hone)/i),CT=yr(/chrome/i)&&yr(/android/i),xT={capture:!1,passive:!1};function ve(t,e,n){t.addEventListener(e,n,!Pr&&xT)}function ge(t,e,n){t.removeEventListener(e,n,!Pr&&xT)}function Tc(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function PT(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function On(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Tc(t,e):Tc(t,e))||r&&t===n)return t;if(t===n)break}while(t=PT(t))}return null}var Jv=/\s+/g;function on(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Jv," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Jv," ")}}function ae(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Us(t,e){var n="";if(typeof t=="string")n=t;else do{var r=ae(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function RT(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Yn(){var t=document.scrollingElement;return t||document.documentElement}function rt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,l,u,c,f,p;if(t!==window&&t.parentNode&&t!==Yn()?(s=t.getBoundingClientRect(),o=s.top,l=s.left,u=s.bottom,c=s.right,f=s.height,p=s.width):(o=0,l=0,u=window.innerHeight,c=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Pr))do if(i&&i.getBoundingClientRect&&(ae(i,"transform")!=="none"||n&&ae(i,"position")!=="static")){var g=i.getBoundingClientRect();o-=g.top+parseInt(ae(i,"border-top-width")),l-=g.left+parseInt(ae(i,"border-left-width")),u=o+s.height,c=l+s.width;break}while(i=i.parentNode);if(r&&t!==window){var S=Us(i||t),x=S&&S.a,R=S&&S.d;S&&(o/=R,l/=x,p/=x,f/=R,u=o+f,c=l+p)}return{top:o,left:l,bottom:u,right:c,width:p,height:f}}}function Zv(t,e,n){for(var r=Xr(t,!0),i=rt(t)[e];r;){var s=rt(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Yn())break;r=Xr(r,!1)}return!1}function to(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==le.ghost&&(r||o[s]!==le.dragged)&&On(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function Nm(t,e){for(var n=t.lastElementChild;n&&(n===le.ghost||ae(n,"display")==="none"||e&&!Tc(n,e));)n=n.previousElementSibling;return n||null}function En(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==le.clone&&(!e||Tc(t,e))&&n++;return n}function ew(t){var e=0,n=0,r=Yn();if(t)do{var i=Us(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function ax(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Xr(t,e){if(!t||!t.getBoundingClientRect)return Yn();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=ae(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Yn();if(r||e)return n;r=!0}}while(n=n.parentNode);return Yn()}function lx(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Ch(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ha;function NT(t,e){return function(){if(!ha){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),ha=setTimeout(function(){ha=void 0},e)}}}function ux(){clearTimeout(ha),ha=void 0}function DT(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function OT(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function LT(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,l,u;if(!(!On(i,e.draggable,t,!1)||i.animated||i===n)){var c=rt(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((u=r.bottom)!==null&&u!==void 0?u:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Xt="Sortable"+new Date().getTime();function cx(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ae(i,"display")==="none"||i===le.ghost)){t.push({target:i,rect:rt(i)});var s=tr({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Us(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(ax(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(l){var u=0,c=l.target,f=c.fromRect,p=rt(c),g=c.prevFromRect,S=c.prevToRect,x=l.rect,R=Us(c,!0);R&&(p.top-=R.f,p.left-=R.e),c.toRect=p,c.thisAnimationDuration&&Ch(g,p)&&!Ch(f,p)&&(x.top-p.top)/(x.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(u=hx(x,g,S,i.options)),Ch(p,f)||(c.prevFromRect=f,c.prevToRect=p,u||(u=i.options.animation),i.animate(c,x,p,u)),u&&(s=!0,o=Math.max(o,u),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},u),c.thisAnimationDuration=u)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){ae(r,"transition",""),ae(r,"transform","");var l=Us(this.el),u=l&&l.a,c=l&&l.d,f=(i.left-s.left)/(u||1),p=(i.top-s.top)/(c||1);r.animatingX=!!f,r.animatingY=!!p,ae(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=dx(r),ae(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ae(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ae(r,"transition",""),ae(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function dx(t){return t.offsetWidth}function hx(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ps=[],xh={initializeByDefault:!0},al={mount:function(e){for(var n in xh)xh.hasOwnProperty(n)&&!(n in e)&&(e[n]=xh[n]);ps.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ps.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";ps.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](tr({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](tr({sortable:n},r)))})},initializePlugins:function(e,n,r,i){ps.forEach(function(l){var u=l.pluginName;if(!(!e.options[u]&&!l.initializeByDefault)){var c=new l(e,n,e.options);c.sortable=e,c.options=e.options,e[u]=c,br(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return ps.forEach(function(i){typeof i.eventProperties=="function"&&br(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return ps.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function fx(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,l=t.fromEl,u=t.oldIndex,c=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,g=t.originalEvent,S=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[Xt],!!e){var R,P=e.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Pr&&!ol?R=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(R=document.createEvent("Event"),R.initEvent(r,!0,!0)),R.to=o||n,R.from=l||n,R.item=i||n,R.clone=s,R.oldIndex=u,R.newIndex=c,R.oldDraggableIndex=f,R.newDraggableIndex=p,R.originalEvent=g,R.pullMode=S?S.lastPutMode:void 0;var w=tr(tr({},x),al.getEventProperties(r,e));for(var A in w)R[A]=w[A];n&&n.dispatchEvent(R),P[T]&&P[T].call(e,R)}}var px=["evt"],Qt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=sx(r,px);al.pluginEvent.bind(le)(e,n,tr({dragEl:z,parentEl:Ge,ghostEl:de,rootEl:je,nextEl:Di,lastDownEl:Cu,cloneEl:Ue,cloneHidden:$r,dragStarted:Qo,putSortable:gt,activeSortable:le.active,originalEvent:i,oldIndex:Ns,oldDraggableIndex:fa,newIndex:an,newDraggableIndex:jr,hideGhostForTarget:jT,unhideGhostForTarget:BT,cloneNowHidden:function(){$r=!0},cloneNowShown:function(){$r=!1},dispatchSortableEvent:function(l){jt({sortable:n,name:l,originalEvent:i})}},s))};function jt(t){fx(tr({putSortable:gt,cloneEl:Ue,targetEl:z,rootEl:je,oldIndex:Ns,oldDraggableIndex:fa,newIndex:an,newDraggableIndex:jr},t))}var z,Ge,de,je,Di,Cu,Ue,$r,Ns,an,fa,jr,su,gt,gs=!1,bc=!1,Ic=[],Ci,Rn,Ph,Rh,tw,nw,Qo,ms,pa,ma=!1,ou=!1,xu,xt,Nh=[],qf=!1,Sc=[],dd=typeof document<"u",au=Rm,rw=ol||Pr?"cssFloat":"float",mx=dd&&!CT&&!Rm&&"draggable"in document.createElement("div"),VT=function(){if(dd){if(Pr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),MT=function(e,n){var r=ae(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=to(e,0,n),o=to(e,1,n),l=s&&ae(s),u=o&&ae(o),c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+rt(s).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+rt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===p)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||c>=i&&r[rw]==="none"||o&&r[rw]==="none"&&c+f>i)?"vertical":"horizontal"},gx=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,l=r?n.left:n.top,u=r?n.right:n.bottom,c=r?n.width:n.height;return i===l||s===u||i+o/2===l+c/2},yx=function(e,n){var r;return Ic.some(function(i){var s=i[Xt].options.emptyInsertThreshold;if(!(!s||Nm(i))){var o=rt(i),l=e>=o.left-s&&e<=o.right+s,u=n>=o.top-s&&n<=o.bottom+s;if(l&&u)return r=i}}),r},FT=function(e){function n(s,o){return function(l,u,c,f){var p=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(l,u,c,f),o)(l,u,c,f);var g=(o?l:u).options.group.name;return s===!0||typeof s=="string"&&s===g||s.join&&s.indexOf(g)>-1}}var r={},i=e.group;(!i||Au(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},jT=function(){!VT&&de&&ae(de,"display","none")},BT=function(){!VT&&de&&ae(de,"display","")};dd&&!CT&&document.addEventListener("click",function(t){if(bc)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),bc=!1,!1},!0);var xi=function(e){if(z){e=e.touches?e.touches[0]:e;var n=yx(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Xt]._onDragOver(r)}}},vx=function(e){z&&z.parentNode[Xt]._isOutsideThisEl(e.target)};function le(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=br({},e),t[Xt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return MT(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,l){o.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:le.supportPointer!==!1&&"PointerEvent"in window&&(!da||Rm),emptyInsertThreshold:5};al.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);FT(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:mx,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ve(t,"pointerdown",this._onTapStart):(ve(t,"mousedown",this._onTapStart),ve(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ve(t,"dragover",this),ve(t,"dragenter",this)),Ic.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),br(this,cx())}le.prototype={constructor:le,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ms=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,z):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(l||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=i.filter;if(kx(r),!z&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&da&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=On(u,i.draggable,r,!1),!(u&&u.animated)&&Cu!==u)){if(Ns=En(u),fa=En(u,i.draggable),typeof f=="function"){if(f.call(this,e,u,this)){jt({sortable:n,rootEl:c,name:"filter",targetEl:u,toEl:r,fromEl:r}),Qt("filter",n,{evt:e}),s&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=On(c,p.trim(),r,!1),p)return jt({sortable:n,rootEl:p,name:"filter",targetEl:u,fromEl:r,toEl:r}),Qt("filter",n,{evt:e}),!0}),f)){s&&e.preventDefault();return}i.handle&&!On(c,i.handle,r,!1)||this._prepareDragStart(e,l,u)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,l=s.ownerDocument,u;if(r&&!z&&r.parentNode===s){var c=rt(r);if(je=s,z=r,Ge=z.parentNode,Di=z.nextSibling,Cu=r,su=o.group,le.dragged=z,Ci={target:z,clientX:(n||e).clientX,clientY:(n||e).clientY},tw=Ci.clientX-c.left,nw=Ci.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,z.style["will-change"]="all",u=function(){if(Qt("delayEnded",i,{evt:e}),le.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Xv&&i.nativeDraggable&&(z.draggable=!0),i._triggerDragStart(e,n),jt({sortable:i,name:"choose",originalEvent:e}),on(z,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){RT(z,f.trim(),Dh)}),ve(l,"dragover",xi),ve(l,"mousemove",xi),ve(l,"touchmove",xi),o.supportPointer?(ve(l,"pointerup",i._onDrop),!this.nativeDraggable&&ve(l,"pointercancel",i._onDrop)):(ve(l,"mouseup",i._onDrop),ve(l,"touchend",i._onDrop),ve(l,"touchcancel",i._onDrop)),Xv&&this.nativeDraggable&&(this.options.touchStartThreshold=4,z.draggable=!0),Qt("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ol||Pr))){if(le.eventCanceled){this._onDrop();return}o.supportPointer?(ve(l,"pointerup",i._disableDelayedDrag),ve(l,"pointercancel",i._disableDelayedDrag)):(ve(l,"mouseup",i._disableDelayedDrag),ve(l,"touchend",i._disableDelayedDrag),ve(l,"touchcancel",i._disableDelayedDrag)),ve(l,"mousemove",i._delayedDragTouchMoveHandler),ve(l,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&ve(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){z&&Dh(z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ge(e,"mouseup",this._disableDelayedDrag),ge(e,"touchend",this._disableDelayedDrag),ge(e,"touchcancel",this._disableDelayedDrag),ge(e,"pointerup",this._disableDelayedDrag),ge(e,"pointercancel",this._disableDelayedDrag),ge(e,"mousemove",this._delayedDragTouchMoveHandler),ge(e,"touchmove",this._delayedDragTouchMoveHandler),ge(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ve(document,"pointermove",this._onTouchMove):n?ve(document,"touchmove",this._onTouchMove):ve(document,"mousemove",this._onTouchMove):(ve(z,"dragend",this),ve(je,"dragstart",this._onDragStart));try{document.selection?Pu(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(gs=!1,je&&z){Qt("dragStarted",this,{evt:n}),this.nativeDraggable&&ve(document,"dragover",vx);var r=this.options;!e&&on(z,r.dragClass,!1),on(z,r.ghostClass,!0),le.active=this,e&&this._appendGhost(),jt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Rn){this._lastX=Rn.clientX,this._lastY=Rn.clientY,jT();for(var e=document.elementFromPoint(Rn.clientX,Rn.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Rn.clientX,Rn.clientY),e!==n);)n=e;if(z.parentNode[Xt]._isOutsideThisEl(e),n)do{if(n[Xt]){var r=void 0;if(r=n[Xt]._onDragOver({clientX:Rn.clientX,clientY:Rn.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=PT(n));BT()}},_onTouchMove:function(e){if(Ci){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=de&&Us(de,!0),l=de&&o&&o.a,u=de&&o&&o.d,c=au&&xt&&ew(xt),f=(s.clientX-Ci.clientX+i.x)/(l||1)+(c?c[0]-Nh[0]:0)/(l||1),p=(s.clientY-Ci.clientY+i.y)/(u||1)+(c?c[1]-Nh[1]:0)/(u||1);if(!le.active&&!gs){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(de){o?(o.e+=f-(Ph||0),o.f+=p-(Rh||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var g="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ae(de,"webkitTransform",g),ae(de,"mozTransform",g),ae(de,"msTransform",g),ae(de,"transform",g),Ph=f,Rh=p,Rn=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!de){var e=this.options.fallbackOnBody?document.body:je,n=rt(z,!0,au,!0,e),r=this.options;if(au){for(xt=e;ae(xt,"position")==="static"&&ae(xt,"transform")==="none"&&xt!==document;)xt=xt.parentNode;xt!==document.body&&xt!==document.documentElement?(xt===document&&(xt=Yn()),n.top+=xt.scrollTop,n.left+=xt.scrollLeft):xt=Yn(),Nh=ew(xt)}de=z.cloneNode(!0),on(de,r.ghostClass,!1),on(de,r.fallbackClass,!0),on(de,r.dragClass,!0),ae(de,"transition",""),ae(de,"transform",""),ae(de,"box-sizing","border-box"),ae(de,"margin",0),ae(de,"top",n.top),ae(de,"left",n.left),ae(de,"width",n.width),ae(de,"height",n.height),ae(de,"opacity","0.8"),ae(de,"position",au?"absolute":"fixed"),ae(de,"zIndex","100000"),ae(de,"pointerEvents","none"),le.ghost=de,e.appendChild(de),ae(de,"transform-origin",tw/parseInt(de.style.width)*100+"% "+nw/parseInt(de.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Qt("dragStart",this,{evt:e}),le.eventCanceled){this._onDrop();return}Qt("setupClone",this),le.eventCanceled||(Ue=OT(z),Ue.removeAttribute("id"),Ue.draggable=!1,Ue.style["will-change"]="",this._hideClone(),on(Ue,this.options.chosenClass,!1),le.clone=Ue),r.cloneId=Pu(function(){Qt("clone",r),!le.eventCanceled&&(r.options.removeCloneOnHide||je.insertBefore(Ue,z),r._hideClone(),jt({sortable:r,name:"clone"}))}),!n&&on(z,s.dragClass,!0),n?(bc=!0,r._loopId=setInterval(r._emulateDragOver,50)):(ge(document,"mouseup",r._onDrop),ge(document,"touchend",r._onDrop),ge(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,z)),ve(document,"drop",r),ae(z,"transform","translateZ(0)")),gs=!0,r._dragStartId=Pu(r._dragStarted.bind(r,n,e)),ve(document,"selectstart",r),Qo=!0,window.getSelection().removeAllRanges(),da&&ae(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,l=this.options,u=l.group,c=le.active,f=su===u,p=l.sort,g=gt||c,S,x=this,R=!1;if(qf)return;function P(B,Q){Qt(B,x,tr({evt:e,isOwner:f,axis:S?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:g,target:r,completed:w,onMove:function(ee,pe){return lu(je,n,z,i,ee,rt(ee),e,pe)},changed:A},Q))}function T(){P("dragOverAnimationCapture"),x.captureAnimationState(),x!==g&&g.captureAnimationState()}function w(B){return P("dragOverCompleted",{insertion:B}),B&&(f?c._hideClone():c._showClone(x),x!==g&&(on(z,gt?gt.options.ghostClass:c.options.ghostClass,!1),on(z,l.ghostClass,!0)),gt!==x&&x!==le.active?gt=x:x===le.active&&gt&&(gt=null),g===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){P("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===z&&!z.animated||r===n&&!r.animated)&&(ms=null),!l.dragoverBubble&&!e.rootEl&&r!==document&&(z.parentNode[Xt]._isOutsideThisEl(e.target),!B&&xi(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),R=!0}function A(){an=En(z),jr=En(z,l.draggable),jt({sortable:x,name:"change",toEl:n,newIndex:an,newDraggableIndex:jr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=On(r,l.draggable,n,!0),P("dragOver"),le.eventCanceled)return R;if(z.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return w(!1);if(bc=!1,c&&!l.disabled&&(f?p||(o=Ge!==je):gt===this||(this.lastPutMode=su.checkPull(this,c,z,e))&&u.checkPut(this,c,z,e))){if(S=this._getDirection(e,r)==="vertical",i=rt(z),P("dragOverValid"),le.eventCanceled)return R;if(o)return Ge=je,T(),this._hideClone(),P("revert"),le.eventCanceled||(Di?je.insertBefore(z,Di):je.appendChild(z)),w(!0);var D=Nm(n,l.draggable);if(!D||Tx(e,S,this)&&!D.animated){if(D===z)return w(!1);if(D&&n===e.target&&(r=D),r&&(s=rt(r)),lu(je,n,z,i,r,s,e,!!r)!==!1)return T(),D&&D.nextSibling?n.insertBefore(z,D.nextSibling):n.appendChild(z),Ge=n,A(),w(!0)}else if(D&&Ex(e,S,this)){var M=to(n,0,l,!0);if(M===z)return w(!1);if(r=M,s=rt(r),lu(je,n,z,i,r,s,e,!1)!==!1)return T(),n.insertBefore(z,M),Ge=n,A(),w(!0)}else if(r.parentNode===n){s=rt(r);var j=0,b,v=z.parentNode!==n,_=!gx(z.animated&&z.toRect||i,r.animated&&r.toRect||s,S),k=S?"top":"left",I=Zv(r,"top","top")||Zv(z,"top","top"),C=I?I.scrollTop:void 0;ms!==r&&(b=s[k],ma=!1,ou=!_&&l.invertSwap||v),j=bx(e,r,s,S,_?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,ou,ms===r);var E;if(j!==0){var O=En(z);do O-=j,E=Ge.children[O];while(E&&(ae(E,"display")==="none"||E===de))}if(j===0||E===r)return w(!1);ms=r,pa=j;var q=r.nextElementSibling,ie=!1;ie=j===1;var Y=lu(je,n,z,i,r,s,e,ie);if(Y!==!1)return(Y===1||Y===-1)&&(ie=Y===1),qf=!0,setTimeout(_x,30),T(),ie&&!q?n.appendChild(z):r.parentNode.insertBefore(z,ie?q:r),I&&DT(I,0,C-I.scrollTop),Ge=z.parentNode,b!==void 0&&!ou&&(xu=Math.abs(b-rt(r)[k])),A(),w(!0)}if(n.contains(z))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ge(document,"mousemove",this._onTouchMove),ge(document,"touchmove",this._onTouchMove),ge(document,"pointermove",this._onTouchMove),ge(document,"dragover",xi),ge(document,"mousemove",xi),ge(document,"touchmove",xi)},_offUpEvents:function(){var e=this.el.ownerDocument;ge(e,"mouseup",this._onDrop),ge(e,"touchend",this._onDrop),ge(e,"pointerup",this._onDrop),ge(e,"pointercancel",this._onDrop),ge(e,"touchcancel",this._onDrop),ge(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(an=En(z),jr=En(z,r.draggable),Qt("drop",this,{evt:e}),Ge=z&&z.parentNode,an=En(z),jr=En(z,r.draggable),le.eventCanceled){this._nulling();return}gs=!1,ou=!1,ma=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gf(this.cloneId),Gf(this._dragStartId),this.nativeDraggable&&(ge(document,"drop",this),ge(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),da&&ae(document.body,"user-select",""),ae(z,"transform",""),e&&(Qo&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),de&&de.parentNode&&de.parentNode.removeChild(de),(je===Ge||gt&&gt.lastPutMode!=="clone")&&Ue&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),z&&(this.nativeDraggable&&ge(z,"dragend",this),Dh(z),z.style["will-change"]="",Qo&&!gs&&on(z,gt?gt.options.ghostClass:this.options.ghostClass,!1),on(z,this.options.chosenClass,!1),jt({sortable:this,name:"unchoose",toEl:Ge,newIndex:null,newDraggableIndex:null,originalEvent:e}),je!==Ge?(an>=0&&(jt({rootEl:Ge,name:"add",toEl:Ge,fromEl:je,originalEvent:e}),jt({sortable:this,name:"remove",toEl:Ge,originalEvent:e}),jt({rootEl:Ge,name:"sort",toEl:Ge,fromEl:je,originalEvent:e}),jt({sortable:this,name:"sort",toEl:Ge,originalEvent:e})),gt&&gt.save()):an!==Ns&&an>=0&&(jt({sortable:this,name:"update",toEl:Ge,originalEvent:e}),jt({sortable:this,name:"sort",toEl:Ge,originalEvent:e})),le.active&&((an==null||an===-1)&&(an=Ns,jr=fa),jt({sortable:this,name:"end",toEl:Ge,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Qt("nulling",this),je=z=Ge=de=Di=Ue=Cu=$r=Ci=Rn=Qo=an=jr=Ns=fa=ms=pa=gt=su=le.dragged=le.ghost=le.clone=le.active=null,Sc.forEach(function(e){e.checked=!0}),Sc.length=Ph=Rh=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":z&&(this._onDragOver(e),wx(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],On(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Sx(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var l=i.children[o];On(l,this.options.draggable,i,!1)&&(r[s]=l)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return On(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=al.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&FT(r)},destroy:function(){Qt("destroy",this);var e=this.el;e[Xt]=null,ge(e,"mousedown",this._onTapStart),ge(e,"touchstart",this._onTapStart),ge(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ge(e,"dragover",this),ge(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ic.splice(Ic.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$r){if(Qt("hideClone",this),le.eventCanceled)return;ae(Ue,"display","none"),this.options.removeCloneOnHide&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),$r=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if($r){if(Qt("showClone",this),le.eventCanceled)return;z.parentNode==je&&!this.options.group.revertClone?je.insertBefore(Ue,z):Di?je.insertBefore(Ue,Di):je.appendChild(Ue),this.options.group.revertClone&&this.animate(z,Ue),ae(Ue,"display",""),$r=!1}}};function wx(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function lu(t,e,n,r,i,s,o,l){var u,c=t[Xt],f=c.options.onMove,p;return window.CustomEvent&&!Pr&&!ol?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=n,u.draggedRect=r,u.related=i||e,u.relatedRect=s||rt(e),u.willInsertAfter=l,u.originalEvent=o,t.dispatchEvent(u),f&&(p=f.call(c,u,o)),p}function Dh(t){t.draggable=!1}function _x(){qf=!1}function Ex(t,e,n){var r=rt(to(n.el,0,n.options,!0)),i=LT(n.el,n.options,de),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Tx(t,e,n){var r=rt(Nm(n.el,n.options.draggable)),i=LT(n.el,n.options,de),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function bx(t,e,n,r,i,s,o,l){var u=r?t.clientY:t.clientX,c=r?n.height:n.width,f=r?n.top:n.left,p=r?n.bottom:n.right,g=!1;if(!o){if(l&&xu<c*i){if(!ma&&(pa===1?u>f+c*s/2:u<p-c*s/2)&&(ma=!0),ma)g=!0;else if(pa===1?u<f+xu:u>p-xu)return-pa}else if(u>f+c*(1-i)/2&&u<p-c*(1-i)/2)return Ix(e)}return g=g||o,g&&(u<f+c*s/2||u>p-c*s/2)?u>f+c/2?1:-1:0}function Ix(t){return En(z)<En(t)?1:-1}function Sx(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function kx(t){Sc.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Sc.push(r)}}function Pu(t){return setTimeout(t,0)}function Gf(t){return clearTimeout(t)}dd&&ve(document,"touchmove",function(t){(le.active||gs)&&t.cancelable&&t.preventDefault()});le.utils={on:ve,off:ge,css:ae,find:RT,is:function(e,n){return!!On(e,n,e,!1)},extend:lx,throttle:NT,closest:On,toggleClass:on,clone:OT,index:En,nextTick:Pu,cancelNextTick:Gf,detectDirection:MT,getChild:to,expando:Xt};le.get=function(t){return t[Xt]};le.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(le.utils=tr(tr({},le.utils),r.utils)),al.mount(r)})};le.create=function(t,e){return new le(t,e)};le.version=ox;var tt=[],Yo,Kf,Qf=!1,Oh,Lh,kc,Xo;function Ax(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?ve(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ve(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ve(document,"touchmove",this._handleFallbackAutoScroll):ve(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):(ge(document,"pointermove",this._handleFallbackAutoScroll),ge(document,"touchmove",this._handleFallbackAutoScroll),ge(document,"mousemove",this._handleFallbackAutoScroll)),iw(),Ru(),ux()},nulling:function(){kc=Kf=Yo=Qf=Xo=Oh=Lh=null,tt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(s,o);if(kc=n,r||this.options.forceAutoScrollFallback||ol||Pr||da){Vh(n,this.options,l,r);var u=Xr(l,!0);Qf&&(!Xo||s!==Oh||o!==Lh)&&(Xo&&iw(),Xo=setInterval(function(){var c=Xr(document.elementFromPoint(s,o),!0);c!==u&&(u=c,Ru()),Vh(n,i.options,c,r)},10),Oh=s,Lh=o)}else{if(!this.options.bubbleScroll||Xr(l,!0)===Yn()){Ru();return}Vh(n,this.options,Xr(l,!1),!1)}}},br(t,{pluginName:"scroll",initializeByDefault:!0})}function Ru(){tt.forEach(function(t){clearInterval(t.pid)}),tt=[]}function iw(){clearInterval(Xo)}var Vh=NT(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,u=Yn(),c=!1,f;Kf!==n&&(Kf=n,Ru(),Yo=e.scroll,f=e.scrollFn,Yo===!0&&(Yo=Xr(n,!0)));var p=0,g=Yo;do{var S=g,x=rt(S),R=x.top,P=x.bottom,T=x.left,w=x.right,A=x.width,D=x.height,M=void 0,j=void 0,b=S.scrollWidth,v=S.scrollHeight,_=ae(S),k=S.scrollLeft,I=S.scrollTop;S===u?(M=A<b&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),j=D<v&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(M=A<b&&(_.overflowX==="auto"||_.overflowX==="scroll"),j=D<v&&(_.overflowY==="auto"||_.overflowY==="scroll"));var C=M&&(Math.abs(w-i)<=o&&k+A<b)-(Math.abs(T-i)<=o&&!!k),E=j&&(Math.abs(P-s)<=o&&I+D<v)-(Math.abs(R-s)<=o&&!!I);if(!tt[p])for(var O=0;O<=p;O++)tt[O]||(tt[O]={});(tt[p].vx!=C||tt[p].vy!=E||tt[p].el!==S)&&(tt[p].el=S,tt[p].vx=C,tt[p].vy=E,clearInterval(tt[p].pid),(C!=0||E!=0)&&(c=!0,tt[p].pid=setInterval((function(){r&&this.layer===0&&le.active._onTouchMove(kc);var q=tt[this.layer].vy?tt[this.layer].vy*l:0,ie=tt[this.layer].vx?tt[this.layer].vx*l:0;typeof f=="function"&&f.call(le.dragged.parentNode[Xt],ie,q,t,kc,tt[this.layer].el)!=="continue"||DT(tt[this.layer].el,ie,q)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&g!==u&&(g=Xr(g,!1)));Qf=c}},30),UT=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,l=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var c=r||s;l();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(f.clientX,f.clientY);u(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Dm(){}Dm.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=to(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:UT};br(Dm,{pluginName:"revertOnSpill"});function Om(){}Om.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:UT};br(Om,{pluginName:"removeOnSpill"});le.mount(new Ax);le.mount(Om,Dm);var sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Cx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,S=c&63;u||(S=64,o||(g=64)),r.push(n[f],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($T(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||p==null)throw new xx;const g=s<<2|l>>4;if(r.push(g),c!==64){const S=l<<4&240|c>>2;if(r.push(S),p!==64){const x=c<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Px=function(t){const e=$T(t);return zT.encodeByteArray(e,!0)},Ac=function(t){return Px(t).replace(/\./g,"")},HT=function(t){try{return zT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=()=>Rx().__FIREBASE_DEFAULTS__,Dx=()=>{if(typeof process>"u"||typeof sw>"u")return;const t=sw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ox=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HT(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return Nx()||Dx()||Ox()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WT=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Lx=t=>{const e=WT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qT=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},GT=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ac(JSON.stringify(n)),Ac(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function jx(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ux(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $x(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zx(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hx(){return!jx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wx(){try{return typeof indexedDB=="object"}catch{return!1}}function qx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gx,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Kx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Rr(i,l,r)}}function Kx(t,e){return t.replace(Qx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Qx=/\{\$([^}]+)}/g;function Yx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ow(s)&&ow(o)){if(!Cc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ow(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xx(t,e){const n=new Jx(t,e);return n.subscribe.bind(n)}class Jx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mh),i.error===void 0&&(i.error=Mh),i.complete===void 0&&(i.complete=Mh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nP(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tP(t){return t===Oi?void 0:t}function nP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const iP={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},sP=we.INFO,oP={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},aP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lm{constructor(e){this.name=e,this._logLevel=sP,this._logHandler=aP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const lP=(t,e)=>e.some(n=>t instanceof n);let aw,lw;function uP(){return aw||(aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cP(){return lw||(lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KT=new WeakMap,Yf=new WeakMap,QT=new WeakMap,Fh=new WeakMap,Vm=new WeakMap;function dP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KT.set(n,t)}).catch(()=>{}),Vm.set(e,t),e}function hP(t){if(Yf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yf.set(t,e)}let Xf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fP(t){Xf=t(Xf)}function pP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jh(this),e,...n);return QT.set(r,e.sort?e.sort():[e]),ai(r)}:cP().includes(t)?function(...e){return t.apply(jh(this),e),ai(KT.get(this))}:function(...e){return ai(t.apply(jh(this),e))}}function mP(t){return typeof t=="function"?pP(t):(t instanceof IDBTransaction&&hP(t),lP(t,uP())?new Proxy(t,Xf):t)}function ai(t){if(t instanceof IDBRequest)return dP(t);if(Fh.has(t))return Fh.get(t);const e=mP(t);return e!==t&&(Fh.set(t,e),Vm.set(e,t)),e}const jh=t=>Vm.get(t);function gP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ai(o.result),u.oldVersion,u.newVersion,ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const yP=["get","getKey","getAll","getAllKeys","count"],vP=["put","add","delete","clear"],Bh=new Map;function uw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bh.get(e))return Bh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yP.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return Bh.set(e,s),s}fP(t=>({...t,get:(e,n,r)=>uw(e,n)||t.get(e,n,r),has:(e,n)=>!!uw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_P(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _P(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",cw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Lm("@firebase/app"),EP="@firebase/app-compat",TP="@firebase/analytics-compat",bP="@firebase/analytics",IP="@firebase/app-check-compat",SP="@firebase/app-check",kP="@firebase/auth",AP="@firebase/auth-compat",CP="@firebase/database",xP="@firebase/data-connect",PP="@firebase/database-compat",RP="@firebase/functions",NP="@firebase/functions-compat",DP="@firebase/installations",OP="@firebase/installations-compat",LP="@firebase/messaging",VP="@firebase/messaging-compat",MP="@firebase/performance",FP="@firebase/performance-compat",jP="@firebase/remote-config",BP="@firebase/remote-config-compat",UP="@firebase/storage",$P="@firebase/storage-compat",zP="@firebase/firestore",HP="@firebase/vertexai-preview",WP="@firebase/firestore-compat",qP="firebase",GP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]",KP={[Jf]:"fire-core",[EP]:"fire-core-compat",[bP]:"fire-analytics",[TP]:"fire-analytics-compat",[SP]:"fire-app-check",[IP]:"fire-app-check-compat",[kP]:"fire-auth",[AP]:"fire-auth-compat",[CP]:"fire-rtdb",[xP]:"fire-data-connect",[PP]:"fire-rtdb-compat",[RP]:"fire-fn",[NP]:"fire-fn-compat",[DP]:"fire-iid",[OP]:"fire-iid-compat",[LP]:"fire-fcm",[VP]:"fire-fcm-compat",[MP]:"fire-perf",[FP]:"fire-perf-compat",[jP]:"fire-rc",[BP]:"fire-rc-compat",[UP]:"fire-gcs",[$P]:"fire-gcs-compat",[zP]:"fire-fst",[WP]:"fire-fst-compat",[HP]:"fire-vertex","fire-js":"fire-js",[qP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,QP=new Map,ep=new Map;function dw(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function no(t){const e=t.name;if(ep.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,t);for(const n of xc.values())dw(n,t);for(const n of QP.values())dw(n,t);return!0}function Mm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new ll("app","Firebase",YP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=GP;function YT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(n||(n=qT()),!n)throw li.create("no-options");const s=xc.get(i);if(s){if(Cc(n,s.options)&&Cc(r,s.config))return s;throw li.create("duplicate-app",{appName:i})}const o=new rP(i);for(const u of ep.values())o.addComponent(u);const l=new XP(n,r,o);return xc.set(i,l),l}function XT(t=Zf){const e=xc.get(t);if(!e&&t===Zf&&qT())return YT();if(!e)throw li.create("no-app",{appName:t});return e}function ui(t,e,n){var r;let i=(r=KP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(l.join(" "));return}no(new Xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-heartbeat-database",ZP=1,Fa="firebase-heartbeat-store";let Uh=null;function JT(){return Uh||(Uh=gP(JP,ZP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),Uh}async function eR(t){try{const n=(await JT()).transaction(Fa),r=await n.objectStore(Fa).get(ZT(t));return await n.done,r}catch(e){if(e instanceof Rr)Ir.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function hw(t,e){try{const r=(await JT()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,ZT(t)),await r.done}catch(n){if(n instanceof Rr)Ir.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function ZT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=1024,nR=30*24*60*60*1e3;class rR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=nR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fw(),{heartbeatsToSend:r,unsentEntries:i}=iR(this._heartbeatsCache.heartbeats),s=Ac(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ir.warn(n),""}}}function fw(){return new Date().toISOString().substring(0,10)}function iR(t,e=tR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wx()?qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pw(t){return Ac(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){no(new Xi("platform-logger",e=>new wP(e),"PRIVATE")),no(new Xi("heartbeat",e=>new rR(e),"PRIVATE")),ui(Jf,cw,t),ui(Jf,cw,"esm2017"),ui("fire-js","")}oR("");var aR="firebase",lR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(aR,lR,"app");function Fm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uR=eb,tb=new ll("auth","Firebase",eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Lm("@firebase/auth");function cR(t,...e){Pc.logLevel<=we.WARN&&Pc.warn(`Auth (${vo}): ${t}`,...e)}function Nu(t,...e){Pc.logLevel<=we.ERROR&&Pc.error(`Auth (${vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw Bm(t,...e)}function Fn(t,...e){return Bm(t,...e)}function jm(t,e,n){const r=Object.assign(Object.assign({},uR()),{[e]:n});return new ll("auth","Firebase",r).create(e,{appName:t.name})}function ci(t){return jm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nr(t,"argument-error"),jm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tb.create(t,...e)}function ue(t,e,...n){if(!t)throw Bm(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nu(e),new Error(e)}function Sr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hR(){return mw()==="http:"||mw()==="https:"}function mw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hR()||Ux()||"connection"in navigator)?navigator.onLine:!0}function pR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=Fx()||$x()}get(){return fR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new cl(3e4,6e4);function fd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wo(t,e,n,r,i={}){return rb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ul(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return Bx()||(c.referrerPolicy="no-referrer"),nb.fetch()(sb(t,t.config.apiHost,n,l),c)})}async function rb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mR),e);try{const i=new yR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw uu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw uu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw uu(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jm(t,f,c);nr(t,f)}}catch(i){if(i instanceof Rr)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function ib(t,e,n,r,i={}){const s=await wo(t,e,n,r,i);return"mfaPendingCredential"in s&&nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function sb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Um(t.config,i):`${t.config.apiScheme}://${i}`}class yR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),gR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function ob(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wR(t,e=!1){const n=lt(t),r=await n.getIdToken(e),i=$m(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ga($h(i.auth_time)),issuedAtTime:ga($h(i.iat)),expirationTime:ga($h(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $h(t){return Number(t)*1e3}function $m(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nu("JWT malformed, contained fewer than 3 sections"),null;try{const i=HT(n);return i?JSON.parse(i):(Nu("Failed to decode base64 JWT payload"),null)}catch(i){return Nu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gw(t){const e=$m(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&_R(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _R({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ga(this.lastLoginAt),this.creationTime=ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ja(t,ob(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ab(s.providerUserInfo):[],l=bR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new np(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function TR(t){const e=lt(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ab(t){return t.map(e=>{var{providerId:n}=e,r=Fm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e){const n=await rb(t,{},async()=>{const r=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=sb(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",nb.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SR(t,e){return wo(t,"POST","/v2/accounts:revokeToken",fd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=gw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new $s;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ER(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new np(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wR(this,e)}reload(){return TR(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await ja(this,vR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,S=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:D,isAnonymous:M,providerData:j,stsTokenManager:b}=n;ue(A&&b,e,"internal-error");const v=$s.fromJSON(this.name,b);ue(typeof A=="string",e,"internal-error"),Vr(p,e.name),Vr(g,e.name),ue(typeof D=="boolean",e,"internal-error"),ue(typeof M=="boolean",e,"internal-error"),Vr(S,e.name),Vr(x,e.name),Vr(R,e.name),Vr(P,e.name),Vr(T,e.name),Vr(w,e.name);const _=new fr({uid:A,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:M,photoURL:x,phoneNumber:S,tenantId:R,stsTokenManager:v,createdAt:T,lastLoginAt:w});return j&&Array.isArray(j)&&(_.providerData=j.map(k=>Object.assign({},k))),P&&(_._redirectEventId=P),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new $s;i.updateFromServerResponse(n);const s=new fr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ab(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new $s;l.updateFromIdToken(r);const u=new fr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new np(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new Map;function pr(t){Sr(t instanceof Function,"Expected a class definition");let e=yw.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lb.type="NONE";const vw=lb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t,e,n){return`firebase:${t}:${e}:${n}`}class zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Du(this.userKey,i.apiKey,s),this.fullPersistenceKey=Du("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zs(pr(vw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||pr(vw);const o=Du(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const p=fr._fromJSON(e,f);c!==s&&(l=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new zs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new zs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ub(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pb(e))return"Blackberry";if(mb(e))return"Webos";if(cb(e))return"Safari";if((e.includes("chrome/")||db(e))&&!e.includes("edge/"))return"Chrome";if(fb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ub(t=Vt()){return/firefox\//i.test(t)}function cb(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function db(t=Vt()){return/crios\//i.test(t)}function hb(t=Vt()){return/iemobile/i.test(t)}function fb(t=Vt()){return/android/i.test(t)}function pb(t=Vt()){return/blackberry/i.test(t)}function mb(t=Vt()){return/webos/i.test(t)}function zm(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kR(t=Vt()){var e;return zm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AR(){return zx()&&document.documentMode===10}function gb(t=Vt()){return zm(t)||fb(t)||mb(t)||pb(t)||/windows phone/i.test(t)||hb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t,e=[]){let n;switch(t){case"Browser":n=ww(Vt());break;case"Worker":n=`${ww(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(t,e={}){return wo(t,"GET","/v2/passwordPolicy",fd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=6;class RR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _w(this),this.idTokenSubscription=new _w(this),this.beforeStateQueue=new CR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ob(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(ci(this));const n=e?lt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xR(this),n=new RR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&cR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function dl(t){return lt(t)}class _w{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xx(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DR(t){Hm=t}function OR(t){return Hm.loadJS(t)}function LR(){return Hm.gapiScript}function VR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t,e){const n=Mm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Cc(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function FR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jR(t,e,n){const r=dl(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=vb(e),{host:o,port:l}=BR(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),UR()}function vb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BR(t){const e=vb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ew(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ew(o)}}}function Ew(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return ib(t,"POST","/v1/accounts:signInWithIdp",fd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class Ji extends wb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Fm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ji(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Wm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends hl{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends hl{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends hl{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e){return ib(t,"POST","/v1/accounts:signUp",fd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await fr._fromIdTokenResponse(e,r,i),o=Tw(r);return new mi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Tw(r);return new mi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Tw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t){var e;if(qn(t.app))return Promise.reject(ci(t));const n=dl(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new mi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await zR(n,{returnSecureToken:!0}),i=await mi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Rr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Nc(e,n,r,i)}}function _b(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nc._fromErrorAndOperation(t,s,e,r):s})}async function WR(t,e,n=!1){const r=await ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e,n=!1){const{auth:r}=t;if(qn(r.app))return Promise.reject(ci(r));const i="reauthenticate";try{const s=await ja(t,_b(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=$m(s.idToken);ue(o,r,"internal-error");const{sub:l}=o;return ue(t.uid===l,r,"user-mismatch"),mi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e,n=!1){if(qn(t.app))return Promise.reject(ci(t));const r="signIn",i=await _b(t,r,e),s=await mi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function KR(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function QR(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function YR(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}const Dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Dc,"1"),this.storage.removeItem(Dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,JR=10;class Tb extends Eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);AR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tb.type="LOCAL";const ZR=Tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb extends Eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bb.type="SESSION";const Ib=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await eN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=qm("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function nN(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function rN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sN(){return Sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="firebaseLocalStorageDb",oN=1,Oc="firebaseLocalStorage",Ab="fbase_key";class fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([Oc],e?"readwrite":"readonly").objectStore(Oc)}function aN(){const t=indexedDB.deleteDatabase(kb);return new fl(t).toPromise()}function rp(){const t=indexedDB.open(kb,oN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Oc,{keyPath:Ab})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Oc)?e(r):(r.close(),await aN(),e(await rp()))})})}async function bw(t,e,n){const r=md(t,!0).put({[Ab]:e,value:n});return new fl(r).toPromise()}async function lN(t,e){const n=md(t,!1).get(e),r=await new fl(n).toPromise();return r===void 0?null:r.value}function Iw(t,e){const n=md(t,!0).delete(e);return new fl(n).toPromise()}const uN=800,cN=3;class Cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(sN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rN(),!this.activeServiceWorker)return;this.sender=new tN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rp();return await bw(e,Dc,"1"),await Iw(e,Dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=md(i,!1).getAll();return new fl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cb.type="LOCAL";const dN=Cb;new cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){return e?pr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends wb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hN(t){return GR(t.auth,new Gm(t),t.bypassAuthState)}function fN(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),qR(n,new Gm(t),t.bypassAuthState)}async function pN(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),WR(n,new Gm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hN;case"linkViaPopup":case"linkViaRedirect":return pN;case"reauthViaPopup":case"reauthViaRedirect":return fN;default:nr(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new cl(2e3,1e4);async function gN(t,e,n){if(qn(t.app))return Promise.reject(Fn(t,"operation-not-supported-in-this-environment"));const r=dl(t);dR(t,e,Wm);const i=xb(r,n);return new Fi(r,"signInViaPopup",e,i).executeNotNull()}class Fi extends Pb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mN.get())};e()}}Fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="pendingRedirect",Ou=new Map;class vN extends Pb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const r=await wN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wN(t,e){const n=TN(e),r=EN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _N(t,e){Ou.set(t._key(),e)}function EN(t){return pr(t._redirectPersistence)}function TN(t){return Du(yN,t.config.apiKey,t.name)}async function bN(t,e,n=!1){if(qn(t.app))return Promise.reject(ci(t));const r=dl(t),i=xb(r,e),o=await new vN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=10*60*1e3;class SN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Rb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sw(e))}saveEventToCache(e){this.cachedEventUids.add(Sw(e)),this.lastProcessedEventTime=Date.now()}}function Sw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Rb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xN=/^https?/;async function PN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AN(t);for(const n of e)try{if(RN(n))return}catch{}nr(t,"unauthorized-domain")}function RN(t){const e=tp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xN.test(n))return!1;if(CN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new cl(3e4,6e4);function kw(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DN(t){return new Promise((e,n)=>{var r,i,s;function o(){kw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kw(),n(Fn(t,"network-request-failed"))},timeout:NN.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const l=VR("iframefcb");return Xn()[l]=()=>{gapi.load?o():n(Fn(t,"network-request-failed"))},OR(`${LR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function ON(t){return Lu=Lu||DN(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new cl(5e3,15e3),VN="__/auth/iframe",MN="emulator/auth/iframe",FN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BN(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Um(e,MN):`https://${t.config.authDomain}/${VN}`,r={apiKey:e.apiKey,appName:t.name,v:vo},i=jN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ul(r).slice(1)}`}async function UN(t){const e=await ON(t),n=Xn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:BN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Fn(t,"network-request-failed"),l=Xn().setTimeout(()=>{s(o)},LN.get());function u(){Xn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zN=500,HN=600,WN="_blank",qN="http://localhost";class Aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GN(t,e,n,r=zN,i=HN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},$N),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Vt().toLowerCase();n&&(l=db(c)?WN:n),ub(c)&&(e=e||qN,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[S,x])=>`${g}${S}=${x},`,"");if(kR(c)&&l!=="_self")return KN(e||"",l),new Aw(null);const p=window.open(e||"",l,f);ue(p,t,"popup-blocked");try{p.focus()}catch{}return new Aw(p)}function KN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="__/auth/handler",YN="emulator/auth/handler",XN=encodeURIComponent("fac");async function Cw(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vo,eventId:i};if(e instanceof Wm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof hl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${XN}=${encodeURIComponent(u)}`:"";return`${JN(t)}?${ul(l).slice(1)}${c}`}function JN({config:t}){return t.emulator?Um(t,YN):`https://${t.authDomain}/${QN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="webStorageSupport";class ZN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ib,this._completeRedirectFn=bN,this._overrideRedirectResult=_N}async _openPopup(e,n,r,i){var s;Sr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Cw(e,n,r,tp(),i);return GN(e,o,qm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Cw(e,n,r,tp(),i);return nN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UN(e),r=new SN(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zh,{type:zh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[zh];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gb()||cb()||zm()}}const eD=ZN;var xw="@firebase/auth",Pw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rD(t){no(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yb(t)},c=new NR(r,i,s,u);return FR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),no(new Xi("auth-internal",e=>{const n=dl(e.getProvider("auth").getImmediate());return(r=>new tD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(xw,Pw,nD(t)),ui(xw,Pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=5*60,sD=GT("authIdTokenMaxAge")||iD;let Rw=null;const oD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sD)return;const i=n==null?void 0:n.token;Rw!==i&&(Rw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aD(t=XT()){const e=Mm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MR(t,{popupRedirectResolver:eD,persistence:[dN,ZR,Ib]}),r=GT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=oD(s.toString());QR(n,o,()=>o(n.currentUser)),KR(n,l=>o(l))}}const i=WT("auth");return i&&jR(n,`http://${i}`),n}function lD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Fn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",lD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rD("Browser");var Nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,Nb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,v){function _(){}_.prototype=v.prototype,b.D=v.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(k,I,C){for(var E=Array(arguments.length-2),O=2;O<arguments.length;O++)E[O-2]=arguments[O];return v.prototype[I].apply(k,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,_){_||(_=0);var k=Array(16);if(typeof v=="string")for(var I=0;16>I;++I)k[I]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(I=0;16>I;++I)k[I]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=b.g[0],_=b.g[1],I=b.g[2];var C=b.g[3],E=v+(C^_&(I^C))+k[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=C+(I^v&(_^I))+k[1]+3905402710&4294967295,C=v+(E<<12&4294967295|E>>>20),E=I+(_^C&(v^_))+k[2]+606105819&4294967295,I=C+(E<<17&4294967295|E>>>15),E=_+(v^I&(C^v))+k[3]+3250441966&4294967295,_=I+(E<<22&4294967295|E>>>10),E=v+(C^_&(I^C))+k[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=C+(I^v&(_^I))+k[5]+1200080426&4294967295,C=v+(E<<12&4294967295|E>>>20),E=I+(_^C&(v^_))+k[6]+2821735955&4294967295,I=C+(E<<17&4294967295|E>>>15),E=_+(v^I&(C^v))+k[7]+4249261313&4294967295,_=I+(E<<22&4294967295|E>>>10),E=v+(C^_&(I^C))+k[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=C+(I^v&(_^I))+k[9]+2336552879&4294967295,C=v+(E<<12&4294967295|E>>>20),E=I+(_^C&(v^_))+k[10]+4294925233&4294967295,I=C+(E<<17&4294967295|E>>>15),E=_+(v^I&(C^v))+k[11]+2304563134&4294967295,_=I+(E<<22&4294967295|E>>>10),E=v+(C^_&(I^C))+k[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=C+(I^v&(_^I))+k[13]+4254626195&4294967295,C=v+(E<<12&4294967295|E>>>20),E=I+(_^C&(v^_))+k[14]+2792965006&4294967295,I=C+(E<<17&4294967295|E>>>15),E=_+(v^I&(C^v))+k[15]+1236535329&4294967295,_=I+(E<<22&4294967295|E>>>10),E=v+(I^C&(_^I))+k[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=C+(_^I&(v^_))+k[6]+3225465664&4294967295,C=v+(E<<9&4294967295|E>>>23),E=I+(v^_&(C^v))+k[11]+643717713&4294967295,I=C+(E<<14&4294967295|E>>>18),E=_+(C^v&(I^C))+k[0]+3921069994&4294967295,_=I+(E<<20&4294967295|E>>>12),E=v+(I^C&(_^I))+k[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=C+(_^I&(v^_))+k[10]+38016083&4294967295,C=v+(E<<9&4294967295|E>>>23),E=I+(v^_&(C^v))+k[15]+3634488961&4294967295,I=C+(E<<14&4294967295|E>>>18),E=_+(C^v&(I^C))+k[4]+3889429448&4294967295,_=I+(E<<20&4294967295|E>>>12),E=v+(I^C&(_^I))+k[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=C+(_^I&(v^_))+k[14]+3275163606&4294967295,C=v+(E<<9&4294967295|E>>>23),E=I+(v^_&(C^v))+k[3]+4107603335&4294967295,I=C+(E<<14&4294967295|E>>>18),E=_+(C^v&(I^C))+k[8]+1163531501&4294967295,_=I+(E<<20&4294967295|E>>>12),E=v+(I^C&(_^I))+k[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=C+(_^I&(v^_))+k[2]+4243563512&4294967295,C=v+(E<<9&4294967295|E>>>23),E=I+(v^_&(C^v))+k[7]+1735328473&4294967295,I=C+(E<<14&4294967295|E>>>18),E=_+(C^v&(I^C))+k[12]+2368359562&4294967295,_=I+(E<<20&4294967295|E>>>12),E=v+(_^I^C)+k[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=C+(v^_^I)+k[8]+2272392833&4294967295,C=v+(E<<11&4294967295|E>>>21),E=I+(C^v^_)+k[11]+1839030562&4294967295,I=C+(E<<16&4294967295|E>>>16),E=_+(I^C^v)+k[14]+4259657740&4294967295,_=I+(E<<23&4294967295|E>>>9),E=v+(_^I^C)+k[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=C+(v^_^I)+k[4]+1272893353&4294967295,C=v+(E<<11&4294967295|E>>>21),E=I+(C^v^_)+k[7]+4139469664&4294967295,I=C+(E<<16&4294967295|E>>>16),E=_+(I^C^v)+k[10]+3200236656&4294967295,_=I+(E<<23&4294967295|E>>>9),E=v+(_^I^C)+k[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=C+(v^_^I)+k[0]+3936430074&4294967295,C=v+(E<<11&4294967295|E>>>21),E=I+(C^v^_)+k[3]+3572445317&4294967295,I=C+(E<<16&4294967295|E>>>16),E=_+(I^C^v)+k[6]+76029189&4294967295,_=I+(E<<23&4294967295|E>>>9),E=v+(_^I^C)+k[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=C+(v^_^I)+k[12]+3873151461&4294967295,C=v+(E<<11&4294967295|E>>>21),E=I+(C^v^_)+k[15]+530742520&4294967295,I=C+(E<<16&4294967295|E>>>16),E=_+(I^C^v)+k[2]+3299628645&4294967295,_=I+(E<<23&4294967295|E>>>9),E=v+(I^(_|~C))+k[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=C+(_^(v|~I))+k[7]+1126891415&4294967295,C=v+(E<<10&4294967295|E>>>22),E=I+(v^(C|~_))+k[14]+2878612391&4294967295,I=C+(E<<15&4294967295|E>>>17),E=_+(C^(I|~v))+k[5]+4237533241&4294967295,_=I+(E<<21&4294967295|E>>>11),E=v+(I^(_|~C))+k[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=C+(_^(v|~I))+k[3]+2399980690&4294967295,C=v+(E<<10&4294967295|E>>>22),E=I+(v^(C|~_))+k[10]+4293915773&4294967295,I=C+(E<<15&4294967295|E>>>17),E=_+(C^(I|~v))+k[1]+2240044497&4294967295,_=I+(E<<21&4294967295|E>>>11),E=v+(I^(_|~C))+k[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=C+(_^(v|~I))+k[15]+4264355552&4294967295,C=v+(E<<10&4294967295|E>>>22),E=I+(v^(C|~_))+k[6]+2734768916&4294967295,I=C+(E<<15&4294967295|E>>>17),E=_+(C^(I|~v))+k[13]+1309151649&4294967295,_=I+(E<<21&4294967295|E>>>11),E=v+(I^(_|~C))+k[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=C+(_^(v|~I))+k[11]+3174756917&4294967295,C=v+(E<<10&4294967295|E>>>22),E=I+(v^(C|~_))+k[2]+718787259&4294967295,I=C+(E<<15&4294967295|E>>>17),E=_+(C^(I|~v))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(I+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var _=v-this.blockSize,k=this.B,I=this.h,C=0;C<v;){if(I==0)for(;C<=_;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<v;)if(k[I++]=b.charCodeAt(C++),I==this.blockSize){i(this,k),I=0;break}}else for(;C<v;)if(k[I++]=b[C++],I==this.blockSize){i(this,k),I=0;break}}this.h=I,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var _=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=_&255,_/=256;for(this.u(b),b=Array(16),v=_=0;4>v;++v)for(var k=0;32>k;k+=8)b[_++]=this.g[v]>>>k&255;return b};function s(b,v){var _=l;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=v(b)}function o(b,v){this.h=v;for(var _=[],k=!0,I=b.length-1;0<=I;I--){var C=b[I]|0;k&&C==v||(_[I]=C,k=!1)}this.g=_}var l={};function u(b){return-128<=b&&128>b?s(b,function(v){return new o([v|0],0>v?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return P(c(-b));for(var v=[],_=1,k=0;b>=_;k++)v[k]=b/_|0,_*=4294967296;return new o(v,0)}function f(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return P(f(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(v,8)),k=p,I=0;I<b.length;I+=8){var C=Math.min(8,b.length-I),E=parseInt(b.substring(I,I+C),v);8>C?(C=c(Math.pow(v,C)),k=k.j(C).add(c(E))):(k=k.j(_),k=k.add(c(E)))}return k}var p=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var b=0,v=1,_=0;_<this.g.length;_++){var k=this.i(_);b+=(0<=k?k:4294967296+k)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(R(this))return"-"+P(this).toString(b);for(var v=c(Math.pow(b,6)),_=this,k="";;){var I=D(_,v).g;_=T(_,I.j(v));var C=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=I,x(_))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=T(this,b),R(b)?-1:x(b)?0:1};function P(b){for(var v=b.g.length,_=[],k=0;k<v;k++)_[k]=~b.g[k];return new o(_,~b.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],k=0,I=0;I<=v;I++){var C=k+(this.i(I)&65535)+(b.i(I)&65535),E=(C>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);k=E>>>16,C&=65535,E&=65535,_[I]=E<<16|C}return new o(_,_[_.length-1]&-2147483648?-1:0)};function T(b,v){return b.add(P(v))}t.j=function(b){if(x(this)||x(b))return p;if(R(this))return R(b)?P(this).j(P(b)):P(P(this).j(b));if(R(b))return P(this.j(P(b)));if(0>this.l(S)&&0>b.l(S))return c(this.m()*b.m());for(var v=this.g.length+b.g.length,_=[],k=0;k<2*v;k++)_[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<b.g.length;I++){var C=this.i(k)>>>16,E=this.i(k)&65535,O=b.i(I)>>>16,q=b.i(I)&65535;_[2*k+2*I]+=E*q,w(_,2*k+2*I),_[2*k+2*I+1]+=C*q,w(_,2*k+2*I+1),_[2*k+2*I+1]+=E*O,w(_,2*k+2*I+1),_[2*k+2*I+2]+=C*O,w(_,2*k+2*I+2)}for(k=0;k<v;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=v;k<2*v;k++)_[k]=0;return new o(_,0)};function w(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function A(b,v){this.g=b,this.h=v}function D(b,v){if(x(v))throw Error("division by zero");if(x(b))return new A(p,p);if(R(b))return v=D(P(b),v),new A(P(v.g),P(v.h));if(R(v))return v=D(b,P(v)),new A(P(v.g),v.h);if(30<b.g.length){if(R(b)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,k=v;0>=k.l(b);)_=M(_),k=M(k);var I=j(_,1),C=j(k,1);for(k=j(k,2),_=j(_,2);!x(k);){var E=C.add(k);0>=E.l(b)&&(I=I.add(_),C=E),k=j(k,1),_=j(_,1)}return v=T(b,I.j(v)),new A(I,v)}for(I=p;0<=b.l(v);){for(_=Math.max(1,Math.floor(b.m()/v.m())),k=Math.ceil(Math.log(_)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=c(_),E=C.j(v);R(E)||0<E.l(b);)_-=k,C=c(_),E=C.j(v);x(C)&&(C=g),I=I.add(C),b=T(b,E)}return new A(I,b)}t.A=function(b){return D(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],k=0;k<v;k++)_[k]=this.i(k)&b.i(k);return new o(_,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],k=0;k<v;k++)_[k]=this.i(k)|b.i(k);return new o(_,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],k=0;k<v;k++)_[k]=this.i(k)^b.i(k);return new o(_,this.h^b.h)};function M(b){for(var v=b.g.length+1,_=[],k=0;k<v;k++)_[k]=b.i(k)<<1|b.i(k-1)>>>31;return new o(_,b.h)}function j(b,v){var _=v>>5;v%=32;for(var k=b.g.length-_,I=[],C=0;C<k;C++)I[C]=0<v?b.i(C+_)>>>v|b.i(C+_+1)<<32-v:b.i(C+_);return new o(I,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Hi=o}).apply(typeof Nw<"u"?Nw:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,Jo,Ob,Vu,ip,Lb,Vb,Mb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var N=a[y];if(!(N in h))break e;h=h[N]}a=a[a.length-1],y=h[a],d=d(y),d!=y&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,y=!1,N={next:function(){if(!y&&h<a.length){var L=h++;return{value:d(L,a[L]),done:!1}}return y=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,y),a.apply(d,N)}}return function(){return a.apply(d,arguments)}}function g(a,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function S(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var y=h.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function x(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(y,N,L){for(var H=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)H[Pe-2]=arguments[Pe];return d.prototype[N].apply(y,H)}}function R(a){const d=a.length;if(0<d){const h=Array(d);for(let y=0;y<d;y++)h[y]=a[y];return h}return[]}function P(a,d){for(let h=1;h<arguments.length;h++){const y=arguments[h];if(u(y)){const N=a.length||0,L=y.length||0;a.length=N+L;for(let H=0;H<L;H++)a[N+H]=y[H]}else a.push(y)}}class T{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function j(a,d,h){for(const y in a)d.call(h,a[y],y,a)}function b(a,d){for(const h in a)d.call(void 0,a[h],h,a)}function v(a){const d={};for(const h in a)d[h]=a[h];return d}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,d){let h,y;for(let N=1;N<arguments.length;N++){y=arguments[N];for(h in y)a[h]=y[h];for(let L=0;L<_.length;L++)h=_[L],Object.prototype.hasOwnProperty.call(y,h)&&(a[h]=y[h])}}function I(a){var d=1;a=a.split(":");const h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function C(a){l.setTimeout(()=>{throw a},0)}function E(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class O{constructor(){this.h=this.g=null}add(d,h){const y=q.get();y.set(d,h),this.h?this.h.next=y:this.g=y,this.h=y}}var q=new T(()=>new ie,a=>a.reset());class ie{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,B=!1,Q=new O,J=()=>{const a=l.Promise.resolve(void 0);Y=()=>{a.then(ee)}};var ee=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(h){C(h)}var d=q;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}B=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var ut=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,d),l.removeEventListener("test",h,d)}catch{}return a}();function Z(a,d){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(M){e:{try{D(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:oe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Z.aa.h.call(this)}}x(Z,Se);var oe={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),Re=0;function ct(a,d,h,y,N){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!y,this.ha=N,this.key=++Re,this.da=this.fa=!1}function Ne(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,d,h,y,N){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var H=Rd(a,d,y,N);return-1<H?(d=a[H],h||(d.fa=!1)):(d=new ct(d,this.src,L,!!y,N),d.fa=h,a.push(d)),d};function ir(a,d){var h=d.type;if(h in a.g){var y=a.g[h],N=Array.prototype.indexOf.call(y,d,void 0),L;(L=0<=N)&&Array.prototype.splice.call(y,N,1),L&&(Ne(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Rd(a,d,h,y){for(var N=0;N<a.length;++N){var L=a[N];if(!L.da&&L.listener==d&&L.capture==!!h&&L.ha==y)return N}return-1}var Nd="closure_lm_"+(1e6*Math.random()|0),Dd={};function xg(a,d,h,y,N){if(Array.isArray(d)){for(var L=0;L<d.length;L++)xg(a,d[L],h,y,N);return null}return h=Ng(h),a&&a[ne]?a.K(d,h,c(y)?!!y.capture:!1,N):nS(a,d,h,!1,y,N)}function nS(a,d,h,y,N,L){if(!d)throw Error("Invalid event type");var H=c(N)?!!N.capture:!!N,Pe=Ld(a);if(Pe||(a[Nd]=Pe=new _n(a)),h=Pe.add(d,h,y,H,L),h.proxy)return h;if(y=rS(),h.proxy=y,y.src=a,y.listener=h,a.addEventListener)ut||(N=H),N===void 0&&(N=!1),a.addEventListener(d.toString(),y,N);else if(a.attachEvent)a.attachEvent(Rg(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return h}function rS(){function a(h){return d.call(a.src,a.listener,h)}const d=iS;return a}function Pg(a,d,h,y,N){if(Array.isArray(d))for(var L=0;L<d.length;L++)Pg(a,d[L],h,y,N);else y=c(y)?!!y.capture:!!y,h=Ng(h),a&&a[ne]?(a=a.i,d=String(d).toString(),d in a.g&&(L=a.g[d],h=Rd(L,h,y,N),-1<h&&(Ne(L[h]),Array.prototype.splice.call(L,h,1),L.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ld(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Rd(d,h,y,N)),(h=-1<a?d[a]:null)&&Od(h))}function Od(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ne])ir(d.i,a);else{var h=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(h,y,a.capture):d.detachEvent?d.detachEvent(Rg(h),y):d.addListener&&d.removeListener&&d.removeListener(y),(h=Ld(d))?(ir(h,a),h.h==0&&(h.src=null,d[Nd]=null)):Ne(a)}}}function Rg(a){return a in Dd?Dd[a]:Dd[a]="on"+a}function iS(a,d){if(a.da)a=!0;else{d=new Z(d,this);var h=a.listener,y=a.ha||a.src;a.fa&&Od(a),a=h.call(y,d)}return a}function Ld(a){return a=a[Nd],a instanceof _n?a:null}var Vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ng(a){return typeof a=="function"?a:(a[Vd]||(a[Vd]=function(d){return a.handleEvent(d)}),a[Vd])}function It(){pe.call(this),this.i=new _n(this),this.M=this,this.F=null}x(It,pe),It.prototype[ne]=!0,It.prototype.removeEventListener=function(a,d,h,y){Pg(this,a,d,h,y)};function Mt(a,d){var h,y=a.F;if(y)for(h=[];y;y=y.F)h.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Se(d,a);else if(d instanceof Se)d.target=d.target||a;else{var N=d;d=new Se(y,a),k(d,N)}if(N=!0,h)for(var L=h.length-1;0<=L;L--){var H=d.g=h[L];N=Sl(H,y,!0,d)&&N}if(H=d.g=a,N=Sl(H,y,!0,d)&&N,N=Sl(H,y,!1,d)&&N,h)for(L=0;L<h.length;L++)H=d.g=h[L],N=Sl(H,y,!1,d)&&N}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],y=0;y<h.length;y++)Ne(h[y]);delete a.g[d],a.h--}}this.F=null},It.prototype.K=function(a,d,h,y){return this.i.add(String(a),d,!1,h,y)},It.prototype.L=function(a,d,h,y){return this.i.add(String(a),d,!0,h,y)};function Sl(a,d,h,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,L=0;L<d.length;++L){var H=d[L];if(H&&!H.da&&H.capture==h){var Pe=H.listener,mt=H.ha||H.src;H.fa&&ir(a.i,H),N=Pe.call(mt,y)!==!1&&N}}return N&&!y.defaultPrevented}function Dg(a,d,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Og(a){a.g=Dg(()=>{a.g=null,a.i&&(a.i=!1,Og(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class sS extends pe{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Og(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bo(a){pe.call(this),this.h=a,this.g={}}x(bo,pe);var Lg=[];function Vg(a){j(a.g,function(d,h){this.g.hasOwnProperty(h)&&Od(d)},a),a.g={}}bo.prototype.N=function(){bo.aa.N.call(this),Vg(this)},bo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Md=l.JSON.stringify,oS=l.JSON.parse,aS=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Fd(){}Fd.prototype.h=null;function Mg(a){return a.h||(a.h=a.i())}function Fg(){}var Io={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jd(){Se.call(this,"d")}x(jd,Se);function Bd(){Se.call(this,"c")}x(Bd,Se);var bi={},jg=null;function kl(){return jg=jg||new It}bi.La="serverreachability";function Bg(a){Se.call(this,bi.La,a)}x(Bg,Se);function So(a){const d=kl();Mt(d,new Bg(d))}bi.STAT_EVENT="statevent";function Ug(a,d){Se.call(this,bi.STAT_EVENT,a),this.stat=d}x(Ug,Se);function Ft(a){const d=kl();Mt(d,new Ug(d,a))}bi.Ma="timingevent";function $g(a,d){Se.call(this,bi.Ma,a),this.size=d}x($g,Se);function ko(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function lS(a,d,h,y,N,L){a.info(function(){if(a.g)if(L)for(var H="",Pe=L.split("&"),mt=0;mt<Pe.length;mt++){var Te=Pe[mt].split("=");if(1<Te.length){var St=Te[0];Te=Te[1];var kt=St.split("_");H=2<=kt.length&&kt[1]=="type"?H+(St+"="+Te+"&"):H+(St+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+y+") [attempt "+N+"]: "+d+`
`+h+`
`+H})}function uS(a,d,h,y,N,L,H){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+N+"]: "+d+`
`+h+`
`+L+" "+H})}function us(a,d,h,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+dS(a,h)+(y?" "+y:"")})}function cS(a,d){a.info(function(){return"TIMEOUT: "+d})}Ao.prototype.info=function(){};function dS(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var y=h[a];if(!(2>y.length)){var N=y[1];if(Array.isArray(N)&&!(1>N.length)){var L=N[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<N.length;H++)N[H]=""}}}}return Md(h)}catch{return d}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ud;function Cl(){}x(Cl,Fd),Cl.prototype.g=function(){return new XMLHttpRequest},Cl.prototype.i=function(){return{}},Ud=new Cl;function Nr(a,d,h,y){this.j=a,this.i=d,this.l=h,this.R=y||1,this.U=new bo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hg}function Hg(){this.i=null,this.g="",this.h=!1}var Wg={},$d={};function zd(a,d,h){a.L=1,a.v=Nl(sr(d)),a.m=h,a.P=!0,qg(a,null)}function qg(a,d){a.F=Date.now(),xl(a),a.A=sr(a.v);var h=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),oy(h.i,"t",y),a.C=0,h=a.j.J,a.h=new Hg,a.g=Iy(a.j,h?d:null,!a.m),0<a.O&&(a.M=new sS(g(a.Y,a,a.g),a.O)),d=a.U,h=a.g,y=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(Lg[0]=N.toString()),N=Lg);for(var L=0;L<N.length;L++){var H=xg(h,N[L],y||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),So(),lS(a.i,a.u,a.A,a.l,a.R,a.m)}Nr.prototype.ca=function(a){a=a.target;const d=this.M;d&&or(a)==3?d.j():this.Y(a)},Nr.prototype.Y=function(a){try{if(a==this.g)e:{const kt=or(this.g);var d=this.g.Ba();const hs=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||kt!=4||d==7||(d==8||0>=hs?So(3):So(2)),Hd(this);var h=this.g.Z();this.X=h;t:if(Gg(this)){var y=fy(this.g);a="";var N=y.length,L=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),Co(this);var H="";break t}this.h.i=new l.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(L&&d==N-1)});y.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=h==200,uS(this.i,this.u,this.A,this.l,this.R,kt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,mt=this.g;if((Pe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pe)){var Te=Pe;break t}}Te=null}if(h=Te)us(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wd(this,h);else{this.o=!1,this.s=3,Ft(12),Ii(this),Co(this);break e}}if(this.P){h=!0;let xn;for(;!this.J&&this.C<H.length;)if(xn=hS(this,H),xn==$d){kt==4&&(this.s=4,Ft(14),h=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==Wg){this.s=4,Ft(15),us(this.i,this.l,H,"[Invalid Chunk]"),h=!1;break}else us(this.i,this.l,xn,null),Wd(this,xn);if(Gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||H.length!=0||this.h.h||(this.s=1,Ft(16),h=!1),this.o=this.o&&h,!h)us(this.i,this.l,H,"[Invalid Chunked Response]"),Ii(this),Co(this);else if(0<H.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Xd(St),St.M=!0,Ft(11))}}else us(this.i,this.l,H,null),Wd(this,H);kt==4&&Ii(this),this.o&&!this.J&&(kt==4?_y(this.j,this):(this.o=!1,xl(this)))}else xS(this.g),h==400&&0<H.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Ii(this),Co(this)}}}catch{}finally{}};function Gg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function hS(a,d){var h=a.C,y=d.indexOf(`
`,h);return y==-1?$d:(h=Number(d.substring(h,y)),isNaN(h)?Wg:(y+=1,y+h>d.length?$d:(d=d.slice(y,y+h),a.C=y+h,d)))}Nr.prototype.cancel=function(){this.J=!0,Ii(this)};function xl(a){a.S=Date.now()+a.I,Kg(a,a.I)}function Kg(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ko(g(a.ba,a),d)}function Hd(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Nr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(cS(this.i,this.A),this.L!=2&&(So(),Ft(17)),Ii(this),this.s=2,Co(this)):Kg(this,this.S-a)};function Co(a){a.j.G==0||a.J||_y(a.j,a)}function Ii(a){Hd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Vg(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Wd(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||qd(h.h,a))){if(!a.K&&qd(h.h,a)&&h.G==3){try{var y=h.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var N=y;if(N[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Fl(h),Vl(h);else break e;Yd(h),Ft(18)}}else h.za=N[1],0<h.za-h.T&&37500>N[2]&&h.F&&h.v==0&&!h.C&&(h.C=ko(g(h.Za,h),6e3));if(1>=Xg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else ki(h,11)}else if((a.K||h.g==a)&&Fl(h),!w(d))for(N=h.Da.g.parse(d),d=0;d<N.length;d++){let Te=N[d];if(h.T=Te[0],Te=Te[1],h.G==2)if(Te[0]=="c"){h.K=Te[1],h.ia=Te[2];const St=Te[3];St!=null&&(h.la=St,h.j.info("VER="+h.la));const kt=Te[4];kt!=null&&(h.Aa=kt,h.j.info("SVER="+h.Aa));const hs=Te[5];hs!=null&&typeof hs=="number"&&0<hs&&(y=1.5*hs,h.L=y,h.j.info("backChannelRequestTimeoutMs_="+y)),y=h;const xn=a.g;if(xn){const Bl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bl){var L=y.h;L.g||Bl.indexOf("spdy")==-1&&Bl.indexOf("quic")==-1&&Bl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Gd(L,L.h),L.h=null))}if(y.D){const Jd=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jd&&(y.ya=Jd,Le(y.I,y.D,Jd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),y=h;var H=a;if(y.qa=by(y,y.J?y.ia:null,y.W),H.K){Jg(y.h,H);var Pe=H,mt=y.L;mt&&(Pe.I=mt),Pe.B&&(Hd(Pe),xl(Pe)),y.g=H}else vy(y);0<h.i.length&&Ml(h)}else Te[0]!="stop"&&Te[0]!="close"||ki(h,7);else h.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ki(h,7):Qd(h):Te[0]!="noop"&&h.l&&h.l.ta(Te),h.v=0)}}So(4)}catch{}}var fS=class{constructor(a,d){this.g=a,this.map=d}};function Qg(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Xg(a){return a.h?1:a.g?a.g.size:0}function qd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Gd(a,d){a.g?a.g.add(d):a.h=d}function Jg(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Qg.prototype.cancel=function(){if(this.i=Zg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Zg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const h of a.g.values())d=d.concat(h.D);return d}return R(a.i)}function pS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,y=0;y<h;y++)d.push(a[y]);return d}d=[],h=0;for(y in a)d[h++]=a[y];return d}function mS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(const y in a)d[h++]=y;return d}}}function ey(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=mS(a),y=pS(a),N=y.length,L=0;L<N;L++)d.call(void 0,y[L],h&&h[L],a)}var ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gS(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var y=a[h].indexOf("="),N=null;if(0<=y){var L=a[h].substring(0,y);N=a[h].substring(y+1)}else L=a[h];d(L,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Si(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Si){this.h=a.h,Pl(this,a.j),this.o=a.o,this.g=a.g,Rl(this,a.s),this.l=a.l;var d=a.i,h=new Ro;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),ny(this,h),this.m=a.m}else a&&(d=String(a).match(ty))?(this.h=!1,Pl(this,d[1]||"",!0),this.o=xo(d[2]||""),this.g=xo(d[3]||"",!0),Rl(this,d[4]),this.l=xo(d[5]||"",!0),ny(this,d[6]||"",!0),this.m=xo(d[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Si.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Po(d,ry,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Po(d,ry,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Po(h,h.charAt(0)=="/"?wS:vS,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Po(h,ES)),a.join("")};function sr(a){return new Si(a)}function Pl(a,d,h){a.j=h?xo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Rl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function ny(a,d,h){d instanceof Ro?(a.i=d,TS(a.i,a.h)):(h||(d=Po(d,_S)),a.i=new Ro(d,a.h))}function Le(a,d,h){a.i.set(d,h)}function Nl(a){return Le(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function xo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Po(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,yS),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function yS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ry=/[#\/\?@]/g,vS=/[#\?:]/g,wS=/[#\?]/g,_S=/[#\?@]/g,ES=/#/g;function Ro(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Dr(a){a.g||(a.g=new Map,a.h=0,a.i&&gS(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Ro.prototype,t.add=function(a,d){Dr(this),this.i=null,a=cs(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function iy(a,d){Dr(a),d=cs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function sy(a,d){return Dr(a),d=cs(a,d),a.g.has(d)}t.forEach=function(a,d){Dr(this),this.g.forEach(function(h,y){h.forEach(function(N){a.call(d,N,y,this)},this)},this)},t.na=function(){Dr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let y=0;y<d.length;y++){const N=a[y];for(let L=0;L<N.length;L++)h.push(d[y])}return h},t.V=function(a){Dr(this);let d=[];if(typeof a=="string")sy(this,a)&&(d=d.concat(this.g.get(cs(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return Dr(this),this.i=null,a=cs(this,a),sy(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function oy(a,d,h){iy(a,d),0<h.length&&(a.i=null,a.g.set(cs(a,d),R(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var y=d[h];const L=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var N=L;H[y]!==""&&(N+="="+encodeURIComponent(String(H[y]))),a.push(N)}}return this.i=a.join("&")};function cs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function TS(a,d){d&&!a.j&&(Dr(a),a.i=null,a.g.forEach(function(h,y){var N=y.toLowerCase();y!=N&&(iy(this,y),oy(this,N,h))},a)),a.j=d}function bS(a,d){const h=new Ao;if(l.Image){const y=new Image;y.onload=S(Or,h,"TestLoadImage: loaded",!0,d,y),y.onerror=S(Or,h,"TestLoadImage: error",!1,d,y),y.onabort=S(Or,h,"TestLoadImage: abort",!1,d,y),y.ontimeout=S(Or,h,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function IS(a,d){const h=new Ao,y=new AbortController,N=setTimeout(()=>{y.abort(),Or(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(L=>{clearTimeout(N),L.ok?Or(h,"TestPingServer: ok",!0,d):Or(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),Or(h,"TestPingServer: error",!1,d)})}function Or(a,d,h,y,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),y(h)}catch{}}function SS(){this.g=new aS}function kS(a,d,h){const y=h||"";try{ey(a,function(N,L){let H=N;c(N)&&(H=Md(N)),d.push(y+L+"="+encodeURIComponent(H))})}catch(N){throw d.push(y+"type="+encodeURIComponent("_badmap")),N}}function Dl(a){this.l=a.Ub||null,this.j=a.eb||!1}x(Dl,Fd),Dl.prototype.g=function(){return new Ol(this.l,this.j)},Dl.prototype.i=function(a){return function(){return a}}({});function Ol(a,d){It.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ol,It),t=Ol.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Do(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ay(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ay(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?No(this):Do(this),this.readyState==3&&ay(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,No(this))},t.Qa=function(a){this.g&&(this.response=a,No(this))},t.ga=function(){this.g&&No(this)};function No(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Do(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Do(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ly(a){let d="";return j(a,function(h,y){d+=y,d+=":",d+=h,d+=`\r
`}),d}function Kd(a,d,h){e:{for(y in h){var y=!1;break e}y=!0}y||(h=ly(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Le(a,d,h))}function qe(a){It.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(qe,It);var AS=/^https?$/i,CS=["POST","PUT"];t=qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ud.g(),this.v=this.o?Mg(this.o):Mg(Ud),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(L){uy(this,L);return}if(a=h||"",h=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var N in y)h.set(N,y[N]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())h.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(h.keys()).find(L=>L.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(CS,d,void 0))||y||N||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of h)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hy(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){uy(this,L)}};function uy(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,cy(a),Ll(a)}function cy(a){a.A||(a.A=!0,Mt(a,"complete"),Mt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Mt(this,"complete"),Mt(this,"abort"),Ll(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ll(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dy(this):this.bb())},t.bb=function(){dy(this)};function dy(a){if(a.h&&typeof o<"u"&&(!a.v[1]||or(a)!=4||a.Z()!=2)){if(a.u&&or(a)==4)Dg(a.Ea,0,a);else if(Mt(a,"readystatechange"),or(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var y;if(y=H===0){var N=String(a.D).match(ty)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),y=!AS.test(N?N.toLowerCase():"")}h=y}if(h)Mt(a,"complete"),Mt(a,"success");else{a.m=6;try{var L=2<or(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",cy(a)}}finally{Ll(a)}}}}function Ll(a,d){if(a.g){hy(a);const h=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Mt(a,"ready");try{h.onreadystatechange=y}catch{}}}function hy(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function or(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),oS(d)}};function fy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xS(a){const d={};a=(a.g&&2<=or(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var h=I(a[y]);const N=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const L=d[N]||[];d[N]=L,L.push(h)}b(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function py(a){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Qg(a&&a.concurrentRequestLimit),this.Da=new SS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=py.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,y){Ft(0),this.W=a,this.H=d||{},h&&y!==void 0&&(this.H.OSID=h,this.H.OAID=y),this.F=this.X,this.I=by(this,null,this.W),Ml(this)};function Qd(a){if(my(a),a.G==3){var d=a.U++,h=sr(a.I);if(Le(h,"SID",a.K),Le(h,"RID",d),Le(h,"TYPE","terminate"),Lo(a,h),d=new Nr(a,a.j,d),d.L=2,d.v=Nl(sr(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=d.v,h=!0),h||(d.g=Iy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xl(d)}Ty(a)}function Vl(a){a.g&&(Xd(a),a.g.cancel(),a.g=null)}function my(a){Vl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Fl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ml(a){if(!Yg(a.h)&&!a.s){a.s=!0;var d=a.Ga;Y||J(),B||(Y(),B=!0),Q.add(d,a),a.B=0}}function PS(a,d){return Xg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ko(g(a.Ga,a,d),Ey(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new Nr(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(N.H=L,L=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var y=this.i[h];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=yy(this,N,d),h=sr(this.I),Le(h,"RID",a),Le(h,"CVER",22),this.D&&Le(h,"X-HTTP-Session-Id",this.D),Lo(this,h),L&&(this.O?d="headers="+encodeURIComponent(String(ly(L)))+"&"+d:this.m&&Kd(h,this.m,L)),Gd(this.h,N),this.Ua&&Le(h,"TYPE","init"),this.P?(Le(h,"$req",d),Le(h,"SID","null"),N.T=!0,zd(N,h,null)):zd(N,h,d),this.G=2}}else this.G==3&&(a?gy(this,a):this.i.length==0||Yg(this.h)||gy(this))};function gy(a,d){var h;d?h=d.l:h=a.U++;const y=sr(a.I);Le(y,"SID",a.K),Le(y,"RID",h),Le(y,"AID",a.T),Lo(a,y),a.m&&a.o&&Kd(y,a.m,a.o),h=new Nr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=yy(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Gd(a.h,h),zd(h,y,d)}function Lo(a,d){a.H&&j(a.H,function(h,y){Le(d,y,h)}),a.l&&ey({},function(h,y){Le(d,y,h)})}function yy(a,d,h){h=Math.min(a.i.length,h);var y=a.l?g(a.l.Na,a.l,a):null;e:{var N=a.i;let L=-1;for(;;){const H=["count="+h];L==-1?0<h?(L=N[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let Pe=!0;for(let mt=0;mt<h;mt++){let Te=N[mt].g;const St=N[mt].map;if(Te-=L,0>Te)L=Math.max(0,N[mt].g-100),Pe=!1;else try{kS(St,H,"req"+Te+"_")}catch{y&&y(St)}}if(Pe){y=H.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,y}function vy(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Y||J(),B||(Y(),B=!0),Q.add(d,a),a.v=0}}function Yd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ko(g(a.Fa,a),Ey(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,wy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ko(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Vl(this),wy(this))};function Xd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function wy(a){a.g=new Nr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=sr(a.qa);Le(d,"RID","rpc"),Le(d,"SID",a.K),Le(d,"AID",a.T),Le(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Le(d,"TO",a.ja),Le(d,"TYPE","xmlhttp"),Lo(a,d),a.m&&a.o&&Kd(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Nl(sr(d)),h.m=null,h.P=!0,qg(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Vl(this),Yd(this),Ft(19))};function Fl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function _y(a,d){var h=null;if(a.g==d){Fl(a),Xd(a),a.g=null;var y=2}else if(qd(a.h,d))h=d.D,Jg(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var N=a.B;y=kl(),Mt(y,new $g(y,h)),Ml(a)}else vy(a);else if(N=d.s,N==3||N==0&&0<d.X||!(y==1&&PS(a,d)||y==2&&Yd(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),N){case 1:ki(a,5);break;case 4:ki(a,10);break;case 3:ki(a,6);break;default:ki(a,2)}}}function Ey(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function ki(a,d){if(a.j.info("Error code "+d),d==2){var h=g(a.fb,a),y=a.Xa;const N=!y;y=new Si(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Pl(y,"https"),Nl(y),N?bS(y.toString(),h):IS(y.toString(),h)}else Ft(2);a.G=0,a.l&&a.l.sa(d),Ty(a),my(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Ty(a){if(a.G=0,a.ka=[],a.l){const d=Zg(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function by(a,d,h){var y=h instanceof Si?sr(h):new Si(h);if(y.g!="")d&&(y.g=d+"."+y.g),Rl(y,y.s);else{var N=l.location;y=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var L=new Si(null);y&&Pl(L,y),d&&(L.g=d),N&&Rl(L,N),h&&(L.l=h),y=L}return h=a.D,d=a.ya,h&&d&&Le(y,h,d),Le(y,"VER",a.la),Lo(a,y),y}function Iy(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new qe(new Dl({eb:h})):new qe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sy(){}t=Sy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(a,d){return new sn(a,d)};function sn(a,d){It.call(this),this.g=new py(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ds(this)}x(sn,It),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Qd(this.g)},sn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Md(a),a=h);d.i.push(new fS(d.Ya++,a)),d.G==3&&Ml(d)},sn.prototype.N=function(){this.g.l=null,delete this.j,Qd(this.g),delete this.g,sn.aa.N.call(this)};function ky(a){jd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}x(ky,jd);function Ay(){Bd.call(this),this.status=1}x(Ay,Bd);function ds(a){this.g=a}x(ds,Sy),ds.prototype.ua=function(){Mt(this.g,"a")},ds.prototype.ta=function(a){Mt(this.g,new ky(a))},ds.prototype.sa=function(a){Mt(this.g,new Ay)},ds.prototype.ra=function(){Mt(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Mb=function(){return new jl},Vb=function(){return kl()},Lb=bi,ip={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Vu=Al,zg.COMPLETE="complete",Ob=zg,Fg.EventType=Io,Io.OPEN="a",Io.CLOSE="b",Io.ERROR="c",Io.MESSAGE="d",It.prototype.listen=It.prototype.K,Jo=Fg,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Db=qe}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});const Dw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Lm("@firebase/firestore");function Ho(){return Zi.logLevel}function X(t,...e){if(Zi.logLevel<=we.DEBUG){const n=e.map(Km);Zi.debug(`Firestore (${_o}): ${t}`,...n)}}function kr(t,...e){if(Zi.logLevel<=we.ERROR){const n=e.map(Km);Zi.error(`Firestore (${_o}): ${t}`,...n)}}function ro(t,...e){if(Zi.logLevel<=we.WARN){const n=e.map(Km);Zi.warn(`Firestore (${_o}): ${t}`,...n)}}function Km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: `+t;throw kr(e),new Error(e)}function Ce(t,e){t||ce()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class cD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dD{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new di,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new di)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new Fb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Rt(e)}}class hD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new pD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function io(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new Ze(0,0))}static max(){return new he(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends Ba{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const yD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends Ba{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return yD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Me.fromString(e))}static fromName(e){return new te(Me.fromString(e).popFirst(5))}static empty(){return new te(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Me(e.slice()))}}function vD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new gi(i,te.empty(),e)}function wD(t){return new gi(t.readTime,t.key,-1)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(he.min(),te.empty(),-1)}static max(){return new gi(he.max(),te.empty(),-1)}}function _D(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==ED)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qm.oe=-1;function gd(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function ID(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=s??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lw(this.data.getIterator())}getIteratorFrom(e){return new Lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class Lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Et(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ub("Invalid base64 string: "+s):s}}(e);return new bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const SD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=SD.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xm(t){const e=t.mapValue.fields.__previous_value__;return Ym(e)?Xm(e):e}function Ua(t){const e=yi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class $a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu={mapValue:{}};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ym(t)?4:CD(t)?9007199254740991:AD(t)?10:11:ce()}function rr(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=yi(i.timestampValue),l=yi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),l=Xe(s.doubleValue);return o===l?Lc(o)===Lc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return io(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Ow(o)!==Ow(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!rr(o[u],l[u])))return!1;return!0}(t,e);default:return ce()}}function za(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Xe(s.integerValue||s.doubleValue),u=Xe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Vw(t.timestampValue,e.timestampValue);case 4:return Vw(Ua(t),Ua(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){const l=es(s),u=es(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=be(l[c],u[c]);if(f!==0)return f}return be(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=be(Xe(s.latitude),Xe(o.latitude));return l!==0?l:be(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,f;const p=s.fields||{},g=o.fields||{},S=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,R=be(((c=S==null?void 0:S.values)===null||c===void 0?void 0:c.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Mw(S,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===hu.mapValue&&o===hu.mapValue)return 0;if(s===hu.mapValue)return 1;if(o===hu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=be(u[p],f[p]);if(g!==0)return g;const S=so(l[u[p]],c[f[p]]);if(S!==0)return S}return be(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ce()}}function Vw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=yi(t),r=yi(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function Mw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=so(n[i],r[i]);if(s)return s}return be(n.length,r.length)}function oo(t){return sp(t)}function sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sp(n.fields[o])}`;return i+"}"}(t.mapValue):ce()}function Fw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function op(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function jw(t){return!!t&&"nullValue"in t}function Bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mu(t){return!!t&&"mapValue"in t}function AD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ya(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Mu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){os(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jt(ya(this.value))}}function $b(t){const e=[];return os(t.fields,(n,r)=>{const i=new wt([n]);if(Mu(r)){const s=$b(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,he.min(),he.min(),he.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,i){return new Dt(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new Dt(e,2,n,he.min(),he.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,he.min(),he.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.position=e,this.inclusive=n}}function Uw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=so(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $w(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{}class st extends zb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RD(e,n,r):n==="array-contains"?new OD(e,r):n==="in"?new LD(e,r):n==="not-in"?new VD(e,r):n==="array-contains-any"?new MD(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ND(e,r):new DD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(so(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends zb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Un(e,n)}matches(e){return Hb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hb(t){return t.op==="and"}function Wb(t){return PD(t)&&Hb(t)}function PD(t){for(const e of t.filters)if(e instanceof Un)return!1;return!0}function ap(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+oo(t.value);if(Wb(t))return t.filters.map(e=>ap(e)).join(",");{const e=t.filters.map(n=>ap(n)).join(",");return`${t.op}(${e})`}}function qb(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&rr(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&qb(o,i.filters[l]),!0):!1}(t,e):void ce()}function Gb(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(Gb).join(" ,")+"}"}(t):"Filter"}class RD extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class ND extends st{constructor(e,n){super(e,"in",n),this.keys=Kb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DD extends st{constructor(e,n){super(e,"not-in",n),this.keys=Kb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Kb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class OD extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&za(n.arrayValue,this.value)}}class LD extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&za(this.value.arrayValue,n)}}class VD extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!za(this.value.arrayValue,n)}}class MD extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function zw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new FD(t,e,n,r,i,s,o)}function Zm(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ap(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oo(r)).join(",")),e.ue=n}return e.ue}function eg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$w(t.startAt,e.startAt)&&$w(t.endAt,e.endAt)}function lp(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jD(t,e,n,r,i,s,o,l){return new gl(t,e,n,r,i,s,o,l)}function tg(t){return new gl(t)}function Hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qb(t){return t.collectionGroup!==null}function va(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Et(wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Mc(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new Mc(wt.keyField(),r))}return e.ce}function Jn(t){const e=fe(t);return e.le||(e.le=BD(e,va(t))),e.le}function BD(t,e){if(t.limitType==="F")return zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Mc(i.field,s)});const n=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;return zw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function up(t,e){const n=t.filters.concat([e]);return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cp(t,e,n){return new gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yd(t,e){return eg(Jn(t),Jn(e))&&t.limitType===e.limitType}function Yb(t){return`${Zm(Jn(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Gb(i)).join(", ")}]`),gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>oo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>oo(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function vd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Uw(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,va(r),i)||r.endAt&&!function(o,l,u){const c=Uw(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,va(r),i))}(t,e)}function UD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xb(t){return(e,n)=>{let r=!1;for(const i of va(t)){const s=$D(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $D(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?so(u,c):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=new We(te.comparator);function Ar(){return zD}const Jb=new We(te.comparator);function Zo(...t){let e=Jb;for(const n of t)e=e.insert(n.key,n);return e}function Zb(t){let e=Jb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return wa()}function eI(){return wa()}function wa(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const HD=new We(te.comparator),WD=new Et(te.comparator);function ye(...t){let e=WD;for(const n of t)e=e.add(n);return e}const qD=new Et(be);function GD(){return qD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function tI(t){return{integerValue:""+t}}function KD(t,e){return ID(e)?tI(e):ng(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function QD(t,e,n){return t instanceof Fc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ym(s)&&(s=Xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ha?rI(t,e):t instanceof Wa?iI(t,e):function(i,s){const o=nI(i,s),l=Ww(o)+Ww(i.Pe);return op(o)&&op(i.Pe)?tI(l):ng(i.serializer,l)}(t,e)}function YD(t,e,n){return t instanceof Ha?rI(t,e):t instanceof Wa?iI(t,e):n}function nI(t,e){return t instanceof jc?function(r){return op(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fc extends wd{}class Ha extends wd{constructor(e){super(),this.elements=e}}function rI(t,e){const n=sI(e);for(const r of t.elements)n.some(i=>rr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Wa extends wd{constructor(e){super(),this.elements=e}}function iI(t,e){let n=sI(e);for(const r of t.elements)n=n.filter(i=>!rr(i,r));return{arrayValue:{values:n}}}class jc extends wd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ww(t){return Xe(t.integerValue||t.doubleValue)}function sI(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ha&&i instanceof Ha||r instanceof Wa&&i instanceof Wa?io(r.elements,i.elements,rr):r instanceof jc&&i instanceof jc?rr(r.Pe,i.Pe):r instanceof Fc&&i instanceof Fc}(t.transform,e.transform)}class JD{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _d{}function oI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ed(t.key,zt.none()):new yl(t.key,t.data,zt.none());{const n=t.data,r=Jt.empty();let i=new Et(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(t.key,r,new cn(i.toArray()),zt.none())}}function ZD(t,e,n){t instanceof yl?function(i,s,o){const l=i.value.clone(),u=Gw(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,s,o){if(!Fu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Gw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(aI(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof yl?function(s,o,l,u){if(!Fu(s.precondition,o))return l;const c=s.value.clone(),f=Kw(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(s,o,l,u){if(!Fu(s.precondition,o))return l;const c=Kw(s.fieldTransforms,u,o),f=o.data;return f.setAll(aI(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Fu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nI(r.transform,i||null);s!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,s))}return n||null}function qw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&io(r,i,(s,o)=>XD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yl extends _d{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends _d{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gw(t,e,n){const r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,YD(o,l,n[i]))}return r}function Kw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,QD(s,o,e))}return r}class Ed extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tO extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ZD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=oI(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,(n,r)=>qw(n,r))&&io(this.baseMutations,e.baseMutations,(n,r)=>qw(n,r))}}class rg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return HD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,_e;function sO(t){switch(t){default:return ce();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function lI(t){if(t===void 0)return kr("GRPC error has no .code"),F.UNKNOWN;switch(t){case nt.OK:return F.OK;case nt.CANCELLED:return F.CANCELLED;case nt.UNKNOWN:return F.UNKNOWN;case nt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case nt.INTERNAL:return F.INTERNAL;case nt.UNAVAILABLE:return F.UNAVAILABLE;case nt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case nt.NOT_FOUND:return F.NOT_FOUND;case nt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case nt.ABORTED:return F.ABORTED;case nt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case nt.DATA_LOSS:return F.DATA_LOSS;default:return ce()}}(_e=nt||(nt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Hi([4294967295,4294967295],0);function Qw(t){const e=oO().encode(t),n=new Nb;return n.update(e),new Uint8Array(n.digest())}function Yw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([i,s],0)]}class ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Hi.fromNumber(r)));return i.compare(aO)===1&&(i=new Hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Qw(e),[r,i]=Yw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ig(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Qw(e),[r,i]=Yw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Td(he.min(),i,new We(be),Ar(),ye())}}class vl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vl(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uI{constructor(e,n){this.targetId=e,this.me=n}}class cI{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xw{constructor(){this.fe=0,this.ge=Zw(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new vl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ar(),this.qe=Jw(),this.Qe=new We(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(lp(s))if(r===0){const o=new te(s.path);this.Ue(n,o,Dt.newNoDocument(o,he.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=es(r).toUint8Array()}catch(u){if(u instanceof Ub)return ro("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ig(o,i,s)}catch(u){return ro(u instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&lp(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Dt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Td(e,n,this.Qe,this.ke,r);return this.ke=Ar(),this.qe=Jw(),this.Qe=new We(be),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Xw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Jw(){return new We(te.comparator)}function Zw(){return new We(te.comparator)}const uO={asc:"ASCENDING",desc:"DESCENDING"},cO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dO={and:"AND",or:"OR"};class hO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dp(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function Bc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fO(t,e){return Bc(t,e.toTimestamp())}function Zn(t){return Ce(!!t),he.fromTimestamp(function(n){const r=yi(n);return new Ze(r.seconds,r.nanos)}(t))}function sg(t,e){return hp(t,e).canonicalString()}function hp(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hI(t){const e=Me.fromString(t);return Ce(yI(e)),e}function fp(t,e){return sg(t.databaseId,e.path)}function Hh(t,e){const n=hI(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(pI(n))}function fI(t,e){return sg(t.databaseId,e)}function pO(t){const e=hI(t);return e.length===4?Me.emptyPath():pI(e)}function pp(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pI(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function e_(t,e,n){return{name:fp(t,e),fields:n.value.mapValue.fields}}function mO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(Ce(f===void 0||typeof f=="string"),bt.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),bt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?F.UNKNOWN:lI(c.code);return new K(f,c.message||"")}(o);n=new cI(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hh(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):he.min(),l=new Jt({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new ju(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hh(t,r.document),s=r.readTime?Zn(r.readTime):he.min(),o=Dt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ju([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hh(t,r.document),s=r.removedTargetIds||[];n=new ju([],s,i,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iO(i,s),l=r.targetId;n=new uI(l,o)}}return n}function gO(t,e){let n;if(e instanceof yl)n={update:e_(t,e.key,e.value)};else if(e instanceof Ed)n={delete:fp(t,e.key)};else if(e instanceof Ti)n={update:e_(t,e.key,e.data),updateMask:SO(e.fieldMask)};else{if(!(e instanceof tO))return ce();n={verify:fp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce()}(t,e.precondition)),n}function yO(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(he.min())&&(o=Zn(s)),new JD(o,i.transformResults||[])}(n,e))):[]}function vO(t,e){return{documents:[fI(t,e.path)]}}function wO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fI(t,i);const s=function(c){if(c.length!==0)return gI(Un.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:vs(g.field),direction:TO(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=dp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _O(t){let e=pO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=mI(p);return g instanceof Un&&Wb(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(x){return new Mc(ws(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,gd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,S=p.values||[];return new Vc(S,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,S=p.values||[];return new Vc(S,g)}(n.endAt)),jD(e,i,o,s,l,"F",u,c)}function EO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ws(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ws(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ws(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ws(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return st.create(ws(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>mI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function TO(t){return uO[t]}function bO(t){return cO[t]}function IO(t){return dO[t]}function vs(t){return{fieldPath:t.canonicalString()}}function ws(t){return wt.fromServerFormat(t.fieldPath)}function gI(t){return t instanceof st?function(n){if(n.op==="=="){if(Bw(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(jw(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bw(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(jw(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:bO(n.op),value:n.value}}}(t):t instanceof Un?function(n){const r=n.getFilters().map(i=>gI(i));return r.length===1?r[0]:{compositeFilter:{op:IO(n.op),filters:r}}}(t):ce()}function SO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,i,s=he.min(),o=he.min(),l=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.ct=e}}function AO(t){const e=_O({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.un=new xO}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(gi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class xO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ao(0)}static kn(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_a(r.mutation,i,cn.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Ar();const o=wa(),l=function(){return wa()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Ti)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),_a(f.mutation,c,f.mutation.getFieldMask(),Ze.now())):o.set(c.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return l.set(c,new RO(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=wa();let i=new We((o,l)=>o-l),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||cn.empty();f=l.applyToLocalView(c,f),r.set(u,f);const p=(i.get(l.batchId)||ye()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,p=eI();f.forEach(g=>{if(!s.has(g)){const S=oI(n.get(g),r.get(g));S!==null&&p.set(g,S),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ji());let l=-1,u=s;return o.next(c=>U.forEach(c,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ye())).next(f=>({batchId:l,changes:Zb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=Zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Zo();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,u=>{const c=function(p,g){return new gl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Dt.newInvalidDocument(f)))});let l=Zo();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&_a(f.mutation,c,cn.empty(),Ze.now()),vd(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:AO(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.overlays=new We(te.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ji();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ji(),s=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=ji(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=ji(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return U.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rO(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Tr=new Et(dt.Er),this.dr=new Et(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Me([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Me([])),r=new dt(n,e),i=new dt(n,e+1);let s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(dt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nO(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new dt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(be);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new dt(new te(s),0);let l=new Et(be);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.Mr=e,this.docs=function(){return new We(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,l=new te(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_D(wD(f),r)<=0||(i.has(f.key)||vd(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ce()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FO(this)}getSize(e){return U.resolve(this.size)}}class FO extends PO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.persistence=e,this.Nr=new Eo(n=>Zm(n),eg),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new og,this.targetCount=0,this.kr=ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qm(0),this.Kr=!1,this.Kr=!0,this.$r=new LO,this.referenceDelegate=e(this),this.Ur=new jO(this),this.indexManager=new CO,this.remoteDocumentCache=function(i){return new MO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kO(n),this.Gr=new DO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new UO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class UO extends TD{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Jr=new og,this.Yr=null}static Zr(e){return new ag(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new lg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Hx()?8:bD(Vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $O;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ho()<=we.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ho()<=we.DEBUG&&X("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ho()<=we.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):U.resolve())}Yi(e,n){if(Hw(n))return U.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cp(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,cp(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return Hw(n)||i.isEqual(he.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Ho()<=we.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(n)),this.rs(e,o,n,vD(i,-1)).next(l=>l))})}ts(e,n){let r=new Et(Xb(e));return n.forEach((i,s)=>{vd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ho()<=we.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ys(n)),this.Ji.getDocumentsMatchingQuery(e,n,gi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new We(be),this._s=new Eo(s=>Zm(s),eg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WO(t,e,n,r){return new HO(t,e,n,r)}async function vI(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ye();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function qO(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const p=c.batch,g=p.keys();let S=U.resolve();return g.forEach(x=>{S=S.next(()=>f.getEntry(u,x)).next(R=>{const P=c.docVersions.get(x);Ce(P!==null),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),f.addEntry(R)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ye();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wI(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GO(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let S=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(bt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),i=i.insert(p,S),function(R,P,T){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,S,f)&&l.push(n.Ur.updateTargetData(s,S))});let u=Ar(),c=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(KO(s,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(he.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function KO(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(he.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function QO(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YO(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function mp(t,e,n){const r=fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ml(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function t_(t,e,n){const r=fe(t);let i=he.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=fe(u),g=p._s.get(f);return g!==void 0?U.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)}(r,o,Jn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:he.min(),n?s:ye())).next(l=>(XO(r,UD(e),l),{documents:l,Ts:s})))}function XO(t,e,n){let r=t.us.get(e)||he.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class n_{constructor(){this.activeTargetIds=GD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JO{constructor(){this.so=new n_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new n_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function Wh(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class nL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Wh(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(f=>(X("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ro("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=eL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Wh();return new Promise((o,l)=>{const u=new Db;u.setWithCredentials(!0),u.listenOnce(Ob.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:const f=u.getResponseJson();X(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Vu.TIMEOUT:X(Pt,`RPC '${e}' ${s} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const p=u.getStatus();if(X(Pt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const x=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(S.status);l(new K(x,S.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{X(Pt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);X(Pt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Wh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mb(),l=Vb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");X(Pt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,S=!1;const x=new tL({Io:P=>{S?X(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(X(Pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),X(Pt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},To:()=>p.close()}),R=(P,T,w)=>{P.listen(T,A=>{try{w(A)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,Jo.EventType.OPEN,()=>{S||(X(Pt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),R(p,Jo.EventType.CLOSE,()=>{S||(S=!0,X(Pt,`RPC '${e}' stream ${i} transport closed`),x.So())}),R(p,Jo.EventType.ERROR,P=>{S||(S=!0,ro(Pt,`RPC '${e}' stream ${i} transport errored:`,P),x.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),R(p,Jo.EventType.MESSAGE,P=>{var T;if(!S){const w=P.data[0];Ce(!!w);const A=w,D=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(D){X(Pt,`RPC '${e}' stream ${i} received error:`,D);const M=D.status;let j=function(_){const k=nt[_];if(k!==void 0)return lI(k)}(M),b=D.message;j===void 0&&(j=F.INTERNAL,b="Unknown error status: "+M+" with message "+D.message),S=!0,x.So(new K(j,b)),p.close()}else X(Pt,`RPC '${e}' stream ${i} received:`,w),x.bo(w)}}),R(l,Lb.STAT_EVENT,P=>{P.stat===ip.PROXY?X(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===ip.NOPROXY&&X(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){return new hO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _I(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rL extends EI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mO(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Zn(o.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=pp(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=lp(u)?{documents:vO(s,u)}:{query:wO(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dI(s,o.resumeToken);const c=dp(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=Bc(s,o.snapshotVersion.toTimestamp());const c=dp(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=EO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.a_(n)}}class iL extends EI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yO(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=pp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gO(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,hp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,hp(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class oL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{as(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=fe(u);c.L_.add(4),await wl(c),c.q_.set("Unknown"),c.L_.delete(4),await Id(c)}(this))})}),this.q_=new oL(r,i)}}async function Id(t){if(as(t))for(const e of t.B_)await e(!0)}async function wl(t){for(const e of t.B_)await e(!1)}function TI(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hg(n)?dg(n):To(n).r_()&&cg(n,e))}function ug(t,e){const n=fe(t),r=To(n);n.N_.delete(e),r.r_()&&bI(n,e),n.N_.size===0&&(r.r_()?r.o_():as(n)&&n.q_.set("Unknown"))}function cg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).A_(e)}function bI(t,e){t.Q_.xe(e),To(t).R_(e)}function dg(t){t.Q_=new lO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.q_.v_()}function hg(t){return as(t)&&!To(t).n_()&&t.N_.size>0}function as(t){return fe(t).L_.size===0}function II(t){t.Q_=void 0}async function lL(t){t.q_.set("Online")}async function uL(t){t.N_.forEach((e,n)=>{cg(t,e)})}async function cL(t,e){II(t),hg(t)?(t.q_.M_(e),dg(t)):t.q_.set("Unknown")}async function dL(t,e,n){if(t.q_.set("Online"),e instanceof cI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uc(t,r)}else if(e instanceof ju?t.Q_.Ke(e):e instanceof uI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await wI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(bt.EMPTY_BYTE_STRING,f.snapshotVersion)),bI(s,u);const p=new Jr(f.target,u,c,f.sequenceNumber);cg(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Uc(t,r)}}async function Uc(t,e,n){if(!ml(e))throw e;t.L_.add(1),await wl(t),t.q_.set("Offline"),n||(n=()=>wI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Id(t)})}function SI(t,e){return e().catch(n=>Uc(t,n,e))}async function Sd(t){const e=fe(t),n=vi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hL(e);)try{const i=await QO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fL(e,i)}catch(i){await Uc(e,i)}kI(e)&&AI(e)}function hL(t){return as(t)&&t.O_.length<10}function fL(t,e){t.O_.push(e);const n=vi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kI(t){return as(t)&&!vi(t).n_()&&t.O_.length>0}function AI(t){vi(t).start()}async function pL(t){vi(t).p_()}async function mL(t){const e=vi(t);for(const n of t.O_)e.m_(n.mutations)}async function gL(t,e,n){const r=t.O_.shift(),i=rg.from(r,e,n);await SI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sd(t)}async function yL(t,e){e&&vi(t).V_&&await async function(r,i){if(function(o){return sO(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();vi(r).s_(),await SI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sd(r)}}(t,e),kI(t)&&AI(t)}async function i_(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=as(n);n.L_.add(3),await wl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Id(n)}async function vL(t,e){const n=fe(t);e?(n.L_.delete(2),await Id(n)):e||(n.L_.add(2),await wl(n),n.q_.set("Unknown"))}function To(t){return t.K_||(t.K_=function(n,r,i){const s=fe(n);return s.w_(),new rL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:lL.bind(null,t),Ro:uL.bind(null,t),mo:cL.bind(null,t),d_:dL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),hg(t)?dg(t):t.q_.set("Unknown")):(await t.K_.stop(),II(t))})),t.K_}function vi(t){return t.U_||(t.U_=function(n,r,i){const s=fe(n);return s.w_(),new iL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pL.bind(null,t),mo:yL.bind(null,t),f_:mL.bind(null,t),g_:gL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new fg(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(t,e){if(kr("AsyncQueue",`${e}: ${t}`),ml(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new Ws(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.W_=new We(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new lo(e,n,Ws.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _L{constructor(){this.queries=o_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=o_(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function o_(){return new Eo(t=>Yb(t),yd)}async function CI(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new wL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=pg(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&mg(n)}async function xI(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EL(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&mg(n)}function TL(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function mg(t){t.Y_.forEach(e=>{e.next()})}var gp,a_;(a_=gp||(gp={})).ea="default",a_.Cache="cache";class PI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.key=e}}class NI{constructor(e){this.key=e}}class bL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=Xb(e),this.Ra=new Ws(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new s_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),S=vd(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let P=!1;g&&S?g.data.isEqual(S.data)?x!==R&&(r.track({type:3,doc:S}),P=!0):this.ga(g,S)||(r.track({type:2,doc:S}),P=!0,(u&&this.Aa(S,u)>0||c&&this.Aa(S,c)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),P=!0):g&&!S&&(r.track({type:1,doc:g}),P=!0,(u||c)&&(l=!0)),P&&(S?(o=o.add(S),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(S,x){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return R(S)-R(x)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new lo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new s_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new NI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new RI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SL{constructor(e){this.key=e,this.va=!1}}class kL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Eo(l=>Yb(l),yd),this.Ma=new Map,this.xa=new Set,this.Oa=new We(te.comparator),this.Na=new Map,this.La=new og,this.Ba={},this.ka=new Map,this.qa=ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AL(t,e,n=!0){const r=FI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await DI(r,e,n,!0),i}async function CL(t,e){const n=FI(t);await DI(n,e,!0,!1)}async function DI(t,e,n,r){const i=await YO(t.localStore,Jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await xL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&TI(t.remoteStore,i),l}async function xL(t,e,n,r,i){t.Ka=(p,g,S)=>async function(R,P,T,w){let A=P.view.ma(T);A.ns&&(A=await t_(R.localStore,P.query,!1).then(({documents:b})=>P.view.ma(b,A)));const D=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(A,R.isPrimaryClient,D,M);return u_(R,P.targetId,j.wa),j.snapshot}(t,p,g,S);const s=await t_(t.localStore,e,!0),o=new bL(e,s.Ts),l=o.ma(s.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);u_(t,n,c.wa);const f=new IL(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function PL(t,e,n){const r=fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!yd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ug(r.remoteStore,i.targetId),yp(r,i.targetId)}).catch(pl)):(yp(r,i.targetId),await mp(r.localStore,i.targetId,!0))}async function RL(t,e){const n=fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ug(n.remoteStore,r.targetId))}async function NL(t,e,n){const r=jL(t);try{const i=await function(o,l){const u=fe(o),c=Ze.now(),f=l.reduce((S,x)=>S.add(x.key),ye());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let x=Ar(),R=ye();return u.cs.getEntries(S,f).next(P=>{x=P,x.forEach((T,w)=>{w.isValidDocument()||(R=R.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,x)).next(P=>{p=P;const T=[];for(const w of l){const A=eO(w,p.get(w.key).overlayedDocument);A!=null&&T.push(new Ti(w.key,A,$b(A.value.mapValue),zt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,c,T,l)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(S,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:Zb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new We(be)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await _l(r,i.changes),await Sd(r.remoteStore)}catch(i){const s=pg(i,"Failed to persist write");n.reject(s)}}async function OI(t,e){const n=fe(t);try{const r=await GO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await _l(n,r,e)}catch(r){await pl(r)}}function l_(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=fe(o);u.onlineState=l;let c=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(c=!0)}),c&&mg(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DL(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new We(te.comparator);o=o.insert(s,Dt.newNoDocument(s,he.min()));const l=ye().add(s),u=new Td(he.min(),new Map,new We(be),o,l);await OI(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),gg(r)}else await mp(r.localStore,e,!1).then(()=>yp(r,e,n)).catch(pl)}async function OL(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await qO(n.localStore,e);VI(n,r,null),LI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _l(n,i)}catch(i){await pl(i)}}async function LL(t,e,n){const r=fe(t);try{const i=await function(o,l){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(Ce(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);VI(r,e,n),LI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _l(r,i)}catch(i){await pl(i)}}function LI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VI(t,e,n){const r=fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function yp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||MI(t,r)})}function MI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ug(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gg(t))}function u_(t,e,n){for(const r of n)r instanceof RI?(t.La.addReference(r.key,e),VL(t,r)):r instanceof NI?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||MI(t,r.key)):ce()}function VL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),gg(t))}function gg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new SL(n)),t.Oa=t.Oa.insert(n,r),TI(t.remoteStore,new Jr(Jn(tg(n.path)),r,"TargetPurposeLimboResolution",Qm.oe))}}async function _l(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=lg.Wi(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const f=fe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(c,g=>U.forEach(g.$i,S=>f.persistence.referenceDelegate.addReference(p,g.targetId,S)).next(()=>U.forEach(g.Ui,S=>f.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))}catch(p){if(!ml(p))throw p;X("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const S=f.os.get(g),x=S.snapshotVersion,R=S.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(g,R)}}}(r.localStore,s))}async function ML(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await vI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _l(n,r.hs)}}function FL(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function FI(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DL.bind(null,e),e.Ca.d_=EL.bind(null,e.eventManager),e.Ca.$a=TL.bind(null,e.eventManager),e}function jL(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LL.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WO(this.persistence,new zO,e.initialUser,this.serializer)}Ga(e){return new BO(ag.Zr,this.serializer)}Wa(e){return new JO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class vp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>l_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ML.bind(null,this.syncEngine),await vL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _L}()}createDatastore(e){const n=bd(e.databaseInfo.databaseId),r=function(s){return new nL(s)}(e.databaseInfo);return function(s,o,l,u){return new sL(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new aL(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>l_(this.syncEngine,n,0),function(){return r_.D()?new r_:new ZO}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const p=new kL(i,s,o,l,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await wl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vp.provider={build:()=>new vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rt.UNAUTHENTICATED,this.clientId=jb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function c_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UL(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>i_(e.remoteStore,i)),t._onlineComponents=e}async function UL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await Gh(t,new $c)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Gh(t,new $c);return t._offlineComponents}async function BI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await c_(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await c_(t,new vp))),t._onlineComponents}function $L(t){return BI(t).then(e=>e.syncEngine)}async function wp(t){const e=await BI(t),n=e.eventManager;return n.onListen=AL.bind(null,e.syncEngine),n.onUnlisten=PL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RL.bind(null,e.syncEngine),n}function zL(t,e,n={}){const r=new di;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new jI({next:g=>{f.Za(),o.enqueueAndForget(()=>xI(s,p)),g.fromCache&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new PI(l,f,{includeMetadataChanges:!0,_a:!0});return CI(s,p)}(await wp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HL(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h_(t){if(!te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f_(t){if(te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uD;switch(r.type){case"firstParty":return new fD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=d_.get(n);r&&(X("ComponentProvider","Removing Datastore"),d_.delete(n),r.terminate())}(this),Promise.resolve()}}function WL(t,e,n,r={}){var i;const s=(t=fn(t,Ad))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Rt.MOCK_USER;else{l=Mx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Rt(c)}t._authCredentials=new cD(new Fb(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class Ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class hi extends ls{constructor(e,n,r){super(e,n,tg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new te(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function Ut(t,e,...n){if(t=lt(t),$I("collection","path",e),t instanceof Ad){const r=Me.fromString(e,...n);return f_(r),new hi(t,null,r)}{if(!(t instanceof Ht||t instanceof hi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return f_(r),new hi(t.firestore,null,r)}}function Qe(t,e,...n){if(t=lt(t),arguments.length===1&&(e=jb.newId()),$I("doc","path",e),t instanceof Ad){const r=Me.fromString(e,...n);return h_(r),new Ht(t,null,new te(r))}{if(!(t instanceof Ht||t instanceof hi))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return h_(r),new Ht(t.firestore,t instanceof hi?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _I(this,"async_queue_retry"),this.Vu=()=>{const r=qh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new di;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ml(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=fg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function g_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends Ad{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new m_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m_(e),this._firestoreClient=void 0,await e}}}function qL(t,e){const n=typeof t=="object"?t:XT(),r=typeof t=="string"?t:"(default)",i=Mm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Lx("firestore");s&&WL(i,...s)}return i}function Cd(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GL(t),t._firestoreClient}function GL(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new kD(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,UI(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uo(bt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new uo(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=/^__.*__$/;class QL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new yl(e,this.data,n,this.fieldTransforms)}}class zI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class _g{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HI(this.Cu)&&KL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bd(e)}Qu(e,n,r,i=!1){return new _g({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tl(t){const e=t._freezeSettings(),n=bd(t._databaseId);return new YL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Eg(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Tg("Data must be an object, but it was:",o,r);const l=GI(r,o);let u,c;if(s.merge)u=new cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=_p(e,p,n);if(!o.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);QI(f,g)||f.push(g)}u=new cn(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new QL(new Jt(l),u,c)}class xd extends yg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}function WI(t,e,n,r){const i=t.Qu(1,e,n);Tg("Data must be an object, but it was:",i,r);const s=[],o=Jt.empty();os(r,(u,c)=>{const f=bg(e,u,n);c=lt(c);const p=i.Nu(f);if(c instanceof xd)s.push(f);else{const g=bl(c,p);g!=null&&(s.push(f),o.set(f,g))}});const l=new cn(s);return new zI(o,l,i.fieldTransforms)}function qI(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[_p(e,r,n)],u=[i];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(_p(e,s[g])),u.push(s[g+1]);const c=[],f=Jt.empty();for(let g=l.length-1;g>=0;--g)if(!QI(c,l[g])){const S=l[g];let x=u[g];x=lt(x);const R=o.Nu(S);if(x instanceof xd)c.push(S);else{const P=bl(x,R);P!=null&&(c.push(S),f.set(S,P))}}const p=new cn(c);return new zI(f,p,o.fieldTransforms)}function XL(t,e,n,r=!1){return bl(n,t.Qu(r?4:3,e))}function bl(t,e){if(KI(t=lt(t)))return Tg("Unsupported field value:",e,t),GI(t,e);if(t instanceof yg)return function(r,i){if(!HI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=bl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ze.fromDate(r);return{timestampValue:Bc(i.serializer,s)}}if(r instanceof Ze){const s=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bc(i.serializer,s)}}if(r instanceof vg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof uo)return{bytesValue:dI(i.serializer,r._byteString)};if(r instanceof Ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ng(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${kd(r)}`)}(t,e)}function GI(t,e){const n={};return Bb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,(r,i)=>{const s=bl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function KI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof vg||t instanceof uo||t instanceof Ht||t instanceof yg||t instanceof wg)}function Tg(t,e,n){if(!KI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=kd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _p(t,e,n){if((e=lt(e))instanceof El)return e._internalPath;if(typeof e=="string")return bg(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const JL=new RegExp("[~\\*/\\[\\]]");function bg(t,e,n){if(e.search(JL)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new El(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K(F.INVALID_ARGUMENT,l+t+u)}function QI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZL extends YI{data(){return super.data()}}function Ig(t,e){return typeof e=="string"?bg(t,e):e instanceof El?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class eV extends Sg{}function qa(t,e,...n){let r=[];e instanceof Sg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof kg).length,l=s.filter(u=>u instanceof Pd).length;if(o>1||o>0&&l>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pd extends eV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pd(e,n,r)}_apply(e){const n=this._parse(e);return JI(e._query,n),new ls(e.firestore,e.converter,up(e._query,n))}_parse(e){const n=Tl(e.firestore);return function(s,o,l,u,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){v_(p,f);const S=[];for(const x of p)S.push(y_(u,s,x));g={arrayValue:{values:S}}}else g=y_(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||v_(p,f),g=XL(l,o,p,f==="in"||f==="not-in");return st.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ga(t,e,n){const r=e,i=Ig("where",t);return Pd._create(i,r,n)}class kg extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)JI(o,u),o=up(o,u)}(e._query,n),new ls(e.firestore,e.converter,up(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y_(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qb(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!te.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fw(t,new te(r))}if(n instanceof Ht)return Fw(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function v_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JI(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tV{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return os(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new wg(s)}convertGeoPoint(e){return new vg(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=yi(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Ce(yI(r));const i=new $a(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZI extends YI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bu extends ZI{data(e={}){return super.data(e)}}class eS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bu(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Bu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Bu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:nV(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}class Cg extends tV{constructor(e){super(),this.firestore=e}convertBytes(e){return new uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function w_(t){t=fn(t,ls);const e=fn(t.firestore,Cr),n=Cd(e),r=new Cg(e);return XI(t._query),zL(n,t._query).then(i=>new eS(e,r,t,i))}function Uu(t,e,n){t=fn(t,Ht);const r=fn(t.firestore,Cr),i=Ag(t.converter,e,n);return Il(r,[Eg(Tl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zt.none())])}function Ka(t,e,n,...r){t=fn(t,Ht);const i=fn(t.firestore,Cr),s=Tl(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof El?qI(s,"updateDoc",t._key,e,n,r):WI(s,"updateDoc",t._key,e),Il(i,[o.toMutation(t._key,zt.exists(!0))])}function rV(t){return Il(fn(t.firestore,Cr),[new Ed(t._key,zt.none())])}function Ep(t,e){const n=fn(t.firestore,Cr),r=Qe(t),i=Ag(t.converter,e);return Il(n,[Eg(Tl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,zt.exists(!1))]).then(()=>r)}function Gn(t,...e){var n,r,i;t=lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||g_(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(g_(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,c,f;if(t instanceof Ht)c=fn(t.firestore,Cr),f=tg(t._key.path),u={next:p=>{e[o]&&e[o](iV(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=fn(t,ls);c=fn(p.firestore,Cr),f=p._query;const g=new Cg(c);u={next:S=>{e[o]&&e[o](new eS(c,g,p,S))},error:e[o+1],complete:e[o+2]},XI(t._query)}return function(g,S,x,R){const P=new jI(R),T=new PI(S,P,x);return g.asyncQueue.enqueueAndForget(async()=>CI(await wp(g),T)),()=>{P.Za(),g.asyncQueue.enqueueAndForget(async()=>xI(await wp(g),T))}}(Cd(c),f,l,u)}function Il(t,e){return function(r,i){const s=new di;return r.asyncQueue.enqueueAndForget(async()=>NL(await $L(r),i,s)),s.promise}(Cd(t),e)}function iV(t,e,n){const r=n.docs.get(e._key),i=new Cg(t);return new ZI(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,n,r){this._verifyNotCommitted();const i=Kh(e,this._firestore),s=Ag(i.converter,n,r),o=Eg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Kh(e,this._firestore);let o;return o=typeof(n=lt(n))=="string"||n instanceof El?qI(this._dataReader,"WriteBatch.update",s._key,n,r,i):WI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kh(e,this._firestore);return this._mutations=this._mutations.concat(new Ed(n._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kh(t,e){if((t=lt(t)).firestore!==e)throw new K(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){return Cd(t=fn(t,Cr)),new sV(t,e=>Il(t,e))}(function(e,n=!0){(function(i){_o=i})(vo),no(new Xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Cr(new dD(r.getProvider("auth-internal")),new mD(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ui(Dw,"4.7.3",e),ui(Dw,"4.7.3","esm2017")})();const tS=YT(sA),Pi=aD(tS),se=qL(tS),dn=({children:t,onClick:e,type:n="button",variant:r="primary",className:i="",...s})=>{const o="w-full text-center px-4 py-2 rounded-md font-semibold text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",l={primary:"bg-primary text-white hover:bg-green-700",secondary:"bg-gray-500 dark:bg-gray-600 text-white hover:bg-gray-600 dark:hover:bg-gray-500",outline:"border border-current text-primary hover:bg-primary/10 dark:hover:bg-primary/20","outline-success":"border border-green-500 text-green-600 hover:bg-green-500/10"};return m.jsx("button",{type:n,onClick:e,className:`${o} ${l[r]} ${i}`,...s,children:t})},vr=({label:t,id:e,...n})=>m.jsxs("div",{children:[m.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),m.jsx("input",{id:e,className:"w-full p-2 border border-border-light dark:border-border-dark rounded-md bg-surface-light dark:bg-surface-dark text-text-dark dark:text-text-light focus:ring-2 focus:ring-primary focus:border-primary outline-none",...n})]}),Bi=({label:t,id:e,children:n,...r})=>m.jsxs("div",{children:[m.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),m.jsx("select",{id:e,className:"w-full p-2 border border-border-light dark:border-border-dark rounded-md bg-surface-light dark:bg-surface-dark text-text-dark dark:text-text-light focus:ring-2 focus:ring-primary focus:border-primary outline-none",...r,children:n})]});function oV({showNotification:t,allMeets:e}){const[n,r]=W.useState(""),[i,s]=W.useState(""),[o,l]=W.useState(null),[u,c]=W.useState(8),f=P=>P.toISOString().split("T")[0],p=P=>{l(P),r(P.name),s(f(P.date)),c(P.lanesAvailable||8)},g=()=>{r(""),s(""),l(null),c(8)},S=async(P,T)=>{if((await Bn.fire({title:"Are you sure?",text:`This will permanently delete "${T}" and all of its scheduled events. This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const A=qa(Ut(se,"meet_events"),Ga("meetId","==",P)),D=await w_(A),M=qr(se);D.forEach(j=>M.delete(j.ref)),M.delete(Qe(se,"meets",P)),await M.commit(),t(`"${T}" and all its events were deleted.`,"success")}catch(A){t("Failed to delete meet and its events.","danger"),console.error("Error deleting meet:",A)}},x=async P=>{if(P.preventDefault(),!n.trim()||!i){t("Please provide a name and a date for the meet.","warning");return}const T=new Date(i+"T00:00:00"),w={name:n,date:Ze.fromDate(T),lanesAvailable:parseInt(u,10)||8};try{o?(await Ka(Qe(se,"meets",o.id),w),t("Meet updated successfully!","success")):(await Ep(Ut(se,"meets"),w),t("Meet successfully added!","success")),g()}catch{t("Failed to save meet.","danger")}},R=async P=>{const{value:T}=await Bn.fire({title:`Copy Meet: ${P.name}`,html:`<input id="swal-input1" class="swal2-input" value="Copy of ${P.name}"><input id="swal-input2" type="date" class="swal2-input" value="${f(new Date)}">`,focusConfirm:!1,preConfirm:()=>[document.getElementById("swal-input1").value,document.getElementById("swal-input2").value]});if(T){const[w,A]=T;if(!w||!A){t("New meet name and date are required.","warning");return}try{const D=await Ep(Ut(se,"meets"),{name:w,date:Ze.fromDate(new Date(A))}),M=qa(Ut(se,"meet_events"),Ga("meetId","==",P.id)),b=(await w_(M)).docs.map(_=>({..._.data(),id:_.id})),v=qr(se);b.forEach(_=>{const k=Qe(Ut(se,"meet_events")),I={..._,meetId:D.id,heats:[]};delete I.id,v.set(k,I)}),await v.commit(),t("Successfully copied meet and its schedule.","success")}catch{t("Failed to copy meet.","danger")}}};return m.jsxs(m.Fragment,{children:[m.jsx("h5",{className:"font-semibold text-lg",children:o?"Edit Meet":"Create New Meet"}),m.jsxs("form",{onSubmit:x,className:"space-y-4 mt-2",children:[m.jsx(vr,{label:"Meet Name",id:"meetName",type:"text",value:n,onChange:P=>r(P.target.value)}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsx(vr,{label:"Meet Date",id:"meetDate",type:"date",value:i,onChange:P=>s(P.target.value)}),m.jsx(vr,{label:"Lanes Available",id:"lanesAvailable",type:"number",min:"1",max:"12",value:u,onChange:P=>c(P.target.value)})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[m.jsx(dn,{type:"submit",children:o?"Update Meet":"Add Meet"}),o&&m.jsx(dn,{type:"button",variant:"secondary",onClick:g,children:"Cancel"})]})]}),m.jsx("hr",{className:"my-6 border-border-light dark:border-border-dark"}),m.jsx("h5",{className:"mt-3 font-semibold text-lg",children:"Existing Meets"}),m.jsx("ul",{className:"mt-2 space-y-2",children:e.map(P=>m.jsxs("li",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md flex justify-between items-center",children:[m.jsxs("span",{className:"font-medium",children:[P.name," ",m.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",P.date.toLocaleDateString(),")"]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>R(P),title:"Copy",children:m.jsx(xe,{name:"copy"})}),m.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>p(P),title:"Edit",children:m.jsx(xe,{name:"pencil-alt"})}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>S(P.id,P.name),title:"Delete",children:m.jsx(xe,{name:"trash"})})]})]},P.id))})]})}function aV({adminRole:t,showNotification:e}){const[n,r]=W.useState(""),[i,s]=W.useState([]),[o,l]=W.useState(null);W.useEffect(()=>{const S=Ut(se,"event_library"),x=Gn(S,R=>{const P=R.docs.map(T=>({id:T.id,...T.data()})).sort((T,w)=>T.name.localeCompare(w.name));s(P)});return()=>x()},[]);const u=()=>{r(""),l(null)},c=S=>{l(S),r(S.name)},f=async(S,x)=>{if((await Bn.fire({title:"Are you sure?",text:`This will permanently delete "${x}" from the Event Library.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await rV(Qe(se,"event_library",S)),e("Library event deleted successfully.","success")}catch{e("Error deleting library event.","danger")}},p=async S=>{if(S.preventDefault(),!n.trim()){e("Event name cannot be empty.","warning");return}try{o?(await Ka(Qe(se,"event_library",o.id),{name:n}),e("Library event updated successfully.","success")):(await Ep(Ut(se,"event_library"),{name:n}),e("Library event created successfully.","success")),u()}catch{e("Error saving library event.","danger")}},g=async()=>{if(!(await Bn.fire({title:"Bulk Load Events?",text:"This will add any missing standard events to the library. It will not create duplicates.",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, load them!"})).isConfirmed)return;if(typeof ku>"u"||!Array.isArray(ku)){e("Standard event library is not defined in config.js.","danger");return}const x=new Set(i.map(T=>T.name)),R=ku.filter(T=>!x.has(T));if(R.length===0){e("All standard library events already exist.","info");return}e(`Adding ${R.length} new library events...`,"info");const P=qr(se);R.forEach(T=>{const w=Qe(Ut(se,"event_library"));P.set(w,{name:T})});try{await P.commit(),e("Bulk load complete!","success")}catch(T){e("An error occurred during bulk load.","danger"),console.error("Bulk load error:",T)}};return m.jsxs(m.Fragment,{children:[m.jsx("h5",{className:"font-semibold text-lg",children:"Event Library"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create a master list of reusable event types."}),t==="SUPERADMIN"&&m.jsxs("div",{className:"my-4 space-y-4",children:[m.jsxs("form",{onSubmit:p,className:"space-y-4",children:[m.jsx(vr,{label:o?"Edit Event Name":"New Event Name",id:"libraryEventName",type:"text",value:n,onChange:S=>r(S.target.value),placeholder:"e.g., Girls 9-10 50m Freestyle"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[m.jsx(dn,{type:"submit",children:o?"Update Event":"Create Event"}),o&&m.jsx(dn,{type:"button",variant:"secondary",onClick:u,children:"Cancel"})]})]}),m.jsx(dn,{variant:"outline",onClick:g,children:"Bulk Load Standard Events"})]}),m.jsx("hr",{className:"my-6 border-border-light dark:border-border-dark"}),m.jsx("h5",{className:"mt-3 font-semibold text-lg",children:"Existing Library Events"}),m.jsx("ul",{className:"mt-2 space-y-2",children:i.map(S=>m.jsxs("li",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md flex justify-between items-center",children:[m.jsx("span",{className:"font-medium",children:S.name}),t==="SUPERADMIN"&&m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>c(S),title:"Edit",children:m.jsx(xe,{name:"pencil-alt"})}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>f(S.id,S.name),title:"Delete",children:m.jsx(xe,{name:"trash"})})]})]},S.id))})]})}function lV({allMeets:t,showNotification:e}){const[n,r]=W.useState(""),[i,s]=W.useState([]),[o,l]=W.useState([]),[u,c]=W.useState(new Set),[f,p]=W.useState(new Set),[g,S]=W.useState(null),[x,R]=W.useState(""),P=W.useRef(null),T=W.useRef(null);W.useEffect(()=>{const I=Gn(Ut(se,"event_library"),C=>{const E=C.docs.map(O=>({id:O.id,...O.data()})).sort((O,q)=>O.name.localeCompare(q.name));s(E)});return()=>I()},[]),W.useEffect(()=>{if(!n){l([]);return}const I=qa(Ut(se,"meet_events"),Ga("meetId","==",n)),C=Gn(I,E=>{const O=E.docs.map(q=>({id:q.id,...q.data()})).sort((q,ie)=>q.eventNumber-ie.eventNumber);l(O)},E=>{e("Could not load schedule.","danger")});return()=>C()},[n]),W.useEffect(()=>{P.current&&(T.current&&T.current.destroy(),T.current=new le(P.current,{animation:150,disabled:!!g,onEnd:async I=>{const{oldIndex:C,newIndex:E}=I;if(C===E)return;const O=[...o],[q]=O.splice(C,1);O.splice(E,0,q);const ie=qr(se);O.forEach((Y,B)=>{ie.update(Qe(se,"meet_events",Y.id),{eventNumber:B+1})});try{await ie.commit(),e("Event order updated.","success")}catch{e("Failed to update event order.","danger")}}}))},[o,g]);const w=(I,C)=>{(C==="library"?c:p)(O=>{const q=new Set(O);return q.has(I)?q.delete(I):q.add(I),q})},A=W.useMemo(()=>{const I=new Set(o.map(C=>C.name));return i.filter(C=>!I.has(C.name))},[i,o]),D=async I=>{if(!n||I.length===0)return;const C=I.map((O,q)=>{const ie=i.find(Y=>Y.id===O);return{meetId:n,libraryEventId:ie.id,name:ie.name,eventNumber:o.length+1+q,heats:[]}}),E=qr(se);C.forEach(O=>E.set(Qe(Ut(se,"meet_events")),O));try{await E.commit(),e(`${C.length} event(s) added successfully.`,"success"),c(new Set)}catch{e("Error adding events.","danger")}},M=async I=>{if(!n||I.length===0)return;if((await Bn.fire({title:"Are you sure?",text:`This will remove ${I.length} event(s) from this meet's schedule.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove them"})).isConfirmed){const E=qr(se);I.forEach(q=>E.delete(Qe(se,"meet_events",q))),o.filter(q=>!I.includes(q.id)).sort((q,ie)=>q.eventNumber-ie.eventNumber).forEach((q,ie)=>E.update(Qe(se,"meet_events",q.id),{eventNumber:ie+1}));try{await E.commit(),e("Selected events removed.","success"),p(new Set)}catch{e("Failed to remove events.","danger")}}},j=()=>{const I=new Set(o.map(O=>O.name)),E=ku.map(O=>i.find(q=>q.name===O)).filter(O=>O&&!I.has(O.name)).map(O=>O.id);D(E)},b=async()=>{if(o.length===0)return;if((await Bn.fire({title:"Are you sure?",text:"This will remove ALL events from this meet's schedule. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, clear the schedule!"})).isConfirmed){const C=qr(se);o.forEach(E=>C.delete(Qe(se,"meet_events",E.id)));try{await C.commit(),e("Complete schedule has been cleared.","success"),p(new Set)}catch{e("Failed to clear schedule.","danger")}}},v=I=>{S(I.id),R(I.eventNumber)},_=()=>{S(null),R("")},k=async()=>{const I=g,C=parseInt(x,10);if(isNaN(C)||C<1||C>o.length){e(`Please enter a valid event number between 1 and ${o.length}.`,"warning");return}const E=[...o],O=E.find(Y=>Y.id===I);if(!O)return;const q=E.findIndex(Y=>Y.id===I);E.splice(q,1),E.splice(C-1,0,O);const ie=qr(se);E.forEach((Y,B)=>{ie.update(Qe(se,"meet_events",Y.id),{eventNumber:B+1})});try{await ie.commit(),e("Event number updated successfully.","success"),_()}catch{e("Failed to update event number.","danger")}};return m.jsxs(m.Fragment,{children:[m.jsx("h5",{className:"font-semibold text-lg",children:"Manage a Meet's Schedule"}),m.jsx("div",{className:"my-4",children:m.jsxs(Bi,{label:"1. Select Meet to Manage",id:"meetSelectForSchedule",value:n,onChange:I=>r(I.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose a meet --"}),t.map(I=>m.jsx("option",{value:I.id,children:I.name},I.id))]})}),n&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-4 items-center mt-4",children:[m.jsxs("div",{className:"border border-border-light dark:border-border-dark rounded-lg p-3",children:[m.jsxs("h6",{className:"font-semibold mb-2",children:["Event Library (",A.length,")"]}),m.jsx("ul",{className:"h-64 overflow-y-auto space-y-1",children:A.map(I=>m.jsxs("li",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:`lib-${I.id}`,checked:u.has(I.id),onChange:()=>w(I.id,"library")}),m.jsx("label",{htmlFor:`lib-${I.id}`,className:"flex-grow cursor-pointer",children:I.name})]},I.id))})]}),m.jsxs("div",{className:"flex flex-row md:flex-col gap-2 justify-center",children:[m.jsx(dn,{onClick:j,title:"Add All",children:m.jsx(xe,{name:"angle-double-right"})}),m.jsx(dn,{onClick:()=>D(Array.from(u)),title:"Add Selected",children:m.jsx(xe,{name:"angle-right"})}),m.jsx(dn,{onClick:()=>M(Array.from(f)),title:"Remove Selected",children:m.jsx(xe,{name:"angle-left"})}),m.jsx(dn,{onClick:b,title:"Remove All",children:m.jsx(xe,{name:"angle-double-left"})})]}),m.jsxs("div",{className:"border border-border-light dark:border-border-dark rounded-lg p-3",children:[m.jsxs("h6",{className:"font-semibold mb-2",children:["Scheduled Events (",o.length,")"]}),m.jsx("ul",{className:"h-64 overflow-y-auto space-y-1",ref:P,children:o.map(I=>m.jsxs("li",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2","data-id":I.id,children:[m.jsx("input",{type:"checkbox",id:`sch-${I.id}`,checked:f.has(I.id),onChange:()=>w(I.id,"schedule"),disabled:!!g}),g===I.id?m.jsxs(m.Fragment,{children:[" ",m.jsx("input",{type:"number",className:"w-16 p-1 text-center rounded-md border border-primary bg-surface-light dark:bg-surface-dark",value:x,onChange:C=>R(C.target.value),onKeyDown:C=>{C.key==="Enter"&&k(),C.key==="Escape"&&_()},autoFocus:!0}),m.jsx("span",{className:"flex-grow",children:I.name}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:k,title:"Save",className:"text-green-500 hover:text-green-700",children:m.jsx(xe,{name:"check"})}),m.jsx("button",{onClick:_,title:"Cancel",className:"text-red-500 hover:text-red-700",children:m.jsx(xe,{name:"times"})})]})]}):m.jsxs(m.Fragment,{children:[" ",m.jsxs("label",{htmlFor:`sch-${I.id}`,className:"flex-grow cursor-grab",children:[m.jsxs("strong",{className:"mr-2 w-8 inline-block text-center",children:["E",I.eventNumber,":"]}),I.name]}),m.jsx("div",{className:"ml-auto",children:m.jsx("button",{onClick:()=>v(I),title:"Edit Number",className:"text-gray-500 hover:text-gray-700",children:m.jsx(xe,{name:"pencil-alt"})})})]})]},I.id))})]})]})]})}function uV({adminRole:t,showNotification:e}){const n=t==="SUPERADMIN",[r,i]=W.useState(n?"":t),[s,o]=W.useState([]),[l,u]=W.useState({id:null,firstName:"",lastName:"",age:"",gender:"Boy"}),c=W.useMemo(()=>Object.values(hc).filter(P=>P!=="SUPERADMIN").sort(),[]),f=W.useRef(null);W.useEffect(()=>{if(r){const P=Gn(Qe(se,"rosters",r),T=>{o(T.exists()?T.data().swimmers||[]:[])});return()=>P()}else o([])},[r]);const p=()=>u({id:null,firstName:"",lastName:"",age:"",gender:"Boy"}),g=async P=>{P.preventDefault();const{id:T,firstName:w,lastName:A,age:D,gender:M}=l;if(!w.trim()||!A.trim()||!D||!r){e("Please select a team and fill out all swimmer fields.","warning");return}let j=T?s.map(b=>b.id===T?{...b,firstName:w,lastName:A,age:parseInt(D),gender:M}:b):[...s,{id:crypto.randomUUID(),firstName:w,lastName:A,age:parseInt(D),gender:M}];await Uu(Qe(se,"rosters",r),{swimmers:j},{merge:!0}),e(`Swimmer ${T?"updated":"added"} successfully!`,"success"),p()},S=P=>u(P),x=async P=>{if((await Bn.fire({title:"Are you sure?",text:`This removes ${P.firstName} from the team roster. It does NOT remove them from any events they are already entered in.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove from roster"})).isConfirmed)try{const w=s.filter(A=>A.id!==P.id);await Uu(Qe(se,"rosters",r),{swimmers:w}),e("Swimmer removed from roster.","success")}catch(w){e("Failed to remove swimmer from roster.","danger"),console.error("Error removing swimmer:",w)}},R=P=>{const T=P.target.files[0];if(!T)return;const w=new FileReader;w.onload=async A=>{const M=A.target.result.split(`
`).filter(_=>_.trim()!==""),j=M.shift().toLowerCase().split(",").map(_=>_.trim());if(j[0]!=="firstname"||j[1]!=="lastname"||j[2]!=="age"||j[3]!=="gender"){e("Invalid CSV headers. Must be: firstName,lastName,age,gender","danger");return}const b=M.map(_=>{const[k,I,C,E]=_.split(",");return{id:crypto.randomUUID(),firstName:k.trim(),lastName:I.trim(),age:parseInt(C),gender:E.trim()}}),v=[...s,...b];await Uu(Qe(se,"rosters",r),{swimmers:v},{merge:!0}),e(`Bulk upload successful! Added ${b.length} swimmers.`,"success"),f.current.value=""},w.readAsText(T)};return m.jsxs(m.Fragment,{children:[m.jsx("h5",{className:"font-semibold text-lg",children:"Manage Team Rosters"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add or view swimmers for a specific team."}),m.jsx("div",{className:"my-4 space-y-4",children:n&&m.jsxs(Bi,{label:"1. Select Team",id:"teamSelectRoster",value:r||"",onChange:P=>i(P.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose a Team --"}),c.map(P=>m.jsx("option",{value:P,children:P},P))]})}),r&&m.jsxs(m.Fragment,{children:[m.jsxs("h6",{className:"font-semibold mt-6",children:[l.id?"Edit Swimmer":"Add Swimmer"," to ",r]}),m.jsxs("form",{onSubmit:g,className:"my-2 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:flex lg:items-end gap-3",children:[m.jsx("div",{className:"lg:flex-grow",children:m.jsx(vr,{label:"First Name",id:"swimmerFirstName",type:"text",value:l.firstName,onChange:P=>u({...l,firstName:P.target.value})})}),m.jsx("div",{className:"lg:flex-grow",children:m.jsx(vr,{label:"Last Name",id:"swimmerLastName",type:"text",value:l.lastName,onChange:P=>u({...l,lastName:P.target.value})})}),m.jsx("div",{className:"lg:w-20",children:m.jsx(vr,{label:"Age",id:"swimmerAge",type:"number",value:l.age,onChange:P=>u({...l,age:P.target.value})})}),m.jsx("div",{className:"lg:w-28",children:m.jsxs(Bi,{label:"Gender",id:"swimmerGender",value:l.gender,onChange:P=>u({...l,gender:P.target.value}),children:[m.jsx("option",{value:"Boy",children:"Boy"}),m.jsx("option",{value:"Girl",children:"Girl"})]})}),m.jsxs("div",{className:"flex space-x-2 pt-5 lg:pt-0",children:[m.jsx(dn,{type:"submit",className:"flex-1",children:l.id?"Update":"Add"}),l.id&&m.jsx(dn,{type:"button",variant:"secondary",onClick:p,className:"flex-1",children:"Cancel"})]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("label",{htmlFor:"csvUpload",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bulk Upload Roster (CSV)"}),m.jsx("input",{type:"file",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20",id:"csvUpload",accept:".csv",ref:f,onChange:R}),m.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: firstName,lastName,age,gender (with header row)"})]}),m.jsx("hr",{className:"my-6 border-border-light dark:border-border-dark"}),m.jsxs("h6",{className:"font-semibold text-lg mt-3",children:["Team Roster for ",r]}),m.jsx("ul",{className:"mt-2 space-y-2",children:s.length>0?s.map(P=>m.jsxs("li",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md flex justify-between items-center",children:[m.jsxs("span",{className:"font-medium",children:[P.firstName," ",P.lastName," (Age: ",P.age,", ",P.gender,")"]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>S(P),title:"Edit",children:m.jsx(xe,{name:"pencil-alt"})}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>x(P),title:"Delete",children:m.jsx(xe,{name:"trash"})})]})]},P.id)):m.jsx("li",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:"No swimmers on this roster yet."})})]})]})}function cV({adminRole:t,allMeets:e,showNotification:n,selectedMeet:r}){const i=t==="SUPERADMIN",[s,o]=W.useState(""),[l,u]=W.useState(i?"":t),[c,f]=W.useState([]),[p,g]=W.useState(""),[S,x]=W.useState(""),[R,P]=W.useState({heat:"",lane:""}),[T,w]=W.useState([]),[A,D]=W.useState([]),[M,j]=W.useState(null),b=c.find(O=>O.id===p),v=W.useMemo(()=>Object.values(hc).filter(O=>O!=="SUPERADMIN").sort(),[]),_=W.useMemo(()=>{if(!b||!T)return[];const O=q=>{const ie=q.toLowerCase(),Y=ie.startsWith("girls")?"Girl":ie.startsWith("boys")?"Boy":"Mixed",B=q.match(/(\d+)(-(\d+))?(\s*&\s*Under)?/);return B?B[4]?{minAge:0,maxAge:parseInt(B[1]),gender:Y}:B[3]?{minAge:parseInt(B[1]),maxAge:parseInt(B[3]),gender:Y}:{minAge:parseInt(B[1]),maxAge:parseInt(B[1]),gender:Y}:{minAge:0,maxAge:100,gender:Y}};return T.filter(q=>{const{minAge:ie,maxAge:Y,gender:B}=O(q.name),Q=b.age>=ie&&b.age<=Y,J=B==="Mixed"||B===b.gender;return Q&&J})},[b,T]);W.useEffect(()=>{if(!se||!s){w([]);return}const O=qa(Ut(se,"meet_events"),Ga("meetId","==",s)),q=Gn(O,ie=>{w(ie.docs.map(Y=>({id:Y.id,...Y.data()})).sort((Y,B)=>Y.eventNumber-B.eventNumber))});return()=>q()},[s]),W.useEffect(()=>{if(l){const O=Gn(Qe(se,"rosters",l),q=>{f(q.exists()?q.data().swimmers||[]:[])});return()=>O()}else f([])},[l]),W.useEffect(()=>{if(!T||T.length===0){D([]);return}let O=[];T.forEach(q=>{q.heats&&q.heats.forEach(ie=>{ie.lanes.forEach(Y=>{O.push({swimmerId:Y.id,swimmerName:`${Y.firstName} ${Y.lastName}`,team:Y.team,eventId:q.id,eventName:q.name,eventNumber:q.eventNumber,heatNumber:ie.heatNumber,laneNumber:Y.lane})})})}),i||(O=O.filter(q=>q.team===t)),O.sort((q,ie)=>q.eventNumber!==ie.eventNumber?q.eventNumber-ie.eventNumber:q.swimmerName.localeCompare(ie.swimmerName)),D(O)},[T,t,i]);const k=()=>{j(null),g(""),x(""),P({heat:"",lane:""})},I=O=>{j(O),i||u(O.team),g(O.swimmerId),x(O.eventId),P({heat:O.heatNumber,lane:O.laneNumber});const q=document.querySelector(".admin-view");q&&q.scrollIntoView({behavior:"smooth"})},C=async O=>{if(!(await Bn.fire({title:"Are you sure?",text:`Remove ${O.swimmerName} from E${O.eventNumber}: ${O.eventName}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove them!"})).isConfirmed)return;const ie=Qe(se,"meet_events",O.eventId);try{const Y=T.find(Q=>Q.id===O.eventId);if(!Y)throw new Error("Event not found");const B=Y.heats.map(Q=>({...Q,lanes:Q.lanes.filter(J=>J.id!==O.swimmerId)})).filter(Q=>Q.lanes.length>0);await Ka(ie,{heats:B}),n("Entry deleted successfully.","success")}catch(Y){n("Failed to delete entry.","danger"),console.error("Error deleting entry:",Y)}},E=async()=>{const O=c.find(ee=>ee.id===p);if(!O||!S||!l||!s){n("Please select a meet, team, swimmer, and event.","warning");return}const q=Qe(se,"meet_events",S),ie=T.find(ee=>ee.id===S);if(!ie)return;let Y=JSON.parse(JSON.stringify(ie.heats||[]));M&&(Y=Y.map(ee=>({...ee,lanes:ee.lanes.filter(pe=>pe.id!==M.swimmerId)})).filter(ee=>ee.lanes.length>0));const B=(r==null?void 0:r.lanesAvailable)||8,Q=parseInt(R.heat,10),J=parseInt(R.lane,10);if(Q&&J){if(J>B){n(`Invalid lane. Only ${B} lanes are available for this meet.`,"danger");return}let ee=Y.find(Se=>Se.heatNumber===Q);if(ee||(ee={heatNumber:Q,lanes:[]},Y.push(ee)),ee.lanes.some(Se=>Se.lane===J)){n(`Lane ${J} in Heat ${Q} is already occupied.`,"danger");return}ee.lanes.push({...O,team:l,seedTime:"NT",lane:J})}else{let ee=!1;for(const pe of Y)if(pe.lanes.length<B){const Se=new Set(pe.lanes.map(ut=>ut.lane));for(let ut=1;ut<=B;ut++)if(!Se.has(ut)){pe.lanes.push({...O,team:l,seedTime:"NT",lane:ut}),ee=!0;break}if(ee)break}ee||Y.push({heatNumber:Y.length+1,lanes:[{...O,team:l,seedTime:"NT",lane:1}]})}Y.sort((ee,pe)=>ee.heatNumber-pe.heatNumber),Y.forEach(ee=>ee.lanes.sort((pe,Se)=>pe.lane-Se.lane));try{await Ka(q,{heats:Y}),n(`${O.firstName} was ${M?"updated":"entered"} successfully.`,"success"),k()}catch(ee){n(`Failed to ${M?"update":"add"} entry.`,"danger"),console.error("Error in entry transaction:",ee)}};return m.jsxs(m.Fragment,{children:[m.jsx("h5",{className:"font-semibold text-lg",children:M?"Edit Entry":"Enter Swimmers into Events"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Assign swimmers to events for the selected meet."}),m.jsxs("div",{className:"my-4 space-y-4",children:[m.jsxs(Bi,{label:"1. Select Meet",id:"meetSelectEntries",value:s,onChange:O=>o(O.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose a meet --"}),e.map(O=>m.jsx("option",{value:O.id,children:O.name},O.id))]}),i&&s&&m.jsxs(Bi,{label:"2. Select Team",id:"teamSelectManage",value:l||"",onChange:O=>u(O.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose a Team --"}),v.map(O=>m.jsx("option",{value:O,children:O},O))]})]}),l&&s&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs(Bi,{label:"3. Select Swimmer",id:"swimmerSelect",value:p,onChange:O=>g(O.target.value),children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose from roster --"}),c.map(O=>m.jsxs("option",{value:O.id,children:[O.firstName," ",O.lastName," (Age: ",O.age,")"]},O.id))]}),m.jsxs(Bi,{label:"4. Select Event",id:"eventSelect",value:S,onChange:O=>x(O.target.value),disabled:!p,children:[m.jsx("option",{value:"",disabled:!0,children:"-- Choose an event --"}),_.map(O=>m.jsxs("option",{value:O.id,children:["E",O.eventNumber," - ",O.name]},O.id))]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(vr,{label:"Heat (Optional)",id:"heatNumber",type:"number",min:"1",placeholder:"Auto",value:R.heat,onChange:O=>P({...R,heat:O.target.value})}),m.jsx(vr,{label:"Lane (Optional)",id:"laneNumber",type:"number",min:"1",placeholder:"Auto",value:R.lane,onChange:O=>P({...R,lane:O.target.value})})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(dn,{onClick:E,disabled:!p||!S,variant:"primary",children:M?"Update Entry":"Add Entry"}),M&&m.jsx(dn,{onClick:k,variant:"secondary",children:"Cancel Edit"})]})]}),m.jsx("hr",{className:"my-6 border-border-light dark:border-border-dark"}),m.jsxs("h6",{className:"font-semibold text-lg mt-3",children:["Current Entries for ",i?"All Teams":l]}),m.jsx("ul",{className:"mt-2 space-y-2",children:A.length>0?A.map(O=>m.jsxs("li",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-md flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold",children:O.swimmerName})," (",O.team,")",m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["E",O.eventNumber,": ",O.eventName]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white",onClick:()=>I(O),title:"Edit",children:m.jsx(xe,{name:"pencil-alt"})}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>C(O),title:"Delete",children:m.jsx(xe,{name:"trash"})})]})]},`${O.swimmerId}-${O.eventId}`)):m.jsx("li",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:"No entries found for the selected team."})})]})]})}function dV({adminRole:t,allMeets:e,showNotification:n}){const[r,i]=W.useState("meets"),s=e.find(f=>{var p;return f.id===(r==="entries"?(p=document.getElementById("meetSelectEntries"))==null?void 0:p.value:null)});if(!t)return m.jsx("div",{className:"p-4 text-yellow-800 bg-yellow-100 border border-yellow-200 rounded-md",children:"You are not authorized to view this page."});const o=()=>{switch(r){case"meets":return m.jsx(oV,{showNotification:n,allMeets:e});case"library":return m.jsx(aV,{adminRole:t,showNotification:n});case"schedule":return m.jsx(lV,{allMeets:e,showNotification:n});case"rosters":return m.jsx(uV,{adminRole:t,showNotification:n});case"entries":return m.jsx(cV,{adminRole:t,allMeets:e,showNotification:n,selectedMeet:s});default:return null}},l="block w-full text-center px-4 py-2 rounded-md font-semibold text-sm",u="bg-primary text-white",c="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600";return m.jsxs("div",{className:"admin-view",children:[m.jsx("h2",{className:"text-xl font-bold mb-3",children:"Admin Panel"}),m.jsxs("ul",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 mb-4",children:[m.jsx("li",{children:m.jsx("button",{className:`${l} ${r==="meets"?u:c}`,onClick:()=>i("meets"),children:"Meets"})}),m.jsx("li",{children:m.jsx("button",{className:`${l} ${r==="library"?u:c}`,onClick:()=>i("library"),children:"Library"})}),m.jsx("li",{children:m.jsx("button",{className:`${l} ${r==="schedule"?u:c}`,onClick:()=>i("schedule"),children:"Schedule"})}),m.jsx("li",{children:m.jsx("button",{className:`${l} ${r==="rosters"?u:c}`,onClick:()=>i("rosters"),children:"Rosters"})}),m.jsx("li",{children:m.jsx("button",{className:`${l} ${r==="entries"?u:c}`,onClick:()=>i("entries"),children:"Entries"})})]}),m.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-lg shadow-md border border-border-light dark:border-border-dark",children:m.jsx("div",{className:"p-4",children:o()})})]})}function hV({theme:t,setTheme:e,user:n,isAuthorized:r,handleSignIn:i,handleSignOut:s}){const o=()=>n?n.isAnonymous?m.jsxs("button",{className:"w-full flex items-center justify-center px-4 py-2 rounded-md font-semibold text-sm bg-blue-600 text-white hover:bg-blue-700",onClick:i,children:[m.jsx(xe,{name:"google",type:"fab",className:"mr-2"})," Admin Sign-In"]}):m.jsxs("div",{className:"space-y-3 text-center",children:[m.jsxs("p",{children:["Signed in as ",m.jsx("span",{className:"font-semibold",children:n.email})]}),r&&m.jsx("p",{className:"text-green-600 dark:text-green-400 font-bold",children:"You have admin privileges."}),m.jsx("button",{className:"w-full px-4 py-2 rounded-md font-semibold text-sm bg-gray-500 text-white hover:bg-gray-600",onClick:s,children:"Sign Out"})]}):null;return m.jsxs("div",{className:"settings-view space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),m.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-lg shadow-md border border-border-light dark:border-border-dark",children:m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-md font-semibold mb-2",children:"Theme"}),m.jsxs("div",{className:"flex w-full rounded-md shadow-sm",children:[m.jsx("button",{onClick:()=>e("light"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-l-md border ${t==="light"?"bg-primary text-white border-primary":"bg-transparent border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Light"}),m.jsx("button",{onClick:()=>e("dark"),className:`flex-1 px-4 py-2 text-sm font-medium border-t border-b ${t==="dark"?"bg-primary text-white border-primary":"bg-transparent border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Dark"}),m.jsx("button",{onClick:()=>e("system"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-r-md border ${t==="system"?"bg-primary text-white border-primary":"bg-transparent border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"System"})]})]})}),m.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-lg shadow-md border border-border-light dark:border-border-dark",children:m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-md font-semibold mb-2 text-center",children:"Account"}),o()]})})]})}const __=new ur,fV=t=>{try{localStorage.setItem("swimMeetFavorites",JSON.stringify(Array.from(t)))}catch(e){console.error("Error saving favorites:",e)}},pV=()=>{try{const t=localStorage.getItem("swimMeetFavorites");return t?new Set(JSON.parse(t)):new Set}catch(t){return console.error("Error loading favorites:",t),new Set}};function mV(){const[t,e]=W.useState(localStorage.getItem("theme")||"system"),[n,r]=W.useState(null),[i,s]=W.useState(null),[o,l]=W.useState(pV),[u,c]=W.useState("schedule"),[f,p]=W.useState({eventNumber:1,heatNumber:1,isTracking:!1}),[g,S]=W.useState(""),[x,R]=W.useState(""),[P,T]=W.useState({show:!1,message:"",type:""}),[w,A]=W.useState(!1),[D,M]=W.useState(null),[j,b]=W.useState(!0),[v,_]=W.useState(null),[k,I]=W.useState([]),[C,E]=W.useState(null),[O,q]=W.useState({}),ie=(Z,oe="info")=>{T({show:!0,message:Z,type:oe}),setTimeout(()=>{T({show:!1,message:"",type:""})},3e3)};W.useEffect(()=>{const Z=Re=>{const ct=Re==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Re,Ne=document.documentElement;ct==="dark"?Ne.classList.add("dark"):Ne.classList.remove("dark")};Z(t),localStorage.setItem("theme",t);const oe=window.matchMedia("(prefers-color-scheme: dark)"),ne=()=>Z(t);return oe.addEventListener("change",ne),()=>oe.removeEventListener("change",ne)},[t]),W.useEffect(()=>{if(!Pi){_("Authentication service is not available.");return}const Z=YR(Pi,oe=>{oe?(r(oe),oe.email&&typeof hc<"u"?s(hc[oe.email]||null):s(null)):HR(Pi).catch(ne=>{console.error("Anonymous sign-in failed:",ne)})});return()=>Z()},[]),W.useEffect(()=>{if(!se)return;const Z=Ut(se,"rosters"),oe=Gn(Z,ne=>{const Re={};ne.forEach(ct=>{const Ne=ct.id;(ct.data().swimmers||[]).forEach(ir=>{Re[ir.id]={...ir,team:Ne}})}),q(Re)});return()=>oe()},[]),W.useEffect(()=>{if(!se)return;const Z=Ut(se,"meets"),oe=Gn(Z,ne=>{const Re=ne.docs.map(ct=>({id:ct.id,...ct.data(),date:ct.data().date.toDate()})).sort((ct,Ne)=>ct.date-Ne.date);if(I(Re),!C&&Re.length>0){const ct=new Date,Ne=Re.find(_n=>_n.date>=ct);E(Ne?Ne.id:Re[Re.length-1].id)}b(!1)},ne=>{console.error("Error fetching meets:",ne),_("Could not load meets from the database."),b(!1)});return()=>oe()},[]),W.useEffect(()=>{if(!se||!C){M(null);return}const Z=k.find(Re=>Re.id===C);if(!Z)return;const oe=qa(Ut(se,"meet_events"),Ga("meetId","==",C)),ne=Gn(oe,Re=>{const ct=Re.docs.map(Ne=>({id:Ne.id,...Ne.data()})).sort((Ne,_n)=>Ne.eventNumber-_n.eventNumber);M({...Z,events:ct})},Re=>{console.error(`Error fetching events for meet ${C}:`,Re),_("Could not load events for the selected meet.")});return()=>ne()},[se,C,k]);const Y=()=>{!Pi||!__||gN(Pi,__).catch(Z=>console.error("Sign-in failed:",Z))},B=()=>Pi&&Pi.signOut();W.useEffect(()=>{if(!se||!C)return;const Z=Qe(se,"meet_status",C),oe=Gn(Z,ne=>{ne.exists()?p(ne.data()):Uu(Z,{eventNumber:1,heatNumber:1,isTracking:!1})});return()=>oe()},[se,C]);const Q=async Z=>{if(!se||!i||!C)return;const oe=Qe(se,"meet_status",C);await Ka(oe,Z)};W.useEffect(()=>fV(o),[o]);const J=Z=>{l(oe=>{const ne=new Set(oe);return ne.has(Z)?ne.delete(Z):ne.add(Z),ne})};W.useEffect(()=>{if(Object.keys(O).length===0)return;let Z=!1;const oe=new Set(o);for(const ne of oe)O[ne]||(oe.delete(ne),Z=!0);Z&&(console.log("Cleaned stale swimmer IDs from favorites."),l(oe))},[O,o]);const ee=W.useMemo(()=>Array.from(o).map(oe=>{const ne=O[oe];if(!ne)return{id:oe,name:"Loading swimmer...",team:"",events:[]};const Re=[];if(D&&D.events){const ct=Ne=>(Ne||"").replace("Freestyle","Free").replace("Backstroke","Back").replace("Breaststroke","Breast").replace("Butterfly","Fly");D.events.forEach(Ne=>{Ne.heats&&Ne.heats.forEach(_n=>{_n.lanes.forEach(ir=>{ir.id===oe&&Re.push(`E${Ne.eventNumber} H${_n.heatNumber} L${ir.lane}: ${ct(Ne.name)}`)})})})}return{id:oe,name:`${ne.firstName} ${ne.lastName}`,team:ne.team,events:Re,isInCurrentMeet:Re.length>0}}).sort((oe,ne)=>oe.name.localeCompare(ne.name)),[o,O,D]),pe=W.useMemo(()=>{if(!x.trim()||Object.keys(O).length===0)return[];const Z=x.toLowerCase();return Object.values(O).filter(ne=>`${ne.firstName} ${ne.lastName}`.toLowerCase().includes(Z)).map(ne=>({id:ne.id,name:`${ne.firstName} ${ne.lastName}`,team:ne.team})).sort((ne,Re)=>ne.name.localeCompare(Re.name))},[x,O]),Se=W.useMemo(()=>{if(!g.trim()||!D||!D.events)return[];const Z=g.toLowerCase();return D.events.filter(oe=>oe.name.toLowerCase().includes(Z)||String(oe.eventNumber).includes(Z))},[g,D]);if(j)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("h4",{className:"text-lg font-semibold",children:"Loading Meet Data..."})});if(v)return m.jsx("div",{className:"container mx-auto mt-4",children:m.jsx("div",{className:"p-4 text-red-800 bg-red-100 border border-red-200 rounded-md",children:v})});const ut=()=>{switch(u){case"schedule":return D?m.jsx(Fv,{events:D.events,favorites:o,currentEvent:f,toggleFavorite:J,adminRole:i,updateMeetStatus:Q}):m.jsx("p",{className:"text-center",children:"Select a meet to view the schedule."});case"searchEvents":return D?m.jsx(hA,{search:g,setSearch:S,results:Se,favorites:o,currentEvent:f,toggleFavorite:J}):m.jsx("p",{className:"text-center",children:"Select a meet to search events."});case"searchSwimmers":return D?m.jsx(fA,{search:x,setSearch:R,results:pe,favorites:o,toggleFavorite:J}):m.jsx("p",{className:"text-center",children:"Select a meet to search swimmers."});case"admin":return m.jsx(dV,{adminRole:i,allMeets:k,showNotification:ie});case"settings":return m.jsx(hV,{theme:t,setTheme:e,user:n,isAuthorized:!!i,handleSignIn:Y,handleSignOut:B});default:return D?m.jsx(Fv,{events:D.events,favorites:o,currentEvent:f,toggleFavorite:J,adminRole:i,updateMeetStatus:Q}):m.jsx("p",{className:"text-center",children:"Select a meet to view the schedule."})}};return m.jsxs("div",{className:"bg-bg-light dark:bg-bg-dark text-text-dark dark:text-text-light transition-colors duration-300 pb-20 min-h-screen",children:[m.jsx(dA,{}),m.jsx(oA,{show:P.show,message:P.message,type:P.type}),m.jsxs("div",{className:"container mx-auto px-4 py-4",children:[m.jsxs("header",{className:"text-center mb-4",children:[u!=="admin"&&D?m.jsx("h1",{className:"font-bold text-3xl text-primary",children:D.name}):m.jsx("h1",{className:"font-bold text-3xl text-primary",children:"Swim Meet Live"}),k.length>0&&u!=="admin"&&m.jsx("div",{className:"mt-2 max-w-md mx-auto",children:m.jsx("select",{className:"w-full p-2 border border-border-light dark:border-border-dark rounded-md text-sm bg-surface-light dark:bg-surface-dark text-text-dark dark:text-text-light",value:C||"",onChange:Z=>E(Z.target.value),children:k.map(Z=>m.jsxs("option",{value:Z.id,children:[Z.name," - ",Z.date.toLocaleDateString()]},Z.id))})})]}),u!=="settings"&&u!=="admin"&&D&&m.jsxs("div",{className:"border border-border-light dark:border-border-dark rounded-lg overflow-hidden mb-3",children:[m.jsx("h2",{className:"accordion-header",id:"favorites-header",children:m.jsxs("button",{className:"flex justify-between items-center w-full p-4 font-semibold text-left bg-surface-light dark:bg-surface-dark text-text-dark dark:text-text-light",onClick:()=>A(!w),"aria-expanded":w,"aria-controls":"favorites-content",children:[m.jsxs("span",{children:["My Favorites (",o.size,")"]}),m.jsx(xe,{name:w?"chevron-up":"chevron-down",className:`transition-transform duration-200 ${w?"rotate-180":""}`})]})}),w&&m.jsx("div",{id:"favorites-content",className:"p-4 bg-white dark:bg-surface-dark border-t border-border-light dark:border-border-dark",role:"region","aria-labelledby":"favorites-header",children:ee.length>0?m.jsx("div",{className:"divide-y divide-border-light dark:divide-border-dark -mx-4",children:ee.map(Z=>m.jsxs("div",{className:"px-4 py-3 flex justify-between items-start",children:[m.jsxs("div",{className:"mr-auto",children:[m.jsxs("div",{className:"font-bold flex items-center",children:[m.jsx("span",{children:Z.name}),Z.isInCurrentMeet&&m.jsx("span",{className:"ml-2 h-2.5 w-2.5 bg-green-500 rounded-full",title:"Swimming in this meet"})]}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:Z.events.length>0?Z.events.map((oe,ne)=>m.jsx("div",{children:oe},ne)):m.jsx("p",{className:"italic text-gray-400 dark:text-gray-500 mt-1",children:"Not in this meet"})})]}),u==="searchSwimmers"&&m.jsx("button",{className:"p-2 -m-2",onClick:()=>J(Z.id),"aria-label":`Toggle favorite for ${Z.name}`,children:m.jsx("div",{className:"text-secondary",children:m.jsx(xe,{name:"star",type:"fas"})})})]},Z.id))}):m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-0",children:"No favorites added yet. Tap the star next to a swimmer's name to add them."})})]}),m.jsx("main",{children:ut()})]}),m.jsx("nav",{className:"fixed bottom-0 left-0 w-full bg-surface-light dark:bg-surface-dark border-t border-border-light dark:border-border-dark z-30",children:m.jsxs("div",{className:"flex justify-around items-center",children:[m.jsxs("button",{onClick:()=>c("schedule"),className:`flex-1 text-center py-2 px-1 rounded-lg text-sm transition-colors ${u==="schedule"?"bg-primary/10 text-primary dark:bg-primary/15 dark:text-primary-light":"text-gray-600 dark:text-gray-400"}`,children:[m.jsx("div",{children:m.jsx(xe,{name:"list-ol"})}),m.jsx("div",{className:"text-xs",children:"Schedule"})]}),m.jsxs("button",{onClick:()=>c("searchEvents"),className:`flex-1 text-center py-2 px-1 rounded-lg text-sm transition-colors ${u==="searchEvents"?"bg-primary/10 text-primary dark:bg-primary/15 dark:text-primary-light":"text-gray-600 dark:text-gray-400"}`,children:[m.jsx("div",{children:m.jsx(xe,{name:"magnifying-glass"})}),m.jsx("div",{className:"text-xs",children:"Events"})]}),m.jsxs("button",{onClick:()=>c("searchSwimmers"),className:`flex-1 text-center py-2 px-1 rounded-lg text-sm transition-colors ${u==="searchSwimmers"?"bg-primary/10 text-primary dark:bg-primary/15 dark:text-primary-light":"text-gray-600 dark:text-gray-400"}`,children:[m.jsx("div",{children:m.jsx(xe,{name:"user"})}),m.jsx("div",{className:"text-xs",children:"Swimmers"})]}),i&&m.jsxs("button",{onClick:()=>c("admin"),className:`flex-1 text-center py-2 px-1 rounded-lg text-sm transition-colors ${u==="admin"?"bg-primary/10 text-primary dark:bg-primary/15 dark:text-primary-light":"text-gray-600 dark:text-gray-400"}`,children:[m.jsx("div",{children:m.jsx(xe,{name:"user-shield"})}),m.jsx("div",{className:"text-xs",children:"Admin"})]}),m.jsxs("button",{onClick:()=>c("settings"),className:`flex-1 text-center py-2 px-1 rounded-lg text-sm transition-colors ${u==="settings"?"bg-primary/10 text-primary dark:bg-primary/15 dark:text-primary-light":"text-gray-600 dark:text-gray-400"}`,children:[m.jsx("div",{children:m.jsx(xe,{name:"gear"})}),m.jsx("div",{className:"text-xs",children:"Settings"})]})]})})]})}Qh.createRoot(document.getElementById("root")).render(m.jsx(GS.StrictMode,{children:m.jsx(mV,{})}));
